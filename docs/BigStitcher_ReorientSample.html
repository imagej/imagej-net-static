<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8"/>
<title>BigStitcher ReorientSample - ImageJ</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"BigStitcher_ReorientSample","wgTitle":"BigStitcher ReorientSample","wgCurRevisionId":37463,"wgRevisionId":37463,"wgArticleId":10357,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"BigStitcher_ReorientSample","wgRelevantArticleId":10357,"wgRequestId":"29576fee0374d3352004ff19","wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgPreferredVariant":"en","fancytree_path":"/extensions/TreeAndMenu/fancytree"});mw.loader.state({"site.styles":"ready","noscript":"ready","user.styles":"ready","user.cssprefs":"ready","user":"ready","user.options":"loading","user.tokens":"loading","ext.math.styles":"ready","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.sectionAnchor":"ready","skins.erudite":"ready"});mw.loader.implement("user.options@0j3lz3q",function($,jQuery,require,module){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens@1ku9xth",function ( $, jQuery, require, module ) {
mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});/*@nomin*/;

});mw.loader.load(["mediawiki.page.startup"]);});</script>
<link rel="stylesheet" href="erudite5.css"/>
<link rel="stylesheet" href="extensions/TreeAndMenu/fancytree/fancytree.css"/><link rel="stylesheet" href="extensions/TreeAndMenu/suckerfish/suckerfish.css"/>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="erudite15.css"/>
<meta name="generator" content="MediaWiki 1.28.0"/>
<meta name="description" content="In addition to the manual view alignment functionality in Stitching mode (see here for details), which focuses on the translational alignment of tiled images, we offer offer complementary functions for manually transforming images and managing transformations in MultiView mode."/>
<link rel="shortcut icon" href="skins/ij2.ico"/>
	<meta property="og:type" content="article"/>

	<meta property="og:site_name" content="ImageJ"/>

	<meta property="og:title" content="BigStitcher ReorientSample"/>

	<meta property="og:description" content="In addition to the manual view alignment functionality in Stitching mode (see here for details), which focuses on the translational alignment of tiled images, we offer offer complementary functions for manually transforming images and managing transformations in MultiView mode."/>


<meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-BigStitcher_ReorientSample rootpage-BigStitcher_ReorientSample skin-erudite action-view">
		<div id="top-wrap" role="banner">
			<h1><a href="Welcome" title="ImageJ" rel="home">ImageJ</a></h1>
			<div id="tagline">From ImageJ</div>

			<a id="menubutton" href="BigStitcher_ReorientSample.html#menu">Menu</a>
			<div id="nav" role="navigation">
			<ul id='menu'>
<li id="menu-item-n-About"><a href="ImageJ">About</a></li>
<li id="menu-item-n-Downloads"><a href="Downloads">Downloads</a></li>
<li id="menu-item-n-Learn"><a href="Learn">Learn</a></li>
<li id="menu-item-n-Develop"><a href="Development">Develop</a></li>
<li id="menu-item-n-News"><a href="News">News</a></li>
<li id="menu-item-n-Events"><a href="Events">Events</a></li>
<li id="menu-item-n-Help"><a href="Help">Help</a></li>
</ul>
			</div>
		</div>

		<div id="mw-js-message"></div>
		
		<div id="main" role="main">

			<div id="bodyContent">
				<div style="font-size: large; border: 1px solid black; padding: 1em; margin-bottom: 1em; text-align: center; background-color: #fda;">
					This is an archive of the old MediaWiki-based ImageJ wiki. The current website can be found at <a href="https://imagej.net/">imagej.net</a>.
				</div>

				<h1>BigStitcher ReorientSample</h1>
				
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><p>In addition to the manual view alignment functionality in <b>Stitching mode</b> (see <a href="BigStitcher_manual_translation" title="BigStitcher manual translation">here</a> for details), which focuses on the translational alignment of tiled images, we offer offer complementary functions for <b>manually transforming</b> images and <b>managing transformations</b> in <b>MultiView mode</b>.
</p><p>These functions can be found under <code>Calibration/Transformations</code> in the main menu of the MultiView mode.
</p>
<div class="center"><div class="floatnone"><a href="./File:BigStitcher_registration_menu.png" class="image"><img alt="BigStitcher registration menu.png" src="_images/f/f4/BigStitcher_registration_menu.png" width="700" height="185" /></a></div></div>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="BigStitcher_ReorientSample.html#Registration_Explorer"><span class="tocnumber">1</span> <span class="toctext">Registration Explorer</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="BigStitcher_ReorientSample.html#Specify_Calibration"><span class="tocnumber">2</span> <span class="toctext">Specify Calibration</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="BigStitcher_ReorientSample.html#Apply_Transformation.28s.29"><span class="tocnumber">3</span> <span class="toctext">Apply Transformation(s)</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="BigStitcher_ReorientSample.html#Bake_BDV_manual_transform"><span class="tocnumber">4</span> <span class="toctext">Bake BDV manual transform</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="BigStitcher_ReorientSample.html#Remove_Transformation"><span class="tocnumber">5</span> <span class="toctext">Remove Transformation</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="BigStitcher_ReorientSample.html#Interactively_Reorient_Sample"><span class="tocnumber">6</span> <span class="toctext">Interactively Reorient Sample</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Registration_Explorer">Registration Explorer</span></h2>
<p>Clicking <b>Registration Explorer (on/off)</b> will open up a new window listing all transformations that are currently applied to the selected view (groups).
</p><p>Each <b>Transformation</b> consists of a 3x4 matrix (3D affine transformation + translation), of which all entries <img class="mwe-math-fallback-image-inline tex" alt="m_{row, column}" src="_images/math/7/e/6/7e6d9cc34f11e3f09194c535ffc763bd.png" /> are listed in this window.
</p><p>Note that the final transformation of a view is determined by applying the individual transformations <b>last-to-first</b>.
</p>
<div class="center"><div class="floatnone"><a href="./File:BigStitcher_registration_explorer.png" class="image"><img alt="BigStitcher registration explorer.png" src="_images/e/ec/BigStitcher_registration_explorer.png" width="900" height="397" /></a></div></div>
<p>You have a few options of modifying the transformations here:
</p>
<ul><li> double-clicking on an entry allows you to change that entry by hand</li>
<li> right-clicking on a transformation allows you to:
<ul><li> <b>Delete</b> it</li>
<li> <b>Copy</b> it</li>
<li> <b>Paste</b> a previously copied transformation (either before or after the selected transformation or overwriting the currently selected transformation)</li></ul></li></ul>
<p>If the BigDataViewer is open, you can immediately see the effects of your changes.
</p>
<h2><span class="mw-headline" id="Specify_Calibration">Specify Calibration</span></h2>
<p>Using <b>Specify Calibration</b>, you can change the voxel distance and length unit for the selected views.
</p>
<div class="center"><div class="floatnone"><a href="./File:BigStitcher_registration_calibration.png" class="image"><img alt="BigStitcher registration calibration.png" src="_images/9/9c/BigStitcher_registration_calibration.png" width="500" height="393" /></a></div></div>
<div style="overflow:hidden"><table class="metadata plainlinks ambox ambox-content">
<tr>
<td class="ambox-image">
<p><a href="./File:Important-sign.png" class="image"><img alt="Important-sign.png" src="_images/f/f0/Important-sign.png" width="40" height="40" /></a>
</p>
</td>
<td> As mentioned in the dialog, this will only change the metadata and leave computed registrations (including the scaling to isotropic x,y and z-resolution) as-is. Use <b>Apply Transformation(s)</b> and <b>Apply on top of Calibration</b> to update the isotropy scaling. This will remove other transformations however, so please make sure that the calibration is set correctly <b>before</b> starting any registration/stitching. </td>
<p><br />
</p>
</tr>
</table></div>
<p><br />
</p>
<h2><span class="mw-headline" id="Apply_Transformation.28s.29">Apply Transformation(s)</span></h2>
<p>The <b>Apply Transformation(s)</b> option gives you a variety of possibilities of adding new transformations for the selected images.
</p><p>In the first dialog, you have to specify the <b>Transformation Model</b>, which can be:
</p>
<ul><li> <b>Identity (no transfromation)</b>: useful, if you have changed the calibration (see above) and just want to re-calculate the isotropic scaling.</li>
<li> <b>Translation</b></li>
<li> <b>Rigid</b>: translation and rotation</li>
<li> <b>Affine</b>: full flexibiity</li></ul>
<p>Also, you have to select what to <b>Append</b> the new transformation on top of:
</p>
<ul><li> <b>Identity</b>: removes all existing transformations and keeps just the new one</li>
<li> <b>Calibration</b>: removes all existing calibrations, re-calculates isotropic scaling and the adds the new transformation</li>
<li> <b>Current view transformations</b>: keep all existing transformations and add the new one</li></ul>
<p>Furthermore, you can select <b>Same transformation for all angles</b> to generate one transformation for all views. Otherwise, you will be asked to specify a separate transformation for all angles of the selected views.
</p>
<div class="center"><div class="floatnone"><a href="./File:BigStitcher_registration_apply_main.png" class="image"><img alt="BigStitcher registration apply main.png" src="_images/9/90/BigStitcher_registration_apply_main.png" width="500" height="199" /></a></div></div>
<p>For <b>Translation</b> or <b>Affine Models</b>, you will be asked for the shift vector or the transformation matrix in the next dialog (if you chose NOT to use the same transformation for all angles, you will be asked for multiple vectors/matrices). Please provide them as <b>comma-separated numbers</b> (for matrices: row-by-row).
</p>
<div class="floatleft"><a href="./File:BigStitcher_registration_translation.png" class="image"><img alt="BigStitcher registration translation.png" src="_images/4/49/BigStitcher_registration_translation.png" width="600" height="253" /></a></div> <div class="floatright"><a href="./File:BigStitcher_registration_affine.png" class="image"><img alt="BigStitcher registration affine.png" src="_images/9/9a/BigStitcher_registration_affine.png" width="600" height="197" /></a></div>
<p><br clear="all" />
For <b>Rigid models</b>, you can specify how to define the transformation(s):
</p>
<div class="center"><div class="floatnone"><a href="./File:BigStitcher_registration_rigid.png" class="image"><img alt="BigStitcher registration rigid.png" src="_images/b/b6/BigStitcher_registration_rigid.png" width="500" height="244" /></a></div></div>
<ul><li><b>Matrix</b>: same as for <b>Affine</b> (see above)</li>
<li><b>Interactively using the BigDataViewer</b>: same as <b>Interactively Reorient Sample</b> (see below)</li>
<li><b>Rotation around axis</b>: allows you to specify an axis around which to to rotate and by how many degrees</li></ul>
<div class="center"><div class="floatnone"><a href="./File:BigStitcher_registration_rotation.png" class="image"><img alt="BigStitcher registration rotation.png" src="_images/4/42/BigStitcher_registration_rotation.png" width="500" height="267" /></a></div></div>
<h2><span class="mw-headline" id="Bake_BDV_manual_transform">Bake BDV manual transform</span></h2>
<p>The BigDataViewer offers its own functionality for transforming views or view groups. Clicking <kbd class="keyboard-key nowrap" style="border: 1px solid #aaa; -moz-border-radius: 0.2em; -webkit-border-radius: 0.2em; border-radius: 0.2em; -moz-box-shadow: 0.1em 0.2em 0.2em #ddd; -webkit-box-shadow: 0.1em 0.2em 0.2em #ddd; box-shadow: 0.1em 0.2em 0.2em #ddd; background-color: #f9f9f9; background-image: -moz-linear-gradient(top, #eee, #f9f9f9, #eee); background-image: -o-linear-gradient(top, #eee, #f9f9f9, #eee); background-image: -webkit-linear-gradient(top, #eee, #f9f9f9, #eee); background-image: linear-gradient(&#91;&#91;:Template:Linear-gradient/legacy]], #eee, #f9f9f9, #eee); padding: 0.1em 0.3em; font-family: inherit; font-size: 0.85em;">t</kbd> in the BigDataViewer window will start the transformation. Now, you can transform the views via clicking and dragging the mouse. Click <kbd class="keyboard-key nowrap" style="border: 1px solid #aaa; -moz-border-radius: 0.2em; -webkit-border-radius: 0.2em; border-radius: 0.2em; -moz-box-shadow: 0.1em 0.2em 0.2em #ddd; -webkit-box-shadow: 0.1em 0.2em 0.2em #ddd; box-shadow: 0.1em 0.2em 0.2em #ddd; background-color: #f9f9f9; background-image: -moz-linear-gradient(top, #eee, #f9f9f9, #eee); background-image: -o-linear-gradient(top, #eee, #f9f9f9, #eee); background-image: -webkit-linear-gradient(top, #eee, #f9f9f9, #eee); background-image: linear-gradient(&#91;&#91;:Template:Linear-gradient/legacy]], #eee, #f9f9f9, #eee); padding: 0.1em 0.3em; font-family: inherit; font-size: 0.85em;">t</kbd> again to apply the transformation or <kbd class="keyboard-key nowrap" style="border: 1px solid #aaa; -moz-border-radius: 0.2em; -webkit-border-radius: 0.2em; border-radius: 0.2em; -moz-box-shadow: 0.1em 0.2em 0.2em #ddd; -webkit-box-shadow: 0.1em 0.2em 0.2em #ddd; box-shadow: 0.1em 0.2em 0.2em #ddd; background-color: #f9f9f9; background-image: -moz-linear-gradient(top, #eee, #f9f9f9, #eee); background-image: -o-linear-gradient(top, #eee, #f9f9f9, #eee); background-image: -webkit-linear-gradient(top, #eee, #f9f9f9, #eee); background-image: linear-gradient(&#91;&#91;:Template:Linear-gradient/legacy]], #eee, #f9f9f9, #eee); padding: 0.1em 0.3em; font-family: inherit; font-size: 0.85em;"><span class="Unicode">⎋</span> Esc</kbd> to cancel the transformation.
</p><p>The transformation will affect the <b>current view (group)</b>. Views or groups can be selected in the <b>visibility and grouping</b> window (press <kbd class="keyboard-key nowrap" style="border: 1px solid #aaa; -moz-border-radius: 0.2em; -webkit-border-radius: 0.2em; border-radius: 0.2em; -moz-box-shadow: 0.1em 0.2em 0.2em #ddd; -webkit-box-shadow: 0.1em 0.2em 0.2em #ddd; box-shadow: 0.1em 0.2em 0.2em #ddd; background-color: #f9f9f9; background-image: -moz-linear-gradient(top, #eee, #f9f9f9, #eee); background-image: -o-linear-gradient(top, #eee, #f9f9f9, #eee); background-image: -webkit-linear-gradient(top, #eee, #f9f9f9, #eee); background-image: linear-gradient(&#91;&#91;:Template:Linear-gradient/legacy]], #eee, #f9f9f9, #eee); padding: 0.1em 0.3em; font-family: inherit; font-size: 0.85em;">F6</kbd> in BigDataViewer or open it via the menu). For details on view transformation in BigDataViewer, please refer to the corresponding <a href="BigDataViewer#Usage" title="BigDataViewer">documentation</a>.
</p><p>Normally, the manual transformations from BDV are not propagated to BigStitcher/Multiview Reconstruction and thus will be lost once you close the BigDataViewer.
</p><p>The <b>Bake BDV manual transform</b> will take the manual transformations for the selected views from BigDataViewer and append them to the dataset's registrations.
</p>
<h2><span class="mw-headline" id="Remove_Transformation">Remove Transformation</span></h2>
<p>Under this menu item, you have the option to remove <b>Latest/Newest Transformation</b> or the <b>First/Oldest Transformation</b> (typically the <b>calibration</b>) for all selected views.
</p><p>As every registration step adds a new transformation, you can use <b>Remove Latest/Newest Transformation</b> to <b>un-do</b> a bad registration (note that there is no re-do, it will be gone forever, unless you saved before).
</p>
<h2><span class="mw-headline" id="Interactively_Reorient_Sample">Interactively Reorient Sample</span></h2>
<p>Clicking this will open up a new window that listens for the <b>global transformation</b> of the BigDataViewer. You can then <b>Apply the Transformation</b> from BDV to all selected views. This is a convenient way of interactively re-orienting the sample, e.g. to be aligned to the coordinate system axes, by simply rotating it in the BigDataViewer.
</p><p>You can choose to <b>Ignore scaling factor from BigDataViewer</b> - this way, we will extract the sample rotation, but not any effects of zooming. Note that the scaling depends on the BDV window size, among other things, and you can achieve a zoom-out when fusing by using downsampling - we suggest to ignore the scaling unless you know what you are doing.
</p>
<div class="center"><div class="floatnone"><a href="./File:BigStitcher_registration_reorient.png" class="image"><img alt="BigStitcher registration reorient.png" src="_images/c/c1/BigStitcher_registration_reorient.png" width="500" height="305" /></a></div></div>
<p>Note that the identity transformation corresponds to an xy-View of the data in BDV. To avoid confusion, we advise to reset the view (by clicking <kbd class="keyboard-key nowrap" style="border: 1px solid #aaa; -moz-border-radius: 0.2em; -webkit-border-radius: 0.2em; border-radius: 0.2em; -moz-box-shadow: 0.1em 0.2em 0.2em #ddd; -webkit-box-shadow: 0.1em 0.2em 0.2em #ddd; box-shadow: 0.1em 0.2em 0.2em #ddd; background-color: #f9f9f9; background-image: -moz-linear-gradient(top, #eee, #f9f9f9, #eee); background-image: -o-linear-gradient(top, #eee, #f9f9f9, #eee); background-image: -webkit-linear-gradient(top, #eee, #f9f9f9, #eee); background-image: linear-gradient(&#91;&#91;:Template:Linear-gradient/legacy]], #eee, #f9f9f9, #eee); padding: 0.1em 0.3em; font-family: inherit; font-size: 0.85em;"><span class="Unicode">⇧</span> Shift</kbd>+<kbd class="keyboard-key nowrap" style="border: 1px solid #aaa; -moz-border-radius: 0.2em; -webkit-border-radius: 0.2em; border-radius: 0.2em; -moz-box-shadow: 0.1em 0.2em 0.2em #ddd; -webkit-box-shadow: 0.1em 0.2em 0.2em #ddd; box-shadow: 0.1em 0.2em 0.2em #ddd; background-color: #f9f9f9; background-image: -moz-linear-gradient(top, #eee, #f9f9f9, #eee); background-image: -o-linear-gradient(top, #eee, #f9f9f9, #eee); background-image: -webkit-linear-gradient(top, #eee, #f9f9f9, #eee); background-image: linear-gradient(&#91;&#91;:Template:Linear-gradient/legacy]], #eee, #f9f9f9, #eee); padding: 0.1em 0.3em; font-family: inherit; font-size: 0.85em;">Z</kbd> in the BDV window) before you start the interactive reorientation.
</p><p><br />
Go back to the <a href="BigStitcher#Documentation" title="BigStitcher">main page</a>
</p>
<!-- 
NewPP limit report
Cached time: 20200713064623
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.120 seconds
Real time usage: 0.123 seconds
Preprocessor visited node count: 2476/1000000
Preprocessor generated node count: 6274/1000000
Post‐expand include size: 13274/2097152 bytes
Template argument size: 1834/2097152 bytes
Highest expansion depth: 7/40
Expensive parser function count: 0/3
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%   81.692      1 - -total
 95.25%   77.815      5 - Template:Key
 86.48%   70.647      6 - Template:Key_press/core
  4.14%    3.383      1 - Template:Warning
  3.76%    3.071      6 - Template:Linear-gradient
  3.62%    2.958      6 - Template:Box-shadow
  3.04%    2.485      1 - Template:Ambox
  1.81%    1.477      6 - Template:Border-radius
  1.02%    0.830      2 - Template:Unicode
  0.51%    0.419      6 - Template:Linear-gradient/legacy
-->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="index.php?title=BigStitcher_ReorientSample&amp;oldid=37463">http://imagej.net/index.php?title=BigStitcher_ReorientSample&amp;oldid=37463</a>"</div>
							</div>

			<div id="footer">
				<p> This page was last modified on 28 March 2018, at 06:28.</p><ul><li><a href="./ImageJ:Privacy_policy" title="ImageJ:Privacy policy">Privacy policy</a></li><li><a href="./ImageJ:About" class="mw-redirect" title="ImageJ:About">About ImageJ</a></li><li><a href="Imprint" title="Imprint">Imprint</a></li></ul>			</div>

			<div id="catlinks" class="catlinks catlinks-allhidden" data-mw="interface"></div>		</div>

		<div id="bottom-wrap">
			<div id="footer-wrap-inner">
				<div id="ternary" class="footer">
					<ul>
						<li class="widget">
							<img id="logo" src="skins/imagej-128.png" alt="">
						</li>
					</ul>
				</div>
			</div>
		</div>
		<script>(window.RLQ=window.RLQ||[]).push(function(){mw.loader.load(["ext.fancytree","ext.suckerfish","mediawiki.toc","mediawiki.action.view.postEdit","site","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest","ext.SimpleTooltip"]);});</script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":287});});</script>
		</body>
		</html>
		