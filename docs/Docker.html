<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8"/>
<title>Docker - ImageJ</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Docker","wgTitle":"Docker","wgCurRevisionId":14544,"wgRevisionId":14544,"wgArticleId":2780,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Docker"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Docker","wgRelevantArticleId":2780,"wgRequestId":"4417df2d5a1177014e4476d2","wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgPreferredVariant":"en","fancytree_path":"/extensions/TreeAndMenu/fancytree"});mw.loader.state({"site.styles":"ready","noscript":"ready","user.styles":"ready","user.cssprefs":"ready","user":"ready","user.options":"loading","user.tokens":"loading","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.sectionAnchor":"ready","skins.erudite":"ready"});mw.loader.implement("user.options@0j3lz3q",function($,jQuery,require,module){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens@1ku9xth",function ( $, jQuery, require, module ) {
mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});/*@nomin*/;

});mw.loader.load(["mediawiki.page.startup"]);});</script>
<link rel="stylesheet" href="erudite14.css"/>
<link rel="stylesheet" href="extensions/TreeAndMenu/fancytree/fancytree.css"/><link rel="stylesheet" href="extensions/TreeAndMenu/suckerfish/suckerfish.css"/>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="erudite15.css"/>
<meta name="generator" content="MediaWiki 1.28.0"/>
<meta name="description" content="Docker provides a platform for distribution of application state. This facilitates the highest level of scientific reproducibility - as a Docker image can bundle operating system, Java version, update site and plugin state, and even sample data. These images can then be reused by remote users and scientists worldwide, with no dependency concerns (beyond Docker itself)."/>
<link rel="shortcut icon" href="skins/ij2.ico"/>
	<meta property="og:type" content="article"/>

	<meta property="og:site_name" content="ImageJ"/>

	<meta property="og:title" content="Docker"/>

	<meta property="og:description" content="Docker provides a platform for distribution of application state. This facilitates the highest level of scientific reproducibility - as a Docker image can bundle operating system, Java version, update site and plugin state, and even sample data. These images can then be reused by remote users and scientists worldwide, with no dependency concerns (beyond Docker itself)."/>


<meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Docker rootpage-Docker skin-erudite action-view">
		<div id="top-wrap" role="banner">
			<h1><a href="Welcome" title="ImageJ" rel="home">ImageJ</a></h1>
			<div id="tagline">From ImageJ</div>

			<a id="menubutton" href="Docker.html#menu">Menu</a>
			<div id="nav" role="navigation">
			<ul id='menu'>
<li id="menu-item-n-About"><a href="ImageJ">About</a></li>
<li id="menu-item-n-Downloads"><a href="Downloads">Downloads</a></li>
<li id="menu-item-n-Learn"><a href="Learn">Learn</a></li>
<li id="menu-item-n-Develop"><a href="Development">Develop</a></li>
<li id="menu-item-n-News"><a href="News">News</a></li>
<li id="menu-item-n-Events"><a href="Events">Events</a></li>
<li id="menu-item-n-Help"><a href="Help">Help</a></li>
</ul>
			</div>
		</div>

		<div id="mw-js-message"></div>
		
		<div id="main" role="main">

			<div id="bodyContent">
				<div style="font-size: large; border: 1px solid black; padding: 1em; margin-bottom: 1em; text-align: center; background-color: #fda;">
					This is an archive of the old MediaWiki-based ImageJ wiki. The current website can be found at <a href="https://imagej.net/">imagej.net</a>.
				</div>

				<h1>Docker</h1>
				
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="Docker.html#Pre-Requisites"><span class="tocnumber">1</span> <span class="toctext">Pre-Requisites</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="Docker.html#How_to_use_the_Fiji_Docker_images"><span class="tocnumber">2</span> <span class="toctext">How to use the Fiji Docker images</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="Docker.html#Running_headless"><span class="tocnumber">3</span> <span class="toctext">Running headless</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="Docker.html#Running_the_UI"><span class="tocnumber">4</span> <span class="toctext">Running the UI</span></a>
<ul>
<li class="toclevel-2 tocsection-5"><a href="Docker.html#On_Linux"><span class="tocnumber">4.1</span> <span class="toctext">On Linux</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="Docker.html#On_OSX"><span class="tocnumber">4.2</span> <span class="toctext">On OSX</span></a>
<ul>
<li class="toclevel-3 tocsection-7"><a href="Docker.html#boot2docker"><span class="tocnumber">4.2.1</span> <span class="toctext">boot2docker</span></a></li>
<li class="toclevel-3 tocsection-8"><a href="Docker.html#Kitematic"><span class="tocnumber">4.2.2</span> <span class="toctext">Kitematic</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-9"><a href="Docker.html#Exposing_your_data"><span class="tocnumber">5</span> <span class="toctext">Exposing your data</span></a></li>
<li class="toclevel-1 tocsection-10"><a href="Docker.html#Dockerfiles"><span class="tocnumber">6</span> <span class="toctext">Dockerfiles</span></a></li>
<li class="toclevel-1 tocsection-11"><a href="Docker.html#Docker_image_structure"><span class="tocnumber">7</span> <span class="toctext">Docker image structure</span></a></li>
<li class="toclevel-1 tocsection-12"><a href="Docker.html#Troubleshooting"><span class="tocnumber">8</span> <span class="toctext">Troubleshooting</span></a></li>
</ul>
</div>

<p><a rel="nofollow" class="external text" href="https://www.docker.com/whatisdocker/">Docker</a> provides a platform for distribution of application state. This facilitates the highest level of scientific <a href="Reproducibility" class="mw-redirect" title="Reproducibility">reproducibility</a> - as a Docker image can bundle operating system, Java version, update site and plugin state, and even sample data. These images can then be reused by remote users and scientists worldwide, with no dependency concerns (beyond Docker itself).
</p>
<h1><span class="mw-headline" id="Pre-Requisites">Pre-Requisites</span></h1>
<p>You will need to <a rel="nofollow" class="external text" href="https://docs.docker.com/installation/#installation">install Docker</a> for your system.
</p>
<h1><span class="mw-headline" id="How_to_use_the_Fiji_Docker_images">How to use the Fiji Docker images</span></h1>
<p>The base Fiji images are provided on <a rel="nofollow" class="external text" href="https://registry.hub.docker.com/u/fiji/fiji/">Docker Hub</a>. These images call the Fiji executable by default. For example:
</p>
<pre> docker run -it --rm fiji/fiji
</pre>
<p>will call the default Fiji image, attempting to open the ImageJ UI with Java 7.
</p><p>Several <a rel="nofollow" class="external text" href="https://registry.hub.docker.com/u/fiji/fiji/tags/manage/">tags</a> are provided to run Fiji with different Java versions. For example, if you wanted to run with Oracle's Java 6, you would use:
</p>
<pre> docker run -it --rm fiji/fiji:fiji-oracle-jdk6
</pre>
<p><b>Important</b> - without some extra setup, there is no display used by Docker. So if you just tried one of the above commands, you likely got an error:
</p>
<pre> No GUI detected.  Falling back to headless mode.
</pre>
<p>The following sections cover <a href="Docker.html#Running_headless">headless</a> and <a href="Docker.html#Running_the_UI">graphical</a> uses.
</p>
<h1><span class="mw-headline" id="Running_headless">Running headless</span></h1>
<p>Running ImageJ headlessly in Docker is not much different than normal headless operation - see the <a href="Headless" title="Headless">headless guide</a> for general information. To start a headless ImageJ invocation from Docker, use:
</p>
<pre> docker run -it --rm fiji/fiji fiji-linux64 --headless
</pre>
<p>If you want to manually explore the Fiji Docker image, e.g. to install additional plugins or utility software, you can start the command prompt via:
</p>
<pre> docker run -it --rm fiji/fiji bash
</pre>
<p>Just be sure to <a rel="nofollow" class="external text" href="https://docs.docker.com/userguide/dockerimages/#updating-and-committing-an-image">commit any changes</a>!
</p>
<h1><span class="mw-headline" id="Running_the_UI">Running the UI</span></h1>
<p>This is, unfortunately, currently quite platform-specific. Docker has tight Linux integration, so it is much easier to share displays with a Docker image if you are using a Linux host. However, it is not impossible on other architectures.
</p><p>Note that this is highly experimental right now, and the steps to get Fiji running can be fairly involved. Please <a rel="nofollow" class="external text" href="https://github.com/fiji/dockerfiles/issues">report issues</a> and contribute suggestions if you have ideas for improving interoperability between Fiji's UI and Docker.
</p>
<h2><span class="mw-headline" id="On_Linux">On Linux</span></h2>
<p>We can adapt <a rel="nofollow" class="external text" href="http://fabiorehm.com/blog/2014/09/11/running-gui-apps-with-docker/">this blog post</a> on running GUI applications with Docker to share the X11 port.
</p><p>Use this Dockerfile as a starting point:
</p>
<pre> # Modify this tag if a different java version is desired
 FROM fiji/fiji:fiji-openjdk-7
 # Replace 1000 with your user / group id
 RUN export uid=1000 gid=1000 &amp;&amp; \
     mkdir -p /home/developer &amp;&amp; \
     echo "developer:x:${uid}:${gid}:Developer,,,:/home/developer:/bin/bash" &gt;&gt; /etc/passwd &amp;&amp; \
     echo "developer:x:${uid}:" &gt;&gt; /etc/group &amp;&amp; \
     echo "developer ALL=(ALL) NOPASSWD: ALL" &gt; /etc/sudoers.d/developer &amp;&amp; \
     chmod 0440 /etc/sudoers.d/developer &amp;&amp; \
     chown ${uid}:${gid} -R /home/developer
 USER developer
 ENV HOME /home/developer
 CMD fiji-linux64
</pre>
<p>Install the Dockerfile with:
</p>
<pre> docker build -t fiji .
</pre>
<p>Run Fiji with:
</p>
<pre> docker run -ti --rm \
      -e DISPLAY=$DISPLAY \
      -v /tmp/.X11-unix:/tmp/.X11-unix \
      fiji/fiji
</pre>
<p>Which should pop up a window with Fiji running.
</p>
<h2><span class="mw-headline" id="On_OSX">On OSX</span></h2>
<h3><span class="mw-headline" id="boot2docker">boot2docker</span></h3>
<p>To get a GUI application running on OSX, we can adapt the techniques discussed in <a rel="nofollow" class="external text" href="https://github.com/docker/docker/issues/8710">this docker issue</a> to run an X11 session, and share it with Docker.
</p><p>First, you will need to install the following:
</p>
<ol><li> <a rel="nofollow" class="external text" href="http://brew.sh/">Homebrew</a></li>
<li> <a rel="nofollow" class="external text" href="https://github.com/caskroom/homebrew-cask">Homebrew-cask</a></li></ol>
<p>Then, from a terminal, use Homebrew to install <a rel="nofollow" class="external text" href="http://www.cyberciti.biz/faq/linux-unix-tcp-port-forwarding/">socat</a> and <a rel="nofollow" class="external text" href="http://xquartz.macosforge.org/landing/">XQuartz</a> via:
</p>
<pre> brew install socat
</pre>
<pre> brew cask install xquartz
</pre>
<p>Now open a new terminal window and type
</p>
<pre> echo $DISPLAY
</pre>
<p>and ensure it is not empty (it should print something like <code>/private/tmp/com.apple.launchd.GYg5TvcMIf/org.macosforge.xquartz:0</code>).
</p><p>Then run:
</p>
<pre> ifconfig
</pre>
<p>which will print output that should end with something like:
</p>
<pre> vboxnet0: flags=0000&lt;UP,BROADCAST,RUNNING,PROMISC,SIMPLEX,MULTICAST&gt;
 ether 00:00:00:00:00:00
 inet 192.168.15.2 netmask 0xffffffff broadcast 192.168.0.0
</pre>
<p>And take note of the ip address on the last line (<code>192.168.15.2</code> in this case).
</p><p>Since you are using OSX it is assumed you are using <a rel="nofollow" class="external text" href="http://boot2docker.io/">boot2docker</a>. Now, in the same terminal you started boot2docker, you should have set up the environment variables e.g. with
</p>
<pre> $(boot2docker shellinit)
</pre>
<p>From this same terminal, open XQuartz with:
</p>
<pre> open -a XQuartz
</pre>
<p>This will start up a new X11 session. You will want two X11 terminals open here (<code>Application &gt; Terminal</code> to open a new X11 terminal).
</p><p>In one X11 terminal, run:
</p>
<pre> socat TCP-LISTEN:6000,reuseaddr,fork UNIX-CLIENT:\"$DISPLAY\"
</pre>
<p>to start listening for X11 forwarding. In the second terminal, you can now use Docker to launch a Fiji GUI. For example:
</p>
<pre> docker run -e DISPLAY=192.168.15.2:0 fiji/fiji
</pre>
<p>Where the IP address was what we found earlier with <code>ifconfig</code>.
</p><p>Congratulations! You should now be running Fiji in a Docker image.
</p>
<h3><span class="mw-headline" id="Kitematic">Kitematic</span></h3>
<p><a rel="nofollow" class="external text" href="https://kitematic.com/">Kitematic</a> is a UI-oriented way to start Docker containers on Macs. It makes it very easy to download and run new images. However we have not yet investigated how to run the Fiji UI with Kitematic.
</p>
<h1><span class="mw-headline" id="Exposing_your_data">Exposing your data</span></h1>
<p>Once you have Fiji up and running, you will probably want to open some images.
</p><p>The best way to share data with Docker is to use volumes, as described in <a rel="nofollow" class="external text" href="http://haven.nightlyart.com/fiji-is-now-available-on-docker-hub/">this blog post</a>.
</p><p>For example, if your data is in <code>/Users/foo/data</code>, launching the Fiji image with:
</p>
<pre> docker run -v /Users/foo/data:/fiji/data -e DISPLAY=192.168.15.2:0 fiji/fiji
</pre>
<p>will create a <code>data</code> subdirectory in the Fiji installation, which you can then open images from as normal.
</p><p>For more information on using volumes, see the <a rel="nofollow" class="external text" href="https://docs.docker.com/userguide/dockervolumes/">Docker user guide</a>.
</p>
<h1><span class="mw-headline" id="Dockerfiles">Dockerfiles</span></h1>
<p>Dockerfiles for Fiji can be <a rel="nofollow" class="external text" href="https://github.com/fiji/dockerfiles">found on GitHub</a>. See the <a rel="nofollow" class="external text" href="https://docs.docker.com/reference/builder/">official documentation</a> for directions on building images from Dockerfiles.
</p>
<h1><span class="mw-headline" id="Docker_image_structure">Docker image structure</span></h1>
<p>In these docker images, you will find Fiji installed in the <code>/fiji</code> directory, which has been added to the <code>PATH</code> of the image (so that Fiji can be run as the default command).
</p>
<h1><span class="mw-headline" id="Troubleshooting">Troubleshooting</span></h1>
<p>If you run into any problems or have questions about ImageJ + Docker, please use:
</p>
<ul><li> <a rel="nofollow" class="external text" href="https://github.com/fiji/dockerfiles/issues">GitHub</a></li>
<li> The <a href="Mailing_Lists" title="Mailing Lists">mailing lists</a></li></ul>

<!-- 
NewPP limit report
Cached time: 20200713065024
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.012 seconds
Real time usage: 0.010 seconds
Preprocessor visited node count: 47/1000000
Preprocessor generated node count: 52/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/3
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 - -total
-->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="index.php?title=Docker&amp;oldid=14544">http://imagej.net/index.php?title=Docker&amp;oldid=14544</a>"</div>
							</div>

			<div id="footer">
				<p> This page was last modified on 20 March 2015, at 10:49.</p><ul><li><a href="./ImageJ:Privacy_policy" title="ImageJ:Privacy policy">Privacy policy</a></li><li><a href="./ImageJ:About" class="mw-redirect" title="ImageJ:About">About ImageJ</a></li><li><a href="Imprint" title="Imprint">Imprint</a></li></ul>			</div>

			<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="./Special:Categories" title="Special:Categories">Category</a>: <ul><li><a href="index.php?title=Category:Docker&amp;action=edit&amp;redlink=1" class="new" title="Category:Docker (page does not exist)">Docker</a></li></ul></div></div>		</div>

		<div id="bottom-wrap">
			<div id="footer-wrap-inner">
				<div id="ternary" class="footer">
					<ul>
						<li class="widget">
							<img id="logo" src="skins/imagej-128.png" alt="">
						</li>
					</ul>
				</div>
			</div>
		</div>
		<script>(window.RLQ=window.RLQ||[]).push(function(){mw.loader.load(["ext.fancytree","ext.suckerfish","mediawiki.toc","mediawiki.action.view.postEdit","site","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest","ext.SimpleTooltip"]);});</script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":201});});</script>
		</body>
		</html>
		