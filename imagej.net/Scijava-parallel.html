<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8"/>
<title>Scijava-parallel - ImageJ</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Scijava-parallel","wgTitle":"Scijava-parallel","wgCurRevisionId":40678,"wgRevisionId":40678,"wgArticleId":10971,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Scijava-parallel","wgRelevantArticleId":10971,"wgRequestId":"c49ee62ebf19a8a51c80f3c6","wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgPreferredVariant":"en","fancytree_path":"/extensions/TreeAndMenu/fancytree"});mw.loader.state({"site.styles":"ready","noscript":"ready","user.styles":"ready","user.cssprefs":"ready","user":"ready","user.options":"loading","user.tokens":"loading","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.sectionAnchor":"ready","skins.erudite":"ready"});mw.loader.implement("user.options@0j3lz3q",function($,jQuery,require,module){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens@1ku9xth",function ( $, jQuery, require, module ) {
mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});/*@nomin*/;

});mw.loader.load(["mediawiki.page.startup"]);});</script>
<link rel="stylesheet" href="load.php%3Fdebug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%252Cshared%257Cmediawiki.sectionAnchor%257Cskins.erudite&amp;only=styles&amp;skin=erudite.css"/>
<script async="" src="load.php%3Fdebug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=erudite"></script>
<link rel="stylesheet" href="extensions/TreeAndMenu/fancytree/fancytree.css"/><link rel="stylesheet" href="extensions/TreeAndMenu/suckerfish/suckerfish.css"/>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="load.php%3Fdebug=false&amp;lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=erudite.css"/>
<meta name="generator" content="MediaWiki 1.28.0"/>
<meta name="description" content="Scijava-parallel is a framework that provides an access point for using computational resources such as remote computers or HPC clusters. It hides details about configuration and initialization of such resources."/>
<link rel="shortcut icon" href="skins/ij2.ico"/>

<script type="text/javascript" src="extensions/SyntaxHighlighter/syntaxhighlighter/scripts/shCore.js"></script>
<script type="text/javascript" src="extensions/SyntaxHighlighter/syntaxhighlighter/scripts/shBrushJava.js"></script>
<script type="text/javascript">
SyntaxHighlighter.all();
</script>
<link rel="stylesheet" type="text/css" media="screen" href="extensions/SyntaxHighlighter/syntaxhighlighter/styles/shCoreMinit.css" />

	<meta property="og:type" content="article"/>

	<meta property="og:site_name" content="ImageJ"/>

	<meta property="og:title" content="Scijava-parallel"/>

	<meta property="og:description" content="Scijava-parallel is a framework that provides an access point for using computational resources such as remote computers or HPC clusters. It hides details about configuration and initialization of such resources."/>


<meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Scijava-parallel rootpage-Scijava-parallel skin-erudite action-view">
		<div class="mw-jump">
			<a href="Scijava-parallel.html#bodyContent">Skip to content</a>, 			<a href="Scijava-parallel.html#search">Skip to search</a>
		</div>

		<div id="top-wrap" role="banner">
			<h1><a href="Welcome" title="ImageJ" rel="home">ImageJ</a></h1>
			<div id="tagline">From ImageJ</div>

			<a id="menubutton" href="Scijava-parallel.html#menu">Menu</a>
			<div id="nav" role="navigation">
			<ul id='menu'>
<li id="menu-item-n-About"><a href="ImageJ">About</a></li>
<li id="menu-item-n-Downloads"><a href="Downloads">Downloads</a></li>
<li id="menu-item-n-Learn"><a href="Learn">Learn</a></li>
<li id="menu-item-n-Develop"><a href="Development">Develop</a></li>
<li id="menu-item-n-News"><a href="News">News</a></li>
<li id="menu-item-n-Events"><a href="Events">Events</a></li>
<li id="menu-item-n-Help"><a href="Help">Help</a></li>
</ul>
			</div>
		</div>

		<div id="mw-js-message"></div>
		
		<div id="main" role="main">

			<div id="bodyContent">
				<h1>Scijava-parallel</h1>
				
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><table class="infobox" cellspacing="5" style="max-width: 31em; font-size: 90%; text-align: left; float: right; border: 1px solid #a0a0a0;">
<tr>
<th colspan="2" style="text-align: center; font-size: 130%;"> <div style="float: left"></div>Scijava-parallel (Fiji)<div style="clear: left;"></div>
</th></tr>
<tr>
<th> Author
</th>
<td> Petr Bainar, Jan Kožusznik
</td></tr>




<tr>
<th> Maintainer
</th>
<td> Jan Kožusznik
</td></tr>


<tr>
<th> Source
</th>
<td> <a rel="nofollow" class="external text" href="https://github.com/fiji-hpc/scijava-parallel">on github</a>
</td></tr>
<tr>
<th> Initial release
</th>
<td> October 2019
</td></tr>
<tr>
<th> Latest version
</th>
<td> October 2019
</td></tr>

<tr>
<th> Category
</th>
<td> <a href="./Category:Development" title="Category:Development">Category:Development</a>
</td></tr>

</table>
<p><br />
</p><p>Scijava-parallel is a framework that provides an access point for using computational resources such as remote computers or HPC clusters. It hides details about configuration and initialization of such resources.
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="Scijava-parallel.html#Types_of_users"><span class="tocnumber">1</span> <span class="toctext">Types of users</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="Scijava-parallel.html#Developers"><span class="tocnumber">2</span> <span class="toctext">Developers</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="Scijava-parallel.html#Fiji_users"><span class="tocnumber">3</span> <span class="toctext">Fiji users</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="Scijava-parallel.html#Profile_creation_and_editing"><span class="tocnumber">3.1</span> <span class="toctext">Profile creation and editing</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="Scijava-parallel.html#Profile_selection"><span class="tocnumber">3.2</span> <span class="toctext">Profile selection</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="Scijava-parallel.html#Parallelization_paradigm_management"><span class="tocnumber">3.3</span> <span class="toctext">Parallelization paradigm management</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-7"><a href="Scijava-parallel.html#Parallelization_paradigm_providers"><span class="tocnumber">4</span> <span class="toctext">Parallelization paradigm providers</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="Scijava-parallel.html#Installation"><span class="tocnumber">5</span> <span class="toctext">Installation</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Types_of_users">Types of users</span></h2>
<p>Scijava-parallel is designed to be used by three types of users and we call them: <i>developers</i>, <i>Fiji users</i> and <i>parallelization paradigm providers</i>.
</p><p>A Developer is a user who uses its defined API for accessing configured computational resources. 
Remote computational resources are accessible through components that implement an interface derived from the interface ParallelParadigm. 
These components are called <i>parallelization paradigm implementations</i> and specialized interfaces are called <i>parallelization paradigms</i>. 
</p><p>A Fiji user provides configurations for parallelization paradigm implementations. 
The configurations are called profiles. 
Users also select one configuration that is used when some code requests a parallelization paradigm.
</p><p>A parallelization paradigm provider offers new parallelization paradigm implementations or new types of parallelization paradigm.
</p>
<h2><span class="mw-headline" id="Developers">Developers</span></h2>
<p>Developers obtain parallelization paradigm implementation that is in selected profile by method getParadigmOfType. Desired parallelization paradigm is specified when the method is called. If the parallelization paradigm implementation does not exist, <i>null</i> value type is returned.
</p>
<div class="MediaTransformError" style="width: 771px; height: 0px; display:inline-block;">Error creating thumbnail: Unable to save thumbnail to destination</div>
<p>Base type ParallelParadimg contains three methods: 
</p>
<ul><li> <i>init</i> - initializes resources required for run and used by parallelization paradigm; </li>
<li> <i>close</i> - disposes initialized resources;</li>
<li> <i>getStatus</i> - returns status indicating whether the paradigm is initialized or disposed.</li></ul>
<p>The first parallelization paradigm of type <i>RPCParadigm</i> has methods:
</p>
<pre class="brush:java">
  List&lt;Map&lt;String, Object&gt;&gt; runAll(String commandName, List&lt;Map&lt;String, Object&gt;&gt; parameters)
  List&lt;CompletableFuture&lt;Map&lt;String, Object&gt;&gt;&gt; runAllAsync(String commandName, List&lt;Map&lt;String, Object&gt;&gt; parameters);
</pre>
<p>The methods cause parallel execution of specified command for parameters. A size of a parameters define how many executions are to be performed. Parallelization and distribution of requests is solved internally by parallelization paradigm implementation.
There are three implementations of parallelization paradigms:
</p>
<ul><li> <i>LocalMultithreadedParadigm</i> in the module <a rel="nofollow" class="external text" href="https://github.com/fiji-hpc/scijava-parallel">scijava-parallel</a> executes commands in the same instance of running Fiji and uses multiple threads for parallelization.</li></ul>
<ul><li> <a href="FSTRPCParadigm" title="FSTRPCParadigm">FSTRPCParadigm</a> in the module <a rel="nofollow" class="external text" href="https://github.com/fiji-hpc/scijava-parallel-fst">scijava-parallel-fst</a> executes commands in different instances of running Fiji. Fiji can run in a different computer or an HPC cluster. Communication is realized through TCP/IP connection and data are serialized by fst library <a rel="nofollow" class="external text" href="https://github.com/RuedigerMoeller/fast-serialization">fst</a>.</li></ul>
<ul><li> <i>ImageJServerParadigm</i> in the module <a rel="nofollow" class="external text" href="https://github.com/fiji-hpc/scijava-parallel-imagej-server">scijava-parallel-imagej-server</a> also executes commands in different instances of running Fiji. The paradigm uses ability of <a rel="nofollow" class="external text" href="https://github.com/imagej/imagej-server/">imagej-server</a> to execute commands through its provided REST API.</li></ul>
<h2><span class="mw-headline" id="Fiji_users">Fiji users</span></h2>
<p>Scijava-parallel offers plugin that provides management of paradigms and profiles. It is accessible from menu <i>Plugins &gt; Scijava parallel &gt; Paradigm Profiles Manager</i>. The plugin shows the following form:
</p>
<div class="MediaTransformError" style="width: 698px; height: 0px; display:inline-block;">Error creating thumbnail: Unable to save thumbnail to destination</div>
<p>Profiles can be:
</p>
<ul><li> created - button <i>Create</i> at the bottom;</li>
<li> edited - button <i>Edit</i> in the central part;</li>
<li> deleted - button <i>Delete</i> in the central part; and</li>
<li> selected - button <i>Select</i> in the central part.</li></ul>
<h3><span class="mw-headline" id="Profile_creation_and_editing">Profile creation and editing</span></h3>
<p>During the creation of a profile a user specifies the implementation of an associated paradigm - <a href="FSTRPCParadigm" title="FSTRPCParadigm">FSTRPCParadigm</a> is selected in the screenshot - paradigm manager. 
Paradigm managers are supplied by parallelization paradigm providers together with parallelization paradigm implementations.
Paradigm managers manage resources used by a parallelization paradigm implementation.
There are three paradigm managers available that differ in the location where they start a server handling requests:
</p>
<ul><li> <i>Inprocess FSTPRC</i> - in an actual running instance of Fiji;</li>
<li> <i>Local FSTRPC</i> - on a local machine as an another process;</li>
<li> <i>FSTRPC on HPC</i> - on a remote HPC cluster through ssh.</li></ul>
<p>This is done in order to allow the user to provide basic settings during a profile creation. The settings required changes according to the selected paradigm manager.
<i>Local FSTPRC</i> paradigm manager requires the user to provide the path to a Fiji installation in a local filesystem while <i>FSTRPC on HPC</i> requires the user to provide information that will allow connection to a remote HPC cluster - host name, credentials - and the location of a Fiji installation on HPC cluster.
</p>
<h3><span class="mw-headline" id="Profile_selection">Profile selection</span></h3>
<p>This action marks a paradigm profile as selected. 
An instance of the paradigm associated with a selected profile is returned as the result of calling the method <i>getParadigmOfType</i> in case that the parallelization paradigm implementation provides (implements an interface) a requested parallelization paradigm type.
In the present implementation of the parallel service, only one profile can be marked as selected but we see it as an implementation detail that could be changed in the future.
</p>
<h3><span class="mw-headline" id="Parallelization_paradigm_management">Parallelization paradigm management</span></h3>
<p>The manager enables the user to perform basic management of the parallelization paradigm implementation in the selected profile.
The user can initialize and close the profile by the check box <i>Paradigm Active</i>.
The paradigm manager <i>FSTRPC on HPC</i> offers a possibility to leave a Fiji, that is started in a job on a remote HPC, running while is an associated parallelization paradigm implementation closed.
This property is specified by the user during
</p>
<h2><span class="mw-headline" id="Parallelization_paradigm_providers">Parallelization paradigm providers</span></h2>
<p>A Parallelization paradigm implementation requires only to implement one or more parallelization paradigms and to annotate this class as plugin:
</p>
<pre class="brush:java">
@Plugin(type = ParallelizationParadigm.class)
public class MPIParadigmImpl implements MPIParadigm
</pre>
<p>The parallelization paradigm implementation very often also requires some specific initialization. The settings for the initialization are expected in an instance of <i>ParallelizationParadigmProfile</i> or its subclass. Scijava-parallel offers a framework for profile creation, its storing in persistent storage and paradigm initialization with contained settings. The framework provides the user interface described earlier.
</p><p>The framework provides interface <i>ParadigmManager</i> and its implementation is used by the framework for a profile creation (method <i>createProfile</i>) and its editing (method <i>editProfile</i>). Parallelization paradigm implementation is initialized by the method<i>prepareParadigm</i>. The parallelization paradigm provider implements the interface <i>ParadigmManager</i> and annotates it as <i>@Plugin</i> with a type <i>ParadigmManager</i>.
</p>
<div class="MediaTransformError" style="width: 624px; height: 0px; display:inline-block;">Error creating thumbnail: Unable to save thumbnail to destination</div>
<p>The class ParadigmManagerUsingRunner supports the frequently occurring scenario of how ParallelizationParadigm is initialized: external software is launched - it is always Fiji in the case of the existing implementation - and parallelization paradigm is initialized with information on how to access the software (host name, port number). It works with profile type <i>ParadigmProfileUsingRunner</i> that contains an object of a type <i>RunnerSettings</i> or its subtype (e.g. LocalImagejRunnerSettings). ParadigmManagerUsingRunner starts external software through an interface <i>ServerRunner</i>. ParadigmManagerUsingRunner edits settings with an object that implements <i>RunnerSettingsEditor</i>. Implementing class should be annotated with the annotation <i>@Plugin</i> with the type <i>RunnerSettingsEditor</i>. It enables scijava-parallel to find an editor for a given type of settings. There are registered editors for existing implementations of RunnerSettings.
</p><p>A developer makes a non-abstract child of the class ParadigmManagerUsingRunner. The  child needs to implement only two abstract methods: <i>getTypeOfRunner</i> and <i>initParadigm</i>. It is possible to create a new implementation of <i>ServerRunner</i> or reuse one of the existing ones: LocalImagejRunner, HPCImageJRunner.
</p>
<div class="MediaTransformError" style="width: 1097px; height: 0px; display:inline-block;">Error creating thumbnail: Unable to save thumbnail to destination</div>
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p>Scijava-parallel can be installed directly into Fiji from its update site <a rel="nofollow" class="external free" href="https://sites.imagej.net/Scijava-parallel/">https://sites.imagej.net/Scijava-parallel/</a>. We also provide a modified version of <a rel="nofollow" class="external text" href="Labkit">Labkit</a> that has support for scijava-parallel. This version of Labkit has its own update site <a rel="nofollow" class="external free" href="https://sites.imagej.net/Imglib2-labkit-cluster/">https://sites.imagej.net/Imglib2-labkit-cluster/</a>. It only demonstrates scijava-parallel and it is not meant as production software.
</p>
<!-- 
NewPP limit report
Cached time: 20200713073318
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.036 seconds
Real time usage: 0.038 seconds
Preprocessor visited node count: 117/1000000
Preprocessor generated node count: 599/1000000
Post‐expand include size: 791/2097152 bytes
Template argument size: 298/2097152 bytes
Highest expansion depth: 3/40
Expensive parser function count: 0/3
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%    4.459      1 - Template:Infobox
100.00%    4.459      1 - -total
-->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="index.php?title=Scijava-parallel&amp;oldid=40678">http://imagej.net/index.php?title=Scijava-parallel&amp;oldid=40678</a>"</div>
							</div>

			<div id="footer">
				<p> This page was last modified on 8 October 2019, at 04:26.</p><ul><li><a href="./ImageJ:Privacy_policy" title="ImageJ:Privacy policy">Privacy policy</a></li><li><a href="./ImageJ:About" class="mw-redirect" title="ImageJ:About">About ImageJ</a></li><li><a href="Imprint" title="Imprint">Imprint</a></li></ul>			</div>

			<div id="catlinks" class="catlinks catlinks-allhidden" data-mw="interface"></div>		</div>

		<div id="bottom-wrap">
		</div>
		<script>(window.RLQ=window.RLQ||[]).push(function(){mw.loader.load(["ext.fancytree","ext.suckerfish","mediawiki.toc","mediawiki.action.view.postEdit","site","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest","ext.SimpleTooltip"]);});</script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":248});});</script>
		</body>
		</html>
		