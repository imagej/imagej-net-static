<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8"/>
<title>2011-10-07 - Unit tests for ImageJ 1.45 - ImageJ</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"2011-10-07_-_Unit_tests_for_ImageJ_1.45","wgTitle":"2011-10-07 - Unit tests for ImageJ 1.45","wgCurRevisionId":19936,"wgRevisionId":19936,"wgArticleId":2345,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["News","ImageJ2"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"2011-10-07_-_Unit_tests_for_ImageJ_1.45","wgRelevantArticleId":2345,"wgRequestId":"07927e040db5bd2a490d2a02","wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgPreferredVariant":"en","fancytree_path":"/extensions/TreeAndMenu/fancytree"});mw.loader.state({"site.styles":"ready","noscript":"ready","user.styles":"ready","user.cssprefs":"ready","user":"ready","user.options":"loading","user.tokens":"loading","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.sectionAnchor":"ready","skins.erudite":"ready"});mw.loader.implement("user.options@0j3lz3q",function($,jQuery,require,module){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens@1ku9xth",function ( $, jQuery, require, module ) {
mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});/*@nomin*/;

});mw.loader.load(["mediawiki.page.startup"]);});</script>
<link rel="stylesheet" href="load.php%3Fdebug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%252Cshared%257Cmediawiki.sectionAnchor%257Cskins.erudite&amp;only=styles&amp;skin=erudite.css"/>
<script async="" src="load.php%3Fdebug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=erudite"></script>
<link rel="stylesheet" href="extensions/TreeAndMenu/fancytree/fancytree.css"/><link rel="stylesheet" href="extensions/TreeAndMenu/suckerfish/suckerfish.css"/>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="load.php%3Fdebug=false&amp;lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=erudite.css"/>
<meta name="generator" content="MediaWiki 1.28.0"/>
<meta name="description" content="When we launched the ImageJ2 project, we began by writing many unit tests to protect ImageJ 1.x from regression bugs. At this writing, there are unit tests in place for 50 core IJ1 classes, intended to detect bugs introduced during ImageJ development. These tests are located in the ij1-tests repository."/>
<link rel="shortcut icon" href="skins/ij2.ico"/>
	<meta property="og:type" content="article"/>

	<meta property="og:site_name" content="ImageJ"/>

	<meta property="og:title" content="2011-10-07 - Unit tests for ImageJ 1.45"/>

	<meta property="og:description" content="When we launched the ImageJ2 project, we began by writing many unit tests to protect ImageJ 1.x from regression bugs. At this writing, there are unit tests in place for 50 core IJ1 classes, intended to detect bugs introduced during ImageJ development. These tests are located in the ij1-tests repository."/>


<meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-2011-10-07_-_Unit_tests_for_ImageJ_1_45 rootpage-2011-10-07_-_Unit_tests_for_ImageJ_1_45 skin-erudite action-view">
		<div class="mw-jump">
			<a href="2011-10-07_-_Unit_tests_for_ImageJ_1.45.html#bodyContent">Skip to content</a>, 			<a href="2011-10-07_-_Unit_tests_for_ImageJ_1.45.html#search">Skip to search</a>
		</div>

		<div id="top-wrap" role="banner">
			<h1><a href="Welcome" title="ImageJ" rel="home">ImageJ</a></h1>
			<div id="tagline">From ImageJ</div>

			<a id="menubutton" href="2011-10-07_-_Unit_tests_for_ImageJ_1.45.html#menu">Menu</a>
			<div id="nav" role="navigation">
			<ul id='menu'>
<li id="menu-item-n-About"><a href="ImageJ">About</a></li>
<li id="menu-item-n-Downloads"><a href="Downloads">Downloads</a></li>
<li id="menu-item-n-Learn"><a href="Learn">Learn</a></li>
<li id="menu-item-n-Develop"><a href="Development">Develop</a></li>
<li id="menu-item-n-News"><a href="News">News</a></li>
<li id="menu-item-n-Events"><a href="Events">Events</a></li>
<li id="menu-item-n-Help"><a href="Help">Help</a></li>
</ul>
			</div>
		</div>

		<div id="mw-js-message"></div>
		
		<div id="main" role="main">
			<div id="nav-meta">
			<span id="ca-nstab-main" class="selected"><a href="2011-10-07_-_Unit_tests_for_ImageJ_1.45" title="View the content page [c]" accesskey="c">Page</a></span><span class="meta-sep">|</span><span id="ca-talk" class="new"><a href="index.php?title=Talk:2011-10-07_-_Unit_tests_for_ImageJ_1.45&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page [t]" accesskey="t">Discussion</a></span><span class="meta-sep">|</span><span id="ca-viewsource"><a href="index.php?title=2011-10-07_-_Unit_tests_for_ImageJ_1.45&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span><span class="meta-sep">|</span><span id="ca-history"><a href="index.php?title=2011-10-07_-_Unit_tests_for_ImageJ_1.45&amp;action=history" title="Past revisions of this page [h]" accesskey="h">History</a></span><span class="meta-sep">|</span>			</div>

			<div id="bodyContent">
				<h1>2011-10-07 - Unit tests for ImageJ 1.45</h1>
				
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><p>When we launched the <a href="ImageJ2" title="ImageJ2">ImageJ2</a> project, we began by writing many unit tests to protect <a href="ImageJ_1.x" class="mw-redirect" title="ImageJ 1.x">ImageJ 1.x</a> from regression bugs. At this writing, there are unit tests in place for 50 core IJ1 classes, intended to detect bugs introduced during ImageJ development. These tests are located in the <a rel="nofollow" class="external text" href="https://github.com/imagej/ij1-tests/">ij1-tests repository</a>.
</p><p>Originally, the tests were designed to run against a modified version of IJ1 that we were developing to facilitate integration with IJ2. However, as development continued, we settled on a design that achieves maximum <a href="Compatibility" title="Compatibility">compatibility</a> by embedding IJ1 as-is within IJ2, enabling IJ1 to continue developing in parallel with IJ2. We eliminated the modified version of IJ1, with only the unit tests being retained. Unfortunately, we did not finish fully transitioning the tests, and they were not compiling against stock versions of IJ1.
</p><p>As of now, we have fixed up the tests to compile (<a rel="nofollow" class="external text" href="https://github.com/imagej/imagej/commit/9fc9ac6599c279bc83eb0a62d922f34517c47e37">r4092</a>) and run (<a rel="nofollow" class="external text" href="https://github.com/imagej/imagej/commit/b51494bb19c094b4430d3936a5e30383c722b35a">r4096</a>, <a rel="nofollow" class="external text" href="https://github.com/imagej/imagej/commit/d1d4ffd94096a0843e751533d909513faaccb7c3">r4098</a>) against stock versions of ImageJ v1.44 and later, and posted <a href="Unit_tests_for_ImageJ1" title="Unit tests for ImageJ1">instructions for running them</a>.
</p><p>We then ran the tests against all the 1.45 development versions. The results are below.
</p><p>Over time, a small but increasing number of tests are failing, which indicates changing behavior creeping into the code. Of course, sometimes changing behavior is good, such as when bugs are fixed. But sometimes these sorts of changes indicate regression bugs being introduced. The only way to know for sure is to examine each failure on an individual basis. For each one, either the test needs to be updated (in the case of a bugfix causing the test to fail when testing for the previous buggy behavior), or the code needs to be fixed to preserve the prior behavior (in the case of a regression bug having been introduced).
</p><p>Once all the tests pass, <a href="Jenkins" title="Jenkins">Jenkins</a> can run them automatically whenever a new version of ImageJ 1.x is released, and report any failures via email, so that we become aware as early as possible when regression bugs have been introduced.
</p>
<table class="wikitable">

<tr>
<th> Version(s)
</th>
<th> Results
</th></tr>
<tr>
<td> 1.43u
</td>
<td> DOES NOT COMPILE (version too old)
</td></tr>
<tr>
<td> 1.44o
</td>
<td> ALL PASS
</td></tr>
<tr>
<td> 1.45a
</td>
<td> ALL PASS
</td></tr>
<tr>
<td> 1.45b
</td>
<td> 2 FAILURES:
<ol><li> <b>testFitSplineForStraightening(ij.gui.PolygonRoiTest): array lengths differed, expected.length=4 actual.length=8</b></li>
<li> <b>testGetUncalibratedLength(ij.gui.PolygonRoiTest): expected:&lt;1.0&gt; but was:&lt;6.324555320336759&gt;</b></li></ol>
</td></tr>
<tr>
<td> 1.45c - 1.45h
</td>
<td> 4 FAILURES:
<ol><li> testFitSplineForStraightening(ij.gui.PolygonRoiTest): array lengths differed, expected.length=4 actual.length=8</li>
<li> testGetUncalibratedLength(ij.gui.PolygonRoiTest): expected:&lt;1.0&gt; but was:&lt;6.324555320336759&gt;</li>
<li> <b>testGetPixels(ij.VirtualStackTest): arrays first differed at element [2]; expected:&lt;0&gt; but was:&lt;120&gt;</b></li>
<li> <b>testGetProcessor(ij.VirtualStackTest): arrays first differed at element [2]; expected:&lt;0&gt; but was:&lt;120&gt;</b></li></ol>
</td></tr>
<tr>
<td> 1.45i - 1.45n
</td>
<td> 5 FAILURES:
<ol><li> <b>testDrawPixelsImageProcessor(ij.gui.ArrowTest): expected:&lt;0&gt; but was:&lt;73&gt;</b></li>
<li> testFitSplineForStraightening(ij.gui.PolygonRoiTest): array lengths differed, expected.length=4 actual.length=8</li>
<li> testGetUncalibratedLength(ij.gui.PolygonRoiTest): expected:&lt;1.0&gt; but was:&lt;6.324555320336759&gt;</li>
<li> testGetPixels(ij.VirtualStackTest): arrays first differed at element [2]; expected:&lt;0&gt; but was:&lt;120&gt;</li>
<li> testGetProcessor(ij.VirtualStackTest): arrays first differed at element [2]; expected:&lt;0&gt; but was:&lt;120&gt;</li></ol>
</td></tr>
<tr>
<td> 1.45o - 1.45q
</td>
<td> 7 FAILURES:
<ol><li> testDrawPixelsImageProcessor(ij.gui.ArrowTest): expected:&lt;0&gt; but was:&lt;73&gt;</li>
<li> testFitSplineForStraightening(ij.gui.PolygonRoiTest): array lengths differed, expected.length=4 actual.length=8</li>
<li> testGetUncalibratedLength(ij.gui.PolygonRoiTest): expected:&lt;1.0&gt; but was:&lt;6.324555320336759&gt;</li>
<li> <b>testGetConvexHull(ij.gui.ShapeRoiTest)</b></li>
<li> <b>testGetFeretValues(ij.gui.ShapeRoiTest): arrays first differed at element [0]; expected:&lt;10.44016&gt; but was:&lt;10.44030650891055&gt;</b></li>
<li> testGetPixels(ij.VirtualStackTest): arrays first differed at element [2]; expected:&lt;0&gt; but was:&lt;120&gt;</li>
<li> testGetProcessor(ij.VirtualStackTest): arrays first differed at element [2]; expected:&lt;0&gt; but was:&lt;120&gt;</li></ol>
</td></tr>
<tr>
<td> 1.45r+
</td>
<td> See the <a href="2012-03-20_-_Unit_tests_for_ImageJ_1.46" title="2012-03-20 - Unit tests for ImageJ 1.46">ImageJ 1.46 unit tests blog post</a>
</td></tr></table>

<!-- 
NewPP limit report
Cached time: 20200713064252
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.012 seconds
Real time usage: 0.011 seconds
Preprocessor visited node count: 32/1000000
Preprocessor generated node count: 312/1000000
Post‐expand include size: 93/2097152 bytes
Template argument size: 35/2097152 bytes
Highest expansion depth: 8/40
Expensive parser function count: 0/3
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%    2.508      1 - Template:GitHub
100.00%    2.508      1 - -total
-->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="index.php?title=2011-10-07_-_Unit_tests_for_ImageJ_1.45&amp;oldid=19936">http://imagej.net/index.php?title=2011-10-07_-_Unit_tests_for_ImageJ_1.45&amp;oldid=19936</a>"</div>
							</div>

			<div id="footer">
				<p> This page was last modified on 18 April 2016, at 16:19.</p><ul><li><a href="./ImageJ:Privacy_policy" title="ImageJ:Privacy policy">Privacy policy</a></li><li><a href="./ImageJ:About" class="mw-redirect" title="ImageJ:About">About ImageJ</a></li><li><a href="Imprint" title="Imprint">Imprint</a></li></ul>			</div>

			<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="./Special:Categories" title="Special:Categories">Categories</a>: <ul><li><a href="./Category:News" title="Category:News">News</a></li><li><a href="./Category:ImageJ2" title="Category:ImageJ2">ImageJ2</a></li></ul></div></div>		</div>

		<div id="bottom-wrap">
		</div>
		<script>(window.RLQ=window.RLQ||[]).push(function(){mw.loader.load(["ext.fancytree","ext.suckerfish","mediawiki.action.view.postEdit","site","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest","ext.SimpleTooltip"]);});</script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":196});});</script>
		</body>
		</html>
		