<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8"/>
<title>Get dSpace - ImageJ</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Get_dSpace","wgTitle":"Get dSpace","wgCurRevisionId":40908,"wgRevisionId":40908,"wgArticleId":10399,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Get_dSpace","wgRelevantArticleId":10399,"wgRequestId":"8fe6a186ddf143df01ebc208","wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgPreferredVariant":"en","fancytree_path":"/extensions/TreeAndMenu/fancytree"});mw.loader.state({"site.styles":"ready","noscript":"ready","user.styles":"ready","user.cssprefs":"ready","user":"ready","user.options":"loading","user.tokens":"loading","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.sectionAnchor":"ready","skins.erudite":"ready"});mw.loader.implement("user.options@0j3lz3q",function($,jQuery,require,module){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens@1ku9xth",function ( $, jQuery, require, module ) {
mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});/*@nomin*/;

});mw.loader.load(["mediawiki.page.startup"]);});</script>
<link rel="stylesheet" href="erudite14.css"/>
<link rel="stylesheet" href="extensions/TreeAndMenu/fancytree/fancytree.css"/><link rel="stylesheet" href="extensions/TreeAndMenu/suckerfish/suckerfish.css"/>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="erudite15.css"/>
<meta name="generator" content="MediaWiki 1.28.0"/>
<meta name="description" content="This plugin provides a more impartial, reproducible, and mathematically rigorous way of calculating interplanar spacing, which makes it more accurate than calc dSpace. It is also easier to use on diffraction patterns where it is hard to tell which reflections originate at like planes in the crystal. Get dSpace helps the user figure this out."/>
<link rel="shortcut icon" href="skins/ij2.ico"/>
	<meta property="og:type" content="article"/>

	<meta property="og:site_name" content="ImageJ"/>

	<meta property="og:title" content="Get dSpace"/>

	<meta property="og:description" content="This plugin provides a more impartial, reproducible, and mathematically rigorous way of calculating interplanar spacing, which makes it more accurate than calc dSpace. It is also easier to use on diffraction patterns where it is hard to tell which reflections originate at like planes in the crystal. Get dSpace helps the user figure this out."/>


<meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Get_dSpace rootpage-Get_dSpace skin-erudite action-view">
		<div id="top-wrap" role="banner">
			<h1><a href="Welcome" title="ImageJ" rel="home">ImageJ</a></h1>
			<div id="tagline">From ImageJ</div>

			<a id="menubutton" href="Get_dSpace.html#menu">Menu</a>
			<div id="nav" role="navigation">
			<ul id='menu'>
<li id="menu-item-n-About"><a href="ImageJ">About</a></li>
<li id="menu-item-n-Downloads"><a href="Downloads">Downloads</a></li>
<li id="menu-item-n-Learn"><a href="Learn">Learn</a></li>
<li id="menu-item-n-Develop"><a href="Development">Develop</a></li>
<li id="menu-item-n-News"><a href="News">News</a></li>
<li id="menu-item-n-Events"><a href="Events">Events</a></li>
<li id="menu-item-n-Help"><a href="Help">Help</a></li>
</ul>
			</div>
		</div>

		<div id="mw-js-message"></div>
		
		<div id="main" role="main">

			<div id="bodyContent">
				<div style="font-size: large; border: 1px solid black; padding: 1em; margin-bottom: 1em; text-align: center; background-color: #fda;">
					This is a read-only version of imagej.net, available during the transition to a new site.
					<br>Please direct any questions or issues to <a href="https://forum.image.sc/t/imagej-wiki-is-down/39672">this Image.sc Forum thread</a>.
					<br>Thank you for your patience as we improve the website!
				</div>

				<h1>Get dSpace</h1>
				
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="Get_dSpace.html#Overview"><span class="tocnumber">1</span> <span class="toctext"><b>Overview</b></span></a></li>
<li class="toclevel-1 tocsection-2"><a href="Get_dSpace.html#How_it_Works"><span class="tocnumber">2</span> <span class="toctext"><b>How it Works</b></span></a></li>
<li class="toclevel-1 tocsection-3"><a href="Get_dSpace.html#Directions"><span class="tocnumber">3</span> <span class="toctext"><b>Directions</b></span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="Get_dSpace.html#Getting_Started"><span class="tocnumber">3.1</span> <span class="toctext"><b>Getting Started</b></span></a></li>
<li class="toclevel-2 tocsection-5"><a href="Get_dSpace.html#Adjust_Threshold"><span class="tocnumber">3.2</span> <span class="toctext"><b>Adjust Threshold</b></span></a></li>
<li class="toclevel-2 tocsection-6"><a href="Get_dSpace.html#Direct_Beam_Spot"><span class="tocnumber">3.3</span> <span class="toctext"><b>Direct Beam Spot</b></span></a></li>
<li class="toclevel-2 tocsection-7"><a href="Get_dSpace.html#Measurements"><span class="tocnumber">3.4</span> <span class="toctext"><b>Measurements</b></span></a></li>
<li class="toclevel-2 tocsection-8"><a href="Get_dSpace.html#Results_Windows"><span class="tocnumber">3.5</span> <span class="toctext"><b>Results Windows</b></span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-9"><a href="Get_dSpace.html#Image_Requirements"><span class="tocnumber">4</span> <span class="toctext"><b>Image Requirements</b></span></a></li>
<li class="toclevel-1 tocsection-10"><a href="Get_dSpace.html#Tips"><span class="tocnumber">5</span> <span class="toctext"><b>Tips</b></span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Overview"><b>Overview</b></span></h2>
<p>This plugin provides a more impartial, reproducible, and mathematically rigorous way of calculating interplanar spacing, which makes it more accurate than <a href="Calc_dSpace" title="Calc dSpace">calc dSpace</a>. It is also easier to use on diffraction patterns where it is hard to tell which reflections originate at like planes in the crystal. Get dSpace helps the user figure this out.
</p>
<h2><span class="mw-headline" id="How_it_Works"><b>How it Works</b></span></h2>
<p>A threshold is applied to the diffraction pattern that the user can manipulate so it suites their image. The centroids of the thresholded spots are then found, and the d-spacing is calculated for each spot as the inverse of the distance from the direct beam. 
</p><p>If you did not use a beamstop for image capture, the direct beam spot corresponds to one of the spots in the image, and the user tells the plugin which spot to use. If a beamstop was used for image capture, then the user picks a pair of spots symmetric about the direct beam spot and the plugin finds the center from those two positions. 
</p><p>The plugin then makes an attempt at binning the measurements according to their d-spacing, and plots both the binned and averaged values along side measured values. This gives the user a chance to conceptualize and evaluate the results.
</p>
<h2><span class="mw-headline" id="Directions"><b>Directions</b></span></h2>
<h3><span class="mw-headline" id="Getting_Started"><b>Getting Started</b></span></h3>
<p>This is the window that opens up when you first start the plugin. All you need for the plugin to work is an opened diffraction pattern that is calibrated and saved as a .dm3 file.
</p>
<div class="center"><div class="floatnone"><a href="./File:First_Window_2.jpg" class="image"><img alt="First Window 2.jpg" src="_images/4/47/First_Window_2.jpg" width="800" height="250" /></a></div></div>
<ul><li><b>Minimum diffraction spot size:</b> is one less pixel than the number of pixels you choose as constituting a diffraction spot. It is good for ignoring cosmic rays that might be captured in your DP, and small fringe spots that sometimes show up near the edges of diffraction spots.</li>
<li><b>Beamstop Status:</b> choose the appropriate option regarding whether or not a beamstop was used to block the direct beam.</li>
<li><b>Binning Size:</b> this sets a value in the plugin that is used to distinguish between like planes (110, 101, and 011) and different planes (100, 110, 111,...). </li>
<li><b>Display modes:</b> these options allow the user to operate the plugin in three different modes. The <i>Measurements</i> mode does not give you a summary plot or table, which is convenient if you are optimizing your settings for a single DP. The <i>Summary</i> mode closes the two measurement windows (so you don't have to) and only shows the summary table and plot. <i>All</i> leaves all four windows open, so you see everything.</li>
<li><b>d-spacing list:</b> yet a fifth window that you can enable, which allows you to view the list of d-spacing values in a text window on a single line.</li>
<li><b>Ring Overlay:</b> not shown in the image above, but a new option that draws circles on the diffraction pattern that correspond to the measurements made, and adds an inset with a list of d-values. See <a href="Calc_dSpace" title="Calc dSpace">calc dSpace</a> for more info.</li></ul>
<h3><span class="mw-headline" id="Adjust_Threshold"><b>Adjust Threshold</b></span></h3>
<div class="floatright"><div class="MediaTransformError" style="width: 300px; height: 0px; display:inline-block;">Error creating thumbnail: Unable to save thumbnail to destination</div></div>
<p>Once you click the "OK" button on the first window. Your DP will be duplicated, and converted to 8-bit. The auto threshold routine is run and the <a rel="nofollow" class="external text" href="https://imagej.nih.gov/ij/docs/guide/146-28.html#sub:Threshold...">usual threshold window</a> appears. You can use the sliders to adjust thresholding levels to optimize your image. When you are happy with the thresholding, click the "OK" button on the window below to proceed. 
</p><p>This is a wait-for-user window that stalls the plugin until you are ready for it to move forward.
</p>
<h3><span class="mw-headline" id="Direct_Beam_Spot"><b>Direct Beam Spot</b></span></h3>
<p>After you click "OK" to proceed, each diffraction spot is measured and labelled, and a new window pops up (shown below) that then asks you to help the software find the direct beam spot. This is the most critical part of the process because the center of the direct beam is the point from which all distances are calculated.
</p>
<div class="center"><div class="floatnone"><a href="./File:Direct_Beam_Center_2.jpg" class="image"><img alt="Direct Beam Center 2.jpg" src="_images/a/aa/Direct_Beam_Center_2.jpg" width="600" height="266" /></a></div></div>
<p>If you <i>have not</i> used a beamstop to cover the direct beam spot in your image, then a simpler window (not shown) appears that just asks you which label corresponds to the direct beam, and the centroid of that spot is used for the calculations. For example, in the image below, spot 26 is the direct beam spot.
</p><p>If you <i>have</i> used a beamstop in your image, then you must enter the labels corresponding to a spot pair in the image that have mirror symmetry in any plane drawn through the direct beam center and normal to the image plane. For example, in the image below, spots 13 and 45 would be a good choice. 
</p><p>Finally, there is a box for artifacts in the image. Artifacts usually occur as a result of the beamstop or small spurious spots that form near the direct beam spot in lower contrast regions. The number entered in this box is the number of values that are trimmed from the list of d-spacing. Just remember you are removing your largest values of d. 
</p><p>For example, with the beamstop retracted, the direct beam will have a d-spacing of infinity, so it is an artifact that should be removed. The beamstop <i>retracted</i> option does this automatically, but it doesn't let you remove more spots, to do that you can use the beamstop <i>inserted</i> option, and just enter the direct beam label twice.
</p>
<h3><span class="mw-headline" id="Measurements"><b>Measurements</b></span></h3>
<p>The image on the left is an example of a thresholded measured and labeled diffraction pattern. The table on the right lists the measurements made for each spot in the image that was larger than the minimum spot size set on the first window ("get dSpace"). The row numbers correspond to the labels in the image, which allows you to track the measurements and really probe the DP. Especially if you want to label the spots in a single crystal pattern like the one shown (strontium titanate) with the appropriate Miller indices.
</p>
<div class="center"><div class="floatnone"><a href="./File:Measurements_2.jpg" class="image"><img alt="Measurements 2.jpg" src="_images/a/a3/Measurements_2.jpg" width="900" height="410" /></a></div></div>
<p>If the <i>Summary</i> option is selected these windows will be closed automatically, but if the <i>Measurements</i> option is selected on the first window then only these windows will be displayed.
</p>
<h3><span class="mw-headline" id="Results_Windows"><b>Results Windows</b></span></h3>
<p>These windows make up the final step of the get dSpace plugin. The plot on the left compares the individual measurements for each spot (blue circles) in the image to the average values for like planes (red squares). This is where the <i>binning size</i> comes into play from before. In general, larger bin sizes are needed for larger d-values(&gt;2.5 A), and smaller bin sizes are needed for smaller d-values (&lt;2.5 A). The plot gives a nice visual representation of how successful the binning was, and the table gives a numerical representation of the same.
</p>
<div class="center"><div class="floatnone"><a href="./File:Results_Windows_2.jpg" class="image"><img alt="Results Windows 2.jpg" src="_images/9/90/Results_Windows_2.jpg" width="900" height="347" /></a></div></div>
<p>The table on the right summarizes the results for your sample. It lists the row number, the number of spots averaged to obtain the d-spacing (spot count), the d-spacing (in Angstroms), and the uncertainty in the measurement (in Angstroms). The uncertainty is obtained using the three sigma rule. The uncertainty should decrease with decreasing d-values.
</p><p>If you see a larger value than expected and a high spot count then there might be different planes being treated as one. This is the case for row 7 in the example table. However, it is unlikely that this error will prevent me from indexing this list to STO. Keep in mind that the unique planes for most materials are the ones with larger d-values. Therefore, the larger d-spacings are more important for indexing, which is why there are two large binning size options and only one small option.
</p>
<h2><span class="mw-headline" id="Image_Requirements"><b>Image Requirements</b></span></h2>
<p>You need to have a properly calibrated diffraction pattern for the calculations to work. Most TEMs use Gatan’s Digital Micrograph software for image collection. If you are using DM, then it is likely that this plugin will work right away, or will work with the help of your TEM technician. 
</p><p>The preferred image is a .dm3 file (Gatan’s format) that is properly calibrated in reciprocal space (see Gatan’s documentation). The easiest way to check this is that the scale bar in your images is displayed in DM with 1/nm units.
</p>
<h2><span class="mw-headline" id="Tips"><b>Tips</b></span></h2>
<ol><li> Another way to verify your image calibrations have been done properly is to call up the image info window in imageJ (just type the letter “i”) and look for a line like this: <i>root.ImageList.1.ImageData.Calibrations.Dimension.0.Units = 1/nm</i>. If it = nm, then it won’t work.</li>
<li> The plugin may not work right the first time you try to use it, this would be because you do not have the area measurement enabled. Running the plugin will set the measurements it needs, so if you redo your measurements with the circle tool, it should work the second time.</li></ol>

<!-- 
NewPP limit report
Cached time: 20200713072402
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.036 seconds
Real time usage: 0.036 seconds
Preprocessor visited node count: 38/1000000
Preprocessor generated node count: 44/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/3
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 - -total
-->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="index.php?title=Get_dSpace&amp;oldid=40908">http://imagej.net/index.php?title=Get_dSpace&amp;oldid=40908</a>"</div>
							</div>

			<div id="footer">
				<p> This page was last modified on 16 November 2019, at 18:54.</p><ul><li><a href="./ImageJ:Privacy_policy" title="ImageJ:Privacy policy">Privacy policy</a></li><li><a href="./ImageJ:About" class="mw-redirect" title="ImageJ:About">About ImageJ</a></li><li><a href="Imprint" title="Imprint">Imprint</a></li></ul>			</div>

			<div id="catlinks" class="catlinks catlinks-allhidden" data-mw="interface"></div>		</div>

		<div id="bottom-wrap">
			<div id="footer-wrap-inner">
				<div id="ternary" class="footer">
					<ul>
						<li class="widget">
							<img id="logo" src="skins/imagej-128.png" alt="">
						</li>
					</ul>
				</div>
			</div>
		</div>
		<script>(window.RLQ=window.RLQ||[]).push(function(){mw.loader.load(["ext.fancytree","ext.suckerfish","mediawiki.toc","mediawiki.action.view.postEdit","site","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest","ext.SimpleTooltip"]);});</script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":260});});</script>
		</body>
		</html>
		