<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8"/>
<title>ImgLib1 (deprecated) - ImageJ</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"ImgLib1_(deprecated)","wgTitle":"ImgLib1 (deprecated)","wgCurRevisionId":32392,"wgRevisionId":32392,"wgArticleId":789,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["ImgLib","Citable"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"ImgLib1_(deprecated)","wgRelevantArticleId":789,"wgRequestId":"87ce3f24b881e025aedaf2a6","wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgPreferredVariant":"en","fancytree_path":"/extensions/TreeAndMenu/fancytree"});mw.loader.state({"site.styles":"ready","noscript":"ready","user.styles":"ready","user.cssprefs":"ready","user":"ready","user.options":"loading","user.tokens":"loading","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.sectionAnchor":"ready","skins.erudite":"ready"});mw.loader.implement("user.options@0j3lz3q",function($,jQuery,require,module){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens@1ku9xth",function ( $, jQuery, require, module ) {
mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});/*@nomin*/;

});mw.loader.load(["mediawiki.page.startup"]);});</script>
<link rel="stylesheet" href="erudite14.css"/>
<link rel="stylesheet" href="extensions/TreeAndMenu/fancytree/fancytree.css"/><link rel="stylesheet" href="extensions/TreeAndMenu/suckerfish/suckerfish.css"/>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="erudite15.css"/>
<meta name="generator" content="MediaWiki 1.28.0"/>
<meta name="description" content="Please note that the ImgLib, as well as other plugins available through Fiji, is based on a publication. If you use it successfully for your research please be so kind to cite our work:"/>
<link rel="shortcut icon" href="skins/ij2.ico"/>

<script type="text/javascript" src="extensions/SyntaxHighlighter/syntaxhighlighter/scripts/shCore.js"></script>
<script type="text/javascript" src="extensions/SyntaxHighlighter/syntaxhighlighter/scripts/shBrushJava.js"></script>
<script type="text/javascript">
SyntaxHighlighter.all();
</script>
<link rel="stylesheet" type="text/css" media="screen" href="extensions/SyntaxHighlighter/syntaxhighlighter/styles/shCoreMinit.css" />

	<meta property="og:type" content="article"/>

	<meta property="og:site_name" content="ImageJ"/>

	<meta property="og:title" content="ImgLib1 (deprecated)"/>

	<meta property="og:description" content="Please note that the ImgLib, as well as other plugins available through Fiji, is based on a publication. If you use it successfully for your research please be so kind to cite our work:"/>


<meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-ImgLib1_deprecated rootpage-ImgLib1_deprecated skin-erudite action-view">
		<div id="top-wrap" role="banner">
			<h1><a href="Welcome" title="ImageJ" rel="home">ImageJ</a></h1>
			<div id="tagline">From ImageJ</div>

			<a id="menubutton" href="ImgLib1.html#menu">Menu</a>
			<div id="nav" role="navigation">
			<ul id='menu'>
<li id="menu-item-n-About"><a href="ImageJ">About</a></li>
<li id="menu-item-n-Downloads"><a href="Downloads">Downloads</a></li>
<li id="menu-item-n-Learn"><a href="Learn">Learn</a></li>
<li id="menu-item-n-Develop"><a href="Development">Develop</a></li>
<li id="menu-item-n-News"><a href="News">News</a></li>
<li id="menu-item-n-Events"><a href="Events">Events</a></li>
<li id="menu-item-n-Help"><a href="Help">Help</a></li>
</ul>
			</div>
		</div>

		<div id="mw-js-message"></div>
		
		<div id="main" role="main">

			<div id="bodyContent">
				<div style="font-size: large; border: 1px solid black; padding: 1em; margin-bottom: 1em; text-align: center; background-color: #fda;">
					This is a read-only version of imagej.net, available during the transition to the new website, which you can preview <a href="https://imagej.github.io/">here</a>.
					<br>Please direct any questions or issues to <a href="https://forum.image.sc/t/imagej-wiki-is-down/39672">this Image.sc Forum thread</a>.
					<br>Thank you for your patience as we improve the website!
				</div>

				<h1>ImgLib1 (deprecated)</h1>
				
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><table class="infobox" cellspacing="5" style="max-width: 30em; font-size: 80%; text-align: left; float: right; border: 1px solid #a0a0a0;">
<tr>
<th colspan="2" style="text-align: center; font-size: 130%;"> <div style="float: left"></div>Legacy ImgLib1<div style="clear: left;"></div>
</th></tr>
<tr>
<th> Project
</th>
<td> Fiji
</td></tr>
<tr>
<th> URL
</th>
<td> <a rel="nofollow" class="external free" href="ImgLib1_(deprecated)">https://imagej.net/ImgLib1_(deprecated)</a>
</td></tr>
<tr>
<th> Source
</th>
<td> <a rel="nofollow" class="external text" href="https://github.com/fiji/legacy-imglib1/releases/tag/legacy-imglib1-1.1.8">on GitHub</a>
</td></tr>
<tr>
<th> License
</th>
<td> <a href="BSD-2" class="mw-redirect" title="BSD-2">BSD-2</a>, <a href="GPLv2" class="mw-redirect" title="GPLv2">GPLv2</a>
</td></tr>
<tr>
<th> Release
</th>
<td> <a rel="nofollow" class="external text" href="http://maven.imagej.net/index.html#nexus-search;gav~sc.fiji~legacy-imglib1~1.1.8~~~kw,versionexpand">1.1.8</a>
</td></tr>
<tr>
<th> Date
</th>
<td> Wed May 24 15:30:44 CDT 2017
</td></tr>
<tr>
<th> <a href="Development_status" class="mw-redirect" title="Development status">Development status</a>
</th>
<td> Stable
</td></tr>
<tr>
<th> <a href="Support_status" class="mw-redirect" title="Support status">Support status</a>
</th>
<td> None
</td></tr>
<tr>
<th colspan="2" style="background: lightgray; font-variant: small-caps; text-align: center"> <a href="Team" class="mw-redirect" title="Team">Team</a>
</th></tr>
<tr>
<th> <a href="Team" class="mw-redirect" title="Team">Founders</a>
</th>
<td> <a href="./User:StephanP" title="User:StephanP">Stephan Preibisch</a>, <a href="./User:Saalfeld" class="mw-redirect" title="User:Saalfeld">Stephan Saalfeld</a>
</td></tr>
<tr>
<th> <a href="Team" class="mw-redirect" title="Team">Leads</a>
</th>
<td> <a href="./User:StephanP" title="User:StephanP">Stephan Preibisch</a>, <a href="./User:Saalfeld" class="mw-redirect" title="User:Saalfeld">Stephan Saalfeld</a>
</td></tr>
<tr>
<th> <a href="Team" class="mw-redirect" title="Team">Developers</a>
</th>
<td> -
</td></tr>
<tr>
<th> <a href="Team" class="mw-redirect" title="Team">Debuggers</a>
</th>
<td> -
</td></tr>
<tr>
<th> <a href="Team" class="mw-redirect" title="Team">Reviewers</a>
</th>
<td> -
</td></tr>
<tr>
<th> <a href="Team" class="mw-redirect" title="Team">Support</a>
</th>
<td> -
</td></tr>
<tr>
<th> <a href="Team" class="mw-redirect" title="Team">Maintainers</a>
</th>
<td> <a href="./User:StephanP" title="User:StephanP">Stephan Preibisch</a>, <a href="./User:Saalfeld" class="mw-redirect" title="User:Saalfeld">Stephan Saalfeld</a>, <a href="./User:Rueden" title="User:Rueden">Curtis Rueden</a>
</td></tr>

<tr>
<th> <a href="Team" class="mw-redirect" title="Team">Contributors</a>
</th>
<td> <a href="./User:Albertcardona" title="User:Albertcardona">Albert Cardona</a>, <a href="./User:Bdezonia" title="User:Bdezonia">Barry DeZonia</a>, <a href="./User:Funke" title="User:Funke">Jan Funke</a>, <a href="./User:Hinerm" title="User:Hinerm">Mark Hiner</a>, Steffen Jaensch, <a href="./User:Leek" title="User:Leek">Lee Kamentsky</a>, <a href="./User:Lindsey" title="User:Lindsey">Larry Lindsey</a>, <a href="./User:Mark" title="User:Mark">Mark Longair</a>, <a href="./User:NicholasPerry" title="User:NicholasPerry">Nick Perry</a>, <a href="./User:Pietzsch" title="User:Pietzsch">Tobias Pietzsch</a>, <a href="./User:Schindelin" title="User:Schindelin">Johannes Schindelin</a>
</td></tr>
</table><div class="project-info">
<span class="project-logo"><a href="Fiji" title="Fiji"><img class="simple-tooltip simple-tooltip-img" data-simple-tooltip="This page describes content which is part of the Fiji distribution of ImageJ. Click the logo for details." src="_images/a/ae/Fiji-icon.png"></img></a></span></div>
<div style="overflow:hidden"><table class="metadata plainlinks ambox ambox-content">
<tr>
<td class="ambox-image">
<p><a href="./File:Important-sign.png" class="image"><img alt="Important-sign.png" src="_images/f/f0/Important-sign.png" width="40" height="40" /></a>
</p>
</td>
<td> <b>DEPRECATION NOTICE:</b><br />This page describes ImgLib1, the previous incarnation of the <a href="ImgLib2" title="ImgLib2">ImgLib2</a> library. We encourage developers to use ImgLib2 instead, and <a href="How_To_Migrate_Code_From_ImgLib_To_ImgLib2" title="How To Migrate Code From ImgLib To ImgLib2">migrate existing ImgLib1 programs to ImgLib2</a> as soon as possible. </td>
<p><br />
</p>
</tr>
</table></div>
<p><br />
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="ImgLib1.html#Citation"><span class="tocnumber">1</span> <span class="toctext">Citation</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="ImgLib1.html#Introduction"><span class="tocnumber">2</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="ImgLib1.html#Vocabulary"><span class="tocnumber">3</span> <span class="toctext">Vocabulary</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="ImgLib1.html#Core_ideas_of_the_architecture"><span class="tocnumber">4</span> <span class="toctext">Core ideas of the architecture</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="ImgLib1.html#Example"><span class="tocnumber">5</span> <span class="toctext">Example</span></a>
<ul>
<li class="toclevel-2 tocsection-6"><a href="ImgLib1.html#Using_imglib"><span class="tocnumber">5.1</span> <span class="toctext">Using  <i>imglib</i></span></a></li>
<li class="toclevel-2 tocsection-7"><a href="ImgLib1.html#Using_ImageJ"><span class="tocnumber">5.2</span> <span class="toctext">Using ImageJ</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-8"><a href="ImgLib1.html#Tutorials_and_howtos"><span class="tocnumber">6</span> <span class="toctext">Tutorials and howtos</span></a></li>
</ul>
</div>

<h1><span class="mw-headline" id="Citation">Citation</span></h1>
<p>Please note that the ImgLib, as well as other plugins available through Fiji, is based on a publication. If you use it successfully for your research please be so kind to cite our work:
</p>
<ul><li> S. Preibisch, P. Tomancak, S. Saalfeld (2010) "Into ImgLib – Generic Image Processing in Java", <i>ImageJ User and Developer Conference 2010</i> (1):72-76. <a rel="nofollow" class="external text" href="http://imagejconf.tudor.lu/program/workshops/preibisch/start">Webpage</a> <a rel="nofollow" class="external text" href="http://fly.mpi-cbg.de/preibisch/pubs/imagejpaper2010.pdf">PDF</a></li></ul>
<h1><span class="mw-headline" id="Introduction">Introduction</span></h1>
<p>In ImageJ, images can have a number of types (<i>8-bit gray</i>, <i>8-bit with lookup table</i>, <i>16-bit</i>, <i>32-bit floating point</i>, <i>RGB packed into a 32-bit int</i>), and up to 5 dimensions. Internally, every image is stored as an array of <i>channels * slices * frames</i> instances of the class <i>ImageProcessor</i>, which in turn stores the pixel values as arrays of <i>width * height</i> values which have the native types <i>byte</i>, <i>short</i>, etc
</p><p>When implementing an image processing algorithm, typically this has to be done with every native type separately, for performance reasons, and for the same reason, there is a lot of code repeated between different plugins.
</p><p>In C++, this problem is solved by using <i>templates</i>, e.g. in the <a rel="nofollow" class="external text" href="http://www.itk.org/">ITK library</a>. The idea is to implement the algorithm generically, i.e. independent of data type.
</p><p>The corresponding technique in Java is called <i>generics</i> and is available since Java version 1.5. Due to technical issues, Java cannot optimize specializations of generics fully at compile-time, and generics have other limitations, such as not being able to use basic types (which are used for ImageJ's pixel values) as parameters.
</p><p>In <i>imglib</i>, these issues have been addressed, in a way compatible with Java.
</p><p><br />
</p>
<h1><span class="mw-headline" id="Vocabulary">Vocabulary</span></h1>
<p><b>Type</b>: The Type class wraps a value, in the same way that the java.lang Integer, Double, Float, etc. wrap a value. The value is not necessarily a primitive (like int, short, long, char, float, double ...) but can be a complex number, base pair, boolean, label, and other non-numerical types.
</p><p><b>Outside Strategy</b>: The OutsideStrategy is a method to handle values when requested at a position beyond the boundaries of the image. Typical outside strategies may be to return a constant value, or to mirror the values of the image.
</p>
<h1><span class="mw-headline" id="Core_ideas_of_the_architecture">Core ideas of the architecture</span></h1>
<p>Since basic types cannot be passed as parameters to Java generics, and operators cannot be overloaded, all values must be accessed via <i>Type</i> instances. <i>Type</i> is the base interface for all data types handled by imglib. If you need a new data type to be handled, just make a new class implementing the <i>Type</i> interface. There is a convenient abstract class "TypeImpl" that provides default implementations for some common methods.
</p><p>To access pixel values, <i>imglib</i> provides <i>Cursor</i> classes. The simplest <i>Cursor</i> just iterates over all pixels of the image. This cursor is guaranteed to traverse the pixels in an optimal fashion, regardless of the way the pixels are stored in memory. There are other cursors, implementing the <i>Localizable</i> interface, which report their position. The most specific cursor is the <i>LocalizableByDimCursor</i>, which allows to set the position to a specified one.
</p><p>Especially for large images, which become more and more prevalent, it is interesting to have different storage strategies. Plain ImageJ provides only one storage strategy: every XY slice of a (possibly 5-dimensional) stack is stored as a one-dimensional basic type array which is a linearized version of the 2-dimensional slice (i.e. each pixel is addressed using an index which is calculated as <i>x + y * width</i>).
</p><p>In addition to adapters wrapping ImageJ's ImagePlus, <i>imglib</i> currently supports two container types: a container wrapping an image as a linearized array of a basic type (available in the <i>mpicbg.imglib.array</i> package) and a container wrapping the image as so-called <i>cells</i>, which are sort of n-dimensional "tiles" (in 3D, would be a cube). The latter container is available in the package <i>mpicbg.imglib.container.cell</i> and has the advantage to be "pageable", i.e. not the complete image has to be loaded into memory at the same time, allowing for images larger than the available RAM. This is comparable, but more powerful, than ImageJ's VirtualStack concept.
</p>
<h1><span class="mw-headline" id="Example">Example</span></h1>
<p>Let's look at a simple function multiplying every pixel value with a given constant.
</p>
<h3><span class="mw-headline" id="Using_imglib">Using  <i>imglib</i></span></h3>
<p>No matter what kind of image (a single image, a stack, a 4D stack, with one color channel or three...), the algorithm is  implemented cleanly and clearly:
</p>
<pre class="brush:java">
public &lt;T extends NumericType&lt;T&gt;&gt; void mul( Image&lt;T&gt; input, T factor )
{
        for ( final T value&#160;: input )
          value.mul( factor );
}
</pre>
<h3><span class="mw-headline" id="Using_ImageJ">Using ImageJ</span></h3>
<p>In plain ImageJ, the same function looks like the following. Notice how we have to litter the code with special cases, and we have to know before hand the number of channels, slices, and pixels per slice. We even need a helper function to simplify operations a bit!
</p>
<pre class="brush:java">
 final static public void multiply( final ImagePlus input, final double factor )
 {
         final int nPixels = input.getWidth() * input.getHeight();
         
         // iterate through all channels, frames and timepoints (might be just one)
         for ( int c = 1; c &lt;= input.getNChannels(); ++c )
                 for ( int z = 1; z &lt;= input.getNSlices(); ++z )
                         for ( int t = 1; t &lt;= input.getNFrames(); ++t )
                         {
                                 input.setPosition( c, z, t );
                                 final ImageProcessor ip = input.getChannelProcessor();
                                 
                                 // RGB images are special
                                 if ( input.getType() == ImagePlus.COLOR_RGB )
                                 {
                                         for ( int i = 0; i &lt; nPixels; ++i )
                                         {
                                                 final int rgb = ip.get( i );
                                                 final int r = doubleTo8Bit( Math.round( ( (
                                                         rgb &gt;&gt; 16 ) &amp; 0xff ) * factor ) );
                                                 final int g = doubleTo8Bit( Math.round( ( (
                                                         rgb &gt;&gt; 8 ) &amp; 0xff ) * factor ) );
                                                 final int b = doubleTo8Bit( Math.round( (
                                                         rgb &amp; 0xff ) * factor ) );
                                                 ip.set( i, ( r &lt;&lt; 16 ) | ( g &lt;&lt; 8 ) | b );
                                         }
                                 }
                                 else
                                 {
                                         for ( int i = 0; i &lt; nPixels; ++i )
                                         {
                                                 ip.setf( i, ip.getf( i ) * ( float )factor );
                                         }
                                 }
                         }
 }
 
 final static int doubleTo8Bit( final double value ) {
         return Math.max( 0, Math.min( 255, (int) value ) );
 }
</pre>
<p>The performance is better in the <i>ImgLib</i> version, as there is no need for two type conversions in every iteration: the Type instance implements the native operation <i>mul()</i>, and since the implementation is labeled using the Java keyword <i>final</i>, it will be inlined and optimized pretty quickly by Java's Just-In-Time compiler. Furthermore it will work on any ComplexType (even for example real numbers) that are available or will be implemented in the future.
</p>
<h1><span class="mw-headline" id="Tutorials_and_howtos">Tutorials and howtos</span></h1>
<ul><li> <a href="Using_Imglib_in_a_plugin" class="mw-redirect" title="Using Imglib in a plugin">Using Imglib in a plugin</a></li>
<li> <a href="./Imglib:_iterating_through_pixel_data" class="mw-redirect" title="Imglib: iterating through pixel data">Imglib: iterating through pixel data</a></li>
<li> <a href="Imglib_FAQ" class="mw-redirect" title="Imglib FAQ">Imglib FAQ</a></li>
<li> <a href="Developing_Imglib" class="mw-redirect" title="Developing Imglib">Developing Imglib</a></li></ul>

<!-- 
NewPP limit report
Cached time: 20200713072606
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.140 seconds
Real time usage: 0.144 seconds
Preprocessor visited node count: 4067/1000000
Preprocessor generated node count: 4984/1000000
Post‐expand include size: 7798/2097152 bytes
Template argument size: 2497/2097152 bytes
Highest expansion depth: 12/40
Expensive parser function count: 0/3
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%  108.340      1 - -total
 96.22%  104.249      1 - Template:ComponentStats:sc.fiji:legacy-imglib1
 94.59%  102.482      1 - Template:Component
 80.29%   86.983     17 - Template:Person
  3.69%    4.001      1 - Template:ImgLib1_Deprecation_Notice
  2.29%    2.480      1 - Template:Warning
  1.72%    1.859      1 - Template:GitHub
  1.53%    1.660      1 - Template:Ambox
  1.35%    1.462      1 - Template:Project
  1.15%    1.251      1 - Template:Maven
-->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="index.php?title=ImgLib1_(deprecated)&amp;oldid=32392">http://imagej.net/index.php?title=ImgLib1_(deprecated)&amp;oldid=32392</a>"</div>
							</div>

			<div id="footer">
				<p> This page was last modified on 2 June 2017, at 22:07.</p><ul><li><a href="./ImageJ:Privacy_policy" title="ImageJ:Privacy policy">Privacy policy</a></li><li><a href="./ImageJ:About" class="mw-redirect" title="ImageJ:About">About ImageJ</a></li><li><a href="Imprint" title="Imprint">Imprint</a></li></ul>			</div>

			<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="./Special:Categories" title="Special:Categories">Categories</a>: <ul><li><a href="./Category:ImgLib" title="Category:ImgLib">ImgLib</a></li><li><a href="./Category:Citable" title="Category:Citable">Citable</a></li></ul></div></div>		</div>

		<div id="bottom-wrap">
			<div id="footer-wrap-inner">
				<div id="ternary" class="footer">
					<ul>
						<li class="widget">
							<img id="logo" src="skins/imagej-128.png" alt="">
						</li>
					</ul>
				</div>
			</div>
		</div>
		<script>(window.RLQ=window.RLQ||[]).push(function(){mw.loader.load(["ext.fancytree","ext.suckerfish","mediawiki.toc","mediawiki.action.view.postEdit","site","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest","ext.SimpleTooltip"]);});</script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":295});});</script>
		</body>
		</html>
		