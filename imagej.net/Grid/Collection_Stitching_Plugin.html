<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8"/>
<title>Grid/Collection Stitching Plugin - ImageJ</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Grid/Collection_Stitching_Plugin","wgTitle":"Grid/Collection Stitching Plugin","wgCurRevisionId":21069,"wgRevisionId":21069,"wgArticleId":2030,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Registration","Stitching"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Grid/Collection_Stitching_Plugin","wgRelevantArticleId":2030,"wgRequestId":"2f6b6f27de1c32bf2da08999","wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgPreferredVariant":"en","fancytree_path":"/extensions/TreeAndMenu/fancytree"});mw.loader.state({"site.styles":"ready","noscript":"ready","user.styles":"ready","user.cssprefs":"ready","user":"ready","user.options":"loading","user.tokens":"loading","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.sectionAnchor":"ready","skins.erudite":"ready"});mw.loader.implement("user.options@0j3lz3q",function($,jQuery,require,module){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens@1ku9xth",function ( $, jQuery, require, module ) {
mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});/*@nomin*/;

});mw.loader.load(["mediawiki.page.startup"]);});</script>
<link rel="stylesheet" href="../load.php%3Fdebug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%252Cshared%257Cmediawiki.sectionAnchor%257Cskins.erudite&amp;only=styles&amp;skin=erudite.css"/>
<link rel="stylesheet" href="../extensions/TreeAndMenu/fancytree/fancytree.css"/><link rel="stylesheet" href="../extensions/TreeAndMenu/suckerfish/suckerfish.css"/>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="../load.php%3Fdebug=false&amp;lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=erudite.css"/>
<meta name="generator" content="MediaWiki 1.28.0"/>
<meta name="description" content="When a large biological specimen must be pictured in high resolution, it must be done in tiles as the entire thing could not fit into the field view of the microscope. Once the entire specimen has been imaged, the tiles must be fit or stitched together to form one coherent image. Some overlap will be present between each tile and its neighbors to verify its location in the image."/>
<link rel="shortcut icon" href="../skins/ij2.ico"/>
	<meta property="og:type" content="article"/>

	<meta property="og:site_name" content="ImageJ"/>

	<meta property="og:title" content="Grid/Collection Stitching Plugin"/>

	<meta property="og:description" content="When a large biological specimen must be pictured in high resolution, it must be done in tiles as the entire thing could not fit into the field view of the microscope. Once the entire specimen has been imaged, the tiles must be fit or stitched together to form one coherent image. Some overlap will be present between each tile and its neighbors to verify its location in the image."/>


<meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Grid_Collection_Stitching_Plugin rootpage-Grid_Collection_Stitching_Plugin skin-erudite action-view">
		<div id="top-wrap" role="banner">
			<h1><a href="Welcome" title="ImageJ" rel="home">ImageJ</a></h1>
			<div id="tagline">From ImageJ</div>

			<a id="menubutton" href="Collection_Stitching_Plugin.html#menu">Menu</a>
			<div id="nav" role="navigation">
			<ul id='menu'>
<li id="menu-item-n-About"><a href="ImageJ">About</a></li>
<li id="menu-item-n-Downloads"><a href="Downloads">Downloads</a></li>
<li id="menu-item-n-Learn"><a href="Learn">Learn</a></li>
<li id="menu-item-n-Develop"><a href="Development">Develop</a></li>
<li id="menu-item-n-News"><a href="News">News</a></li>
<li id="menu-item-n-Events"><a href="Events">Events</a></li>
<li id="menu-item-n-Help"><a href="Help">Help</a></li>
</ul>
			</div>
		</div>

		<div id="mw-js-message"></div>
		
		<div id="main" role="main">

			<div id="bodyContent">
				<h1>Grid/Collection Stitching Plugin</h1>
				
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><table class="infobox" cellspacing="5" style="max-width: 31em; font-size: 90%; text-align: left; float: right; border: 1px solid #a0a0a0;">
<tr>
<th colspan="2" style="text-align: center; font-size: 130%;"> <div style="float: left"></div>Stitching (ImageJ)<div style="clear: left;"></div>
</th></tr>
<tr>
<th> Author
</th>
<td> Stephan Preibisch
</td></tr>




<tr>
<th> Maintainer
</th>
<td> Stephan Preibisch<br />Mark Hiner<br />Curtis Rueden
</td></tr>

<tr>
<th> File
</th>
<td> Stitching_.jar
</td></tr>
<tr>
<th> Source
</th>
<td> <a rel="nofollow" class="external text" href="https://github.com/fiji/Stitching/blob/master/src/main/java/plugin/Stitching_Grid.java">on GitHub</a>
</td></tr>
<tr>
<th> Initial release
</th>
<td> October 2008
</td></tr>

<tr>
<th> Development status
</th>
<td> active
</td></tr>
<tr>
<th> Category
</th>
<td> <a href="Category:Stitching" title="Category:Stitching">Stitching</a>
</td></tr>
<tr>
<th> Website
</th>
<td> <a rel="nofollow" class="external text" href="http://fly.mpi-cbg.de/~preibisch">Stephan Preibisch's homepage</a>
</td></tr>
</table>
<div style=""><div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="Collection_Stitching_Plugin.html#What_is_Grid.2FCollection_Stitching.3F"><span class="tocnumber">1</span> <span class="toctext">What is Grid/Collection Stitching?</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="Collection_Stitching_Plugin.html#How_to_use_the_Grid.2FCollection_Stitching_plugin"><span class="tocnumber">2</span> <span class="toctext">How to use the Grid/Collection Stitching plugin</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="Collection_Stitching_Plugin.html#Troubleshooting_with_the_Grid.2FCollection_Stitching_plugin"><span class="tocnumber">3</span> <span class="toctext">Troubleshooting with the Grid/Collection Stitching plugin</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="Collection_Stitching_Plugin.html#Inversion_of_Coordinates"><span class="tocnumber">3.1</span> <span class="toctext">Inversion of Coordinates</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="Collection_Stitching_Plugin.html#Speed"><span class="tocnumber">3.2</span> <span class="toctext">Speed</span></a>
<ul>
<li class="toclevel-3 tocsection-6"><a href="Collection_Stitching_Plugin.html#Memory_Allocation"><span class="tocnumber">3.2.1</span> <span class="toctext">Memory Allocation</span></a></li>
<li class="toclevel-3 tocsection-7"><a href="Collection_Stitching_Plugin.html#Image_Dimensions"><span class="tocnumber">3.2.2</span> <span class="toctext">Image Dimensions</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-8"><a href="Collection_Stitching_Plugin.html#Memory"><span class="tocnumber">3.3</span> <span class="toctext">Memory</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-9"><a href="Collection_Stitching_Plugin.html#Other_Pitfalls"><span class="tocnumber">4</span> <span class="toctext">Other Pitfalls</span></a></li>
</ul>
</div>
</div>
<h1><span class="mw-headline" id="What_is_Grid.2FCollection_Stitching.3F">What is Grid/Collection Stitching?</span></h1>
<p>When a large biological specimen must be pictured in high resolution, it must be done in tiles as the entire thing could not fit into the field view of the microscope. Once the entire specimen has been imaged, the tiles must be fit or stitched together to form one coherent image. Some overlap will be present between each tile and its neighbors to verify its location in the image.
</p><p>The Grid/Collection stitching plugin allows several tiles placed in varying dimensions to be stitched together. 
</p><p>To learn more about Stitching, please read the <a href="Stitching" class="mw-redirect" title="Stitching">Stitching</a> section of <a href="Techniques" class="mw-redirect" title="Techniques">Techniques</a>. 
</p><p><br />
</p>
<h1><span class="mw-headline" id="How_to_use_the_Grid.2FCollection_Stitching_plugin">How to use the Grid/Collection Stitching plugin</span></h1>
<ul><li>Launch the stitching plugin from the menu item <span><em><span style="border-bottom:1px dotted #ccc;"> Plugins </span>&#160;&#8250; <span style="border-bottom:1px dotted #ccc;"> Stitching </span>&#160;&#8250; <span style="border-bottom:1px dotted #ccc;"> Grid/Collection stitching</span></em></span>
<ul><li>Launch the stitching plugin from the menu item <span><em><span style="border-bottom:1px dotted #ccc;"> Plugins </span>&#160;&#8250; <span style="border-bottom:1px dotted #ccc;"> Stitching </span>&#160;&#8250; <span style="border-bottom:1px dotted #ccc;"> Grid/Collection stitching</span></em></span></li></ul></li>
<li>In the plugin's graphical user interface (GUI), choose the position type as Positions from file from the first dropbox menu. Then choose the order as Defined by image metadata. With this choice, the images within your file do not need to be in any particular order. Click ok. </li>
<li>When a second GUI appears, select a file from your dataset. 
<ul><li>If Prairie was used for data collection, ensure that the file selected is a .xml or .cfg</li></ul></li>
<li>Select a fusion method.
<ul><li>Linear blending will obscure the seams between tiles, but will take a longer amount of time. Without it, tile lines will be clearly seen if the image is to be blown up. To save time, only use linear blending for presentation pieces. 
<ul><li>To learn about other fusion methods, please visit the <a href="Image_Stitching#Pairwise_Stitching" title="Image Stitching">Stitching</a> page. </li></ul></li></ul></li>
<li>if Prairie or Wiscan are used, uncheck “compute overlap.” Both softwares calculate fairly accurate coordinates beforehand. </li>
<li>Reduce “Increase overlap” to 0 and uncheck subpixel accuracy</li>
<li>If the data computed is too large for computer memory, check “use virtual memory.” This will be considerably slower, but will save RAM
<ul><li>Alternatively, <a href="Grid/Collection_Stitching_Plugin#Memory_Allocation" title="Grid/Collection Stitching Plugin">more memory can be allocated</a> to the Fiji operation </li></ul></li>
<li>Click ok and the images will begin to be stitched together.</li></ul>
<h1><span class="mw-headline" id="Troubleshooting_with_the_Grid.2FCollection_Stitching_plugin">Troubleshooting with the Grid/Collection Stitching plugin</span></h1>
<h2><span class="mw-headline" id="Inversion_of_Coordinates">Inversion of Coordinates</span></h2>
<p>Certain data sets have caused an inversion of coordinates when stitched together. The plugin is unable to discern the inversion without human intervention. After stitching, if the output image appears incorrect, redo the stitch. Depending on which axis the image has been inverted upon(the user will need to know this) select the corresponding option within the second dialog box. This will invert the selected coordinates before stitching the image create the correct image. 
</p>
<h2><span class="mw-headline" id="Speed">Speed</span></h2>
<h3><span class="mw-headline" id="Memory_Allocation">Memory Allocation</span></h3>
<p>If "use virtual memory" has been selected but the stitching plugin is still taking a considerable amount of time, try allocating more memory to the process. 
</p>
<ul><li>Open Memory from the menu item <span><em><span style="border-bottom:1px dotted #ccc;"> Edit </span>&#160;&#8250; <span style="border-bottom:1px dotted #ccc;"> Options </span>&#160;&#8250; <span style="border-bottom:1px dotted #ccc;"> Memory &amp; Threads</span></em></span></li>
<li>Enter the amount of memory you would like to be allocated to the Fiji application in megabytes
<ul><li>Check the amount of installed RAM on your computer to ensure you do not try to allocate more memory than exists.</li></ul></li></ul>
<h3><span class="mw-headline" id="Image_Dimensions">Image Dimensions</span></h3>
<p>Another speed reduction will occur if the tiles used have varying z coordinates. This will cause the stitching program to include tiles of black space wherever a tile has a z coordinate less than the maximum z coordinate within the file. To check if this could be a problem with your dataset, use the menu title to access <span><em><span style="border-bottom:1px dotted #ccc;"> Plugins </span>&#160;&#8250; <span style="border-bottom:1px dotted #ccc;"> Stitching </span>&#160;&#8250; <span style="border-bottom:1px dotted #ccc;"> Visualize Tiles</span></em></span>. If the computed image does NOT show up as one large square with a patchwork of squares, your data set has varying z-values. To alleviate the slower speeds, select "ignore Z position" within the second GUI.
</p>
<div class="thumb tright"><div class="thumbinner" style="width:252px;"><a href="File:Out_of_memory.png" class="image"><img alt="" src="../../_images/d/d9/Out_of_memory.png" width="250" height="101" class="thumbimage" /></a>  <div class="thumbcaption"><div class="magnify"><a href="File:Out_of_memory.png" class="internal" title="Enlarge"></a></div>Out of memory error message.</div></div></div>
<h2><span class="mw-headline" id="Memory">Memory</span></h2>
<p>Even using virtual memory with maximum memory allocation can still be too much for some computers to handle, especially given the size of larger image files. The limited amount of memory available to most computers means that during the stitching of a large image file, the plugin will be trying to store more pixels within memory than there is space for. When this event occurs, Fiji will either stall and need to be
force closed, or will display the message "&lt;Out of Memory&gt;." To fix this issue, select "Downsampling" in the Stitching GUI to allow for the image to be stitched in pieces. Please see the <a href="Downsample" title="Downsample">Downsampling</a> page for more information. 
</p>
<div class="thumb tright"><div class="thumbinner" style="width:252px;"><a href="File:Z_variance.png" class="image"><img alt="" src="../../_images/7/72/Z_variance.png" width="250" height="232" class="thumbimage" /></a>  <div class="thumbcaption"><div class="magnify"><a href="File:Z_variance.png" class="internal" title="Enlarge"></a></div>Example of a dataset with z-variance.</div></div></div>
<h1><span class="mw-headline" id="Other_Pitfalls">Other Pitfalls</span></h1>
<p>Please see the <a href="Image_Stitching" title="Image Stitching">Image Stitching</a> page for other precautions.
</p>
<!-- 
NewPP limit report
Cached time: 20200714212551
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.044 seconds
Real time usage: 0.045 seconds
Preprocessor visited node count: 417/1000000
Preprocessor generated node count: 1687/1000000
Post‐expand include size: 3437/2097152 bytes
Template argument size: 1020/2097152 bytes
Highest expansion depth: 6/40
Expensive parser function count: 0/3
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%   15.700      1 - -total
 55.23%    8.671      4 - Template:Bc
 34.52%    5.419      1 - Template:Infobox
 17.91%    2.812      8 - Template:Arrow
  9.04%    1.420      1 - Template:GitHub
  6.90%    1.084      1 - Template:TOC
-->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="index.php?title=Grid/Collection_Stitching_Plugin&amp;oldid=21069">http://imagej.net/index.php?title=Grid/Collection_Stitching_Plugin&amp;oldid=21069</a>"</div>
							</div>

			<div id="footer">
				<p> This page was last modified on 9 July 2016, at 10:25.</p><ul><li><a href="ImageJ:Privacy_policy" title="ImageJ:Privacy policy">Privacy policy</a></li><li><a href="ImageJ:About" class="mw-redirect" title="ImageJ:About">About ImageJ</a></li><li><a href="Imprint" title="Imprint">Imprint</a></li></ul>			</div>

			<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="Special:Categories" title="Special:Categories">Categories</a>: <ul><li><a href="Category:Registration" title="Category:Registration">Registration</a></li><li><a href="Category:Stitching" title="Category:Stitching">Stitching</a></li></ul></div></div>		</div>

		<div id="bottom-wrap">
		</div>
		<script>(window.RLQ=window.RLQ||[]).push(function(){mw.loader.load(["ext.fancytree","ext.suckerfish","mediawiki.toc","mediawiki.action.view.postEdit","site","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest","ext.SimpleTooltip"]);});</script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":243});});</script>
		</body>
		</html>
		