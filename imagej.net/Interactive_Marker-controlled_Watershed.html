<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8"/>
<title>Interactive Marker-controlled Watershed - ImageJ</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Interactive_Marker-controlled_Watershed","wgTitle":"Interactive Marker-controlled Watershed","wgCurRevisionId":40509,"wgRevisionId":40509,"wgArticleId":10129,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Plugins","Segmentation","Mathematical morphology"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Interactive_Marker-controlled_Watershed","wgRelevantArticleId":10129,"wgRequestId":"4592c25381ba70604a63a0e6","wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgPreferredVariant":"en","fancytree_path":"/extensions/TreeAndMenu/fancytree"});mw.loader.state({"site.styles":"ready","noscript":"ready","user.styles":"ready","user.cssprefs":"ready","user":"ready","user.options":"loading","user.tokens":"loading","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.sectionAnchor":"ready","skins.erudite":"ready"});mw.loader.implement("user.options@0j3lz3q",function($,jQuery,require,module){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens@1ku9xth",function ( $, jQuery, require, module ) {
mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});/*@nomin*/;

});mw.loader.load(["mediawiki.page.startup"]);});</script>
<link rel="stylesheet" href="erudite14.css"/>
<link rel="stylesheet" href="extensions/TreeAndMenu/fancytree/fancytree.css"/><link rel="stylesheet" href="extensions/TreeAndMenu/suckerfish/suckerfish.css"/>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="erudite15.css"/>
<meta name="generator" content="MediaWiki 1.28.0"/>
<meta name="description" content="Interactive Marker-controlled Watershed runs on any open grayscale image, single 2D image or (3D) stack. If no image is open when calling the plugin, an Open dialog will pop up."/>
<link rel="shortcut icon" href="skins/ij2.ico"/>
	<meta property="og:type" content="article"/>

	<meta property="og:site_name" content="ImageJ"/>

	<meta property="og:title" content="Interactive Marker-controlled Watershed"/>

	<meta property="og:description" content="Interactive Marker-controlled Watershed runs on any open grayscale image, single 2D image or (3D) stack. If no image is open when calling the plugin, an Open dialog will pop up."/>


<meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Interactive_Marker-controlled_Watershed rootpage-Interactive_Marker-controlled_Watershed skin-erudite action-view">
		<div id="top-wrap" role="banner">
			<h1><a href="Welcome" title="ImageJ" rel="home">ImageJ</a></h1>
			<div id="tagline">From ImageJ</div>

			<a id="menubutton" href="Interactive_Marker-controlled_Watershed.html#menu">Menu</a>
			<div id="nav" role="navigation">
			<ul id='menu'>
<li id="menu-item-n-About"><a href="ImageJ">About</a></li>
<li id="menu-item-n-Downloads"><a href="Downloads">Downloads</a></li>
<li id="menu-item-n-Learn"><a href="Learn">Learn</a></li>
<li id="menu-item-n-Develop"><a href="Development">Develop</a></li>
<li id="menu-item-n-News"><a href="News">News</a></li>
<li id="menu-item-n-Events"><a href="Events">Events</a></li>
<li id="menu-item-n-Help"><a href="Help">Help</a></li>
</ul>
			</div>
		</div>

		<div id="mw-js-message"></div>
		
		<div id="main" role="main">

			<div id="bodyContent">
				<div style="font-size: large; border: 1px solid black; padding: 1em; margin-bottom: 1em; text-align: center; background-color: #fda;">
					This is a read-only version of imagej.net, available during the transition to a new site.
					<br>Please direct any questions or issues to <a href="https://forum.image.sc/t/imagej-wiki-is-down/39672">this Image.sc Forum thread</a>.
					<br>Thank you for your patience as we improve the website!
				</div>

				<h1>Interactive Marker-controlled Watershed</h1>
				
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><table class="infobox" cellspacing="5" style="max-width: 31em; font-size: 90%; text-align: left; float: right; border: 1px solid #a0a0a0;">
<tr>
<th colspan="2" style="text-align: center; font-size: 130%;"> <div style="float: left"></div>Interactive Marker-controlled Watershed (IJPB-plugins)<div style="clear: left;"></div>
</th></tr>
<tr>
<th> Author
</th>
<td> <a href="./User:Iarganda" title="User:Iarganda">Ignacio Arganda-Carreras</a>, David Legland
</td></tr>




<tr>
<th> Maintainer
</th>
<td> <a href="./User:Iarganda" title="User:Iarganda">Ignacio Arganda-Carreras</a>
</td></tr>


<tr>
<th> Source
</th>
<td> <a rel="nofollow" class="external text" href="https://github.com/ijpb/ijpb-plugins/">on GitHub</a>
</td></tr>
<tr>
<th> Initial release
</th>
<td> September 9<sup>th</sup>, 2017
</td></tr>
<tr>
<th> Latest version
</th>
<td> July 23<sup>rd</sup>, 2019 (<a href="MorphoLibJ" title="MorphoLibJ">MorphoLibJ</a> v1.4.1)
</td></tr>
<tr>
<th> Development status
</th>
<td> stable, active
</td></tr>
<tr>
<th> Category
</th>
<td> <a href="./Category:Segmentation" title="Category:Segmentation">Segmentation</a>, <a href="./Category:Mathematical_morphology" title="Category:Mathematical morphology">Mathematical morphology</a>
</td></tr>

</table>
<p><br />
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="Interactive_Marker-controlled_Watershed.html#Introduction"><span class="tocnumber">1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="Interactive_Marker-controlled_Watershed.html#Usage"><span class="tocnumber">2</span> <span class="toctext">Usage</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="Interactive_Marker-controlled_Watershed.html#Interactive_markers"><span class="tocnumber">2.1</span> <span class="toctext">Interactive markers</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="Interactive_Marker-controlled_Watershed.html#Watershed_Segmentation_panel"><span class="tocnumber">2.2</span> <span class="toctext">Watershed Segmentation panel</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="Interactive_Marker-controlled_Watershed.html#Results_panel"><span class="tocnumber">2.3</span> <span class="toctext">Results panel</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="Interactive_Marker-controlled_Watershed.html#Post-processing_panel"><span class="tocnumber">2.4</span> <span class="toctext">Post-processing panel</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-7"><a href="Interactive_Marker-controlled_Watershed.html#Installation"><span class="tocnumber">3</span> <span class="toctext">Installation</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="Interactive_Marker-controlled_Watershed.html#References"><span class="tocnumber">4</span> <span class="toctext">References</span></a></li>
<li class="toclevel-1 tocsection-9"><a href="Interactive_Marker-controlled_Watershed.html#See_also"><span class="tocnumber">5</span> <span class="toctext">See also</span></a></li>
<li class="toclevel-1 tocsection-10"><a href="Interactive_Marker-controlled_Watershed.html#License"><span class="tocnumber">6</span> <span class="toctext">License</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Introduction">Introduction</span></h2>
<div class="floatright"><a href="./File:Interactive-Marker-controlled-Watershed-plugin-overview.png" class="image"><img alt="Interactive-Marker-controlled-Watershed-plugin-overview.png" src="_images/b/b9/Interactive-Marker-controlled-Watershed-plugin-overview.png" width="400" height="312" /></a></div> Similar to the <a href="Marker-controlled_Watershed" title="Marker-controlled Watershed">Marker-controlled Watershed</a> plugin, this ImageJ/Fiji plugin segments grayscale images of any type (8, 16 and 32-bit) in 2D and 3D using the marker-controlled watershed algorithm by Meyer and Beucher (1990) and it floods the image from specific seed points, <b>but this time the points are introduced interactively by the user</b>.
<h2><span class="mw-headline" id="Usage">Usage</span></h2>
<p>Interactive Marker-controlled Watershed runs on any open grayscale image, single 2D image or (3D) stack. If no image is open when calling the plugin, an Open dialog will pop up.
</p><p>The user can pan, zoom in and out, or scroll between slices (if the input image is a stack) in the main canvas as if it were any other ImageJ window. On the left side of the canvas there are three panels of parameters, one with the watershed parameters, one for the output (result) options and one for post-processing the result. All buttons, checkboxes and panels contain a short explanation of their functionality that is displayed when the cursor lingers over them.
</p>
<h3><span class="mw-headline" id="Interactive_markers">Interactive markers</span></h3>
<p>In this plugin the markers are introduced interactively by the user using any of the selection tools. By default, the point selection tool will be enabled in the main ImageJ toolbar. To select markers on different slices, one option is to use the point selection tool and keep the SHIFT key pressed each time you click to set a new marker. Another possibility is to use the ROI Manager. In that case, all selected ROIs in the manager will be used as markers
</p>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:772px;"><a href="./File:Interactive-Marker-controlled-Watershed-markers.png" class="image"><img alt="" src="_images/2/23/Interactive-Marker-controlled-Watershed-markers.png" width="770" height="265" class="thumbimage" /></a>  <div class="thumbcaption"><div class="magnify"><a href="./File:Interactive-Marker-controlled-Watershed-markers.png" class="internal" title="Enlarge"></a></div>Examples of ROIs used as markers by the plugin.</div></div></div></div>
<h3><span class="mw-headline" id="Watershed_Segmentation_panel">Watershed Segmentation panel</span></h3>
<div class="thumb tright"><div class="thumbinner" style="width:252px;"><a href="./File:Interactive-Marker-controlled-Watershed-WS-panel.png" class="image"><img alt="" src="_images/1/16/Interactive-Marker-controlled-Watershed-WS-panel.png" width="250" height="154" class="thumbimage" /></a>  <div class="thumbcaption"><div class="magnify"><a href="./File:Interactive-Marker-controlled-Watershed-WS-panel.png" class="internal" title="Enlarge"></a></div>Watershed panel.</div></div></div>This panel is reserved to the parameters involved in the segmentation pipeline:
<ul><li> <b>Calculate dams</b>: un-check this option to produce segmentations without watershed lines. </li>
<li> <b>Connectivity</b>: voxel connectivity (4-8 in 2D, and 6-26 in 3D). Selecting non-diagonal connectivity (4 or 6) usually provides more rounded objects. </li></ul>
<p><b>Finally, click on “Run” to launch the segmentation</b>. If your segmentation is taking too long or you want to stop it for any reason, you can do so by clicking on the same button (which should read “STOP” during that process).
</p>
<h3><span class="mw-headline" id="Results_panel">Results panel</span></h3>
<div class="thumb tright"><div class="thumbinner" style="width:252px;"><a href="./File:Morphological-segmentation-results-panel.png" class="image"><img alt="" src="_images/a/ad/Morphological-segmentation-results-panel.png" width="250" height="136" class="thumbimage" /></a>  <div class="thumbcaption"><div class="magnify"><a href="./File:Morphological-segmentation-results-panel.png" class="internal" title="Enlarge"></a></div>Results panel.</div></div></div>Only enabled after running the segmentation.
<ul><li> <b>Display</b>: list of options to display the segmentation results.
<ul><li> <b>Overlaid basins</b>: colored objects overlaying the input image (with or without dams depending on the selected option in the Watershed Segmentation panel).</li>
<li> <b>Overlaid dams</b>: overlay the watershed dams in red on top of the input image (only works if “Calculate dams” is checked).</li>
<li> <b>Catchment basins</b>: colored objects.</li>
<li> <b>Watershed lines</b>: binary image showing the watershed lines in black and the objects in white (only works if “Calculate dams” is checked).</li></ul></li>
<li> <b>Show result overlay</b>: toggle result overlay.</li>
<li> <b>Create image button</b>: create a new image with the results displayed in the canvas.</li></ul>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:772px;"><a href="./File:Morphological-segmentation-result-examples.png" class="image"><img alt="" src="_images/c/c1/Morphological-segmentation-result-examples.png" width="770" height="194" class="thumbimage" /></a>  <div class="thumbcaption"><div class="magnify"><a href="./File:Morphological-segmentation-result-examples.png" class="internal" title="Enlarge"></a></div>Examples of the 4 different display options.</div></div></div></div>
<h3><span class="mw-headline" id="Post-processing_panel">Post-processing panel</span></h3>
<div class="thumb tright"><div class="thumbinner" style="width:252px;"><a href="./File:Morphological-segmentation-post-processing-panel.png" class="image"><img alt="" src="_images/b/b2/Morphological-segmentation-post-processing-panel.png" width="250" height="97" class="thumbimage" /></a>  <div class="thumbcaption"><div class="magnify"><a href="./File:Morphological-segmentation-post-processing-panel.png" class="internal" title="Enlarge"></a></div>Post-processing panel.</div></div></div>Similarly to the Results panel, this panel only gets enabled after running the segmentation pipeline.
<ul><li> <b>Merge labels</b>: merge together labels selected by either the <b>“freehand” selection too</b>l (on a single slice) <b>or the point tool</b> (on single or multiple slices). The zero-value label belongs to the watershed dams, therefore it will ignored in case of being selected. The first selected label value will be assigned to the rest of selected labels, which will share its color.</li></ul>
<dl><dd> <b><span style="color:#f80000">Note</span></b>: to select labels on different slices, use the point selection tool and keep the SHIFT key pressed each time you click on a new label.</dd></dl>
<ul><li> <b>Shuffle colors</b>: randomly re-assign colors to the labels. This is a very handy option whenever two adjacent labels present a similar color.</li></ul>
<p><br />
</p>
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p>The Marker-controlled Watershed plugin is part of the <a href="MorphoLibJ" title="MorphoLibJ">MorphoLibJ</a> library. To install it, you just need to <a href="How_to_follow_a_3rd_party_update_site#Add_update_sites" class="mw-redirect" title="How to follow a 3rd party update site"> add</a> the IJPB-plugins update site:
</p><p>1) Select <span><em><span style="border-bottom:1px dotted #ccc;"> Help </span>&#160;&#8250; <span style="border-bottom:1px dotted #ccc;"> Update...</span></em></span> from the Fiji menu to start the updater.
</p><p>2) Click on <i>Manage update sites</i>. This brings up a dialog where you can activate additional update sites.
</p><p>3) Activate the IJPB-plugins update site and close the dialog. Now you should see an additional jar file for download.
</p><p>4) Click <i>Apply changes</i> and restart Fiji.
</p><p>You should now find the plugin under the sub-menu <span><em><span style="border-bottom:1px dotted #ccc;"> Plugins </span>&#160;&#8250; <span style="border-bottom:1px dotted #ccc;"> MorphoLibJ </span>&#160;&#8250; <span style="border-bottom:1px dotted #ccc;"> Segmentation</span></em></span>.
</p><p><b>Note</b>: Marker-controlled Watershed is only one of the plugins included in the <a href="MorphoLibJ" title="MorphoLibJ">MorphoLibJ</a> suite. By following these installation steps, you will be installing as well the rest of plugins in the suite.
</p>
<h2><span class="mw-headline" id="References">References</span></h2>
<ol><li> Fernand Meyer and Serge Beucher. "Morphological segmentation." Journal of visual communication and image representation 1.1 (1990): 21-46.</li>
<li> Soille, P., "Morphological Image Analysis: Principles and Applications", Springer-Verlag, 1999, pp. 170-171.</li>
<li> David Legland, Ignacio Arganda-Carreras, Philippe Andrey; <a rel="nofollow" class="external text" href="http://bioinformatics.oxfordjournals.org/content/early/2016/07/19/bioinformatics.btw413">MorphoLibJ: integrated library and plugins for mathematical morphology with ImageJ</a>. Bioinformatics 2016; 32 (22): 3532-3534. doi: 10.1093/bioinformatics/btw413</li></ol>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul><li> <a href="Morphological_Segmentation" title="Morphological Segmentation">Morphological Segmentation</a>, a plugin with a graphical user interface to segment 2D/3D images based on morphological operations and the watershed algorithm.</li>
<li> <a href="Classic_Watershed" title="Classic Watershed">Classic Watershed</a>, plugin implementing the original watershed algorithm to segment 2D/3D grayscale images.</li>
<li> <a rel="nofollow" class="external text" href="http://cmm.ensmp.fr/~beucher/wtshed.html">Serge Beucher's site</a>, with graphic descriptions and animations of the watershed algorithms.</li>
<li> <a rel="nofollow" class="external text" href="http://www.esiee.fr/~info/tw/index.html">G. Bertrand's Topological Watershed site</a>, with papers, lecture slides and source code.</li></ul>
<h2><span class="mw-headline" id="License">License</span></h2>
<p>This program is <b>free software</b>; you can redistribute it and/or modify it under the terms of the <b>GNU General Public License</b> as published by the Free Software Foundation (<a rel="nofollow" class="external free" href="http://www.gnu.org/licenses/gpl.txt">http://www.gnu.org/licenses/gpl.txt</a>).
</p><p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details.
</p>
<!-- 
NewPP limit report
Cached time: 20200713072729
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.052 seconds
Real time usage: 0.055 seconds
Preprocessor visited node count: 392/1000000
Preprocessor generated node count: 4506/1000000
Post‐expand include size: 2374/2097152 bytes
Template argument size: 919/2097152 bytes
Highest expansion depth: 10/40
Expensive parser function count: 0/3
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%   19.531      1 - -total
 74.55%   14.560      1 - Template:Infobox
 48.73%    9.518      2 - Template:Person
 24.19%    4.725      2 - Template:Bc
  8.69%    1.698      1 - Template:GitHub
  7.51%    1.466      3 - Template:Arrow
-->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="index.php?title=Interactive_Marker-controlled_Watershed&amp;oldid=40509">http://imagej.net/index.php?title=Interactive_Marker-controlled_Watershed&amp;oldid=40509</a>"</div>
							</div>

			<div id="footer">
				<p> This page was last modified on 4 September 2019, at 02:48.</p><ul><li><a href="./ImageJ:Privacy_policy" title="ImageJ:Privacy policy">Privacy policy</a></li><li><a href="./ImageJ:About" class="mw-redirect" title="ImageJ:About">About ImageJ</a></li><li><a href="Imprint" title="Imprint">Imprint</a></li></ul>			</div>

			<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="./Special:Categories" title="Special:Categories">Categories</a>: <ul><li><a href="./Category:Plugins" title="Category:Plugins">Plugins</a></li><li><a href="./Category:Segmentation" title="Category:Segmentation">Segmentation</a></li><li><a href="./Category:Mathematical_morphology" title="Category:Mathematical morphology">Mathematical morphology</a></li></ul></div></div>		</div>

		<div id="bottom-wrap">
			<div id="footer-wrap-inner">
				<div id="ternary" class="footer">
					<ul>
						<li class="widget">
							<img id="logo" src="skins/imagej-128.png" alt="">
						</li>
					</ul>
				</div>
			</div>
		</div>
		<script>(window.RLQ=window.RLQ||[]).push(function(){mw.loader.load(["ext.fancytree","ext.suckerfish","mediawiki.toc","mediawiki.action.view.postEdit","site","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest","ext.SimpleTooltip"]);});</script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":248});});</script>
		</body>
		</html>
		