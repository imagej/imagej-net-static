<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8"/>
<title>OpenMPI Plugin Extensions - ImageJ</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"OpenMPI_Plugin_Extensions","wgTitle":"OpenMPI Plugin Extensions","wgCurRevisionId":45842,"wgRevisionId":45842,"wgArticleId":12759,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"OpenMPI_Plugin_Extensions","wgRelevantArticleId":12759,"wgRequestId":"722a890b8dbc9c354e6f1a9d","wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgPreferredVariant":"en","fancytree_path":"/extensions/TreeAndMenu/fancytree"});mw.loader.state({"site.styles":"ready","noscript":"ready","user.styles":"ready","user.cssprefs":"ready","user":"ready","user.options":"loading","user.tokens":"loading","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.sectionAnchor":"ready","skins.erudite":"ready"});mw.loader.implement("user.options@0j3lz3q",function($,jQuery,require,module){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens@1ku9xth",function ( $, jQuery, require, module ) {
mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});/*@nomin*/;

});mw.loader.load(["mediawiki.page.startup"]);});</script>
<link rel="stylesheet" href="load.php%3Fdebug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%252Cshared%257Cmediawiki.sectionAnchor%257Cskins.erudite&amp;only=styles&amp;skin=erudite.css"/>
<script async="" src="load.php%3Fdebug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=erudite"></script>
<link rel="stylesheet" href="extensions/TreeAndMenu/fancytree/fancytree.css"/><link rel="stylesheet" href="extensions/TreeAndMenu/suckerfish/suckerfish.css"/>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="load.php%3Fdebug=false&amp;lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=erudite.css"/>
<meta name="generator" content="MediaWiki 1.28.0"/>
<meta name="description" content="OpenMPI, despite being relatively old, still remains the most dominant programming model used in high-performance computing (HPC). As of today Fiji supports the GPU parallelization through CLIJ and allows executing automated HPC workflows by means of Automated_workflow_for_parallel_Multiview_Reconstruction. However, there are still no genuine internally parallel plugins developed specifically for deployment on large scale parallel machines like HPC clusters or supercomputers. This is a preliminary OpenMPI framework for Fiji and model parallel implementations of the most common image processing operations included in ImageJ."/>
<link rel="shortcut icon" href="skins/ij2.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="opensearch_desc.php" title="ImageJ (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="api.php?action=rsd"/>
<link rel="alternate" type="application/atom+xml" title="ImageJ Atom feed" href="index.php?title=Special:RecentChanges&amp;feed=atom"/>

<script type="text/javascript" src="extensions/SyntaxHighlighter/syntaxhighlighter/scripts/shCore.js"></script>
<script type="text/javascript" src="extensions/SyntaxHighlighter/syntaxhighlighter/scripts/shBrushPython.js"></script>
<script type="text/javascript" src="extensions/SyntaxHighlighter/syntaxhighlighter/scripts/shBrushPlain.js"></script>
<script type="text/javascript">
SyntaxHighlighter.all();
</script>
<link rel="stylesheet" type="text/css" media="screen" href="extensions/SyntaxHighlighter/syntaxhighlighter/styles/shCoreMinit.css" />

	<meta property="og:type" content="article"/>

	<meta property="og:site_name" content="ImageJ"/>

	<meta property="og:title" content="OpenMPI Plugin Extensions"/>

	<meta property="og:description" content="OpenMPI, despite being relatively old, still remains the most dominant programming model used in high-performance computing (HPC). As of today Fiji supports the GPU parallelization through CLIJ and allows executing automated HPC workflows by means of Automated_workflow_for_parallel_Multiview_Reconstruction. However, there are still no genuine internally parallel plugins developed specifically for deployment on large scale parallel machines like HPC clusters or supercomputers. This is a preliminary OpenMPI framework for Fiji and model parallel implementations of the most common image processing operations included in ImageJ."/>


<meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-OpenMPI_Plugin_Extensions rootpage-OpenMPI_Plugin_Extensions skin-erudite action-view">
		<div class="mw-jump">
			<a href="OpenMPI_Plugin_Extensions.html#bodyContent">Skip to content</a>, 			<a href="OpenMPI_Plugin_Extensions.html#search">Skip to search</a>
		</div>

		<div id="top-wrap" role="banner">
			<h1><a href="Welcome" title="ImageJ" rel="home">ImageJ</a></h1>
			<div id="tagline">From ImageJ</div>

			<a id="menubutton" href="OpenMPI_Plugin_Extensions.html#menu">Menu</a>
			<div id="nav" role="navigation">
			<ul id='menu'>
<li id="menu-item-n-About"><a href="ImageJ">About</a></li>
<li id="menu-item-n-Downloads"><a href="Downloads">Downloads</a></li>
<li id="menu-item-n-Learn"><a href="Learn">Learn</a></li>
<li id="menu-item-n-Develop"><a href="Development">Develop</a></li>
<li id="menu-item-n-News"><a href="News">News</a></li>
<li id="menu-item-n-Events"><a href="Events">Events</a></li>
<li id="menu-item-n-Help"><a href="Help">Help</a></li>
</ul>
			</div>
		</div>

		<div id="mw-js-message"></div>
		
		<div id="main" role="main">
			<div id="nav-meta">
			<span id="ca-nstab-main" class="selected"><a href="OpenMPI_Plugin_Extensions" title="View the content page [c]" accesskey="c">Page</a></span><span class="meta-sep">|</span><span id="ca-talk" class="new"><a href="index.php?title=Talk:OpenMPI_Plugin_Extensions&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page [t]" accesskey="t">Discussion</a></span><span class="meta-sep">|</span><span id="ca-viewsource"><a href="index.php?title=OpenMPI_Plugin_Extensions&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span><span class="meta-sep">|</span><span id="ca-history"><a href="index.php?title=OpenMPI_Plugin_Extensions&amp;action=history" title="Past revisions of this page [h]" accesskey="h">History</a></span><span class="meta-sep">|</span>			</div>

			<div id="bodyContent">
				<h1>OpenMPI Plugin Extensions</h1>
				
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><table class="infobox" cellspacing="5" style="max-width: 31em; font-size: 90%; text-align: left; float: right; border: 1px solid #a0a0a0;">
<tr>
<th colspan="2" style="text-align: center; font-size: 130%;"> <div style="float: left"></div>OpenMPI Plugin Extensions (Fiji)<div style="clear: left;"></div>
</th></tr>
<tr>
<th> Author
</th>
<td> Daniel Trnka, Michal Krumnikl
</td></tr>




<tr>
<th> Maintainer
</th>
<td> Michal Krumnikl
</td></tr>


<tr>
<th> Source
</th>
<td> <a rel="nofollow" class="external text" href="https://github.com/fiji-hpc/scijava-parallel-mpi">on github</a>
</td></tr>
<tr>
<th> Initial release
</th>
<td> TBD
</td></tr>
<tr>
<th> Latest version
</th>
<td> TBD
</td></tr>

<tr>
<th> Category
</th>
<td> TBD
</td></tr>

</table>
<p><br />
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="OpenMPI_Plugin_Extensions.html#General_information"><span class="tocnumber">1</span> <span class="toctext">General information</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="OpenMPI_Plugin_Extensions.html#Motivation"><span class="tocnumber">1.1</span> <span class="toctext">Motivation</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="OpenMPI_Plugin_Extensions.html#Extensions_Description"><span class="tocnumber">1.2</span> <span class="toctext">Extensions Description</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-4"><a href="OpenMPI_Plugin_Extensions.html#Installation"><span class="tocnumber">2</span> <span class="toctext">Installation</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="OpenMPI_Plugin_Extensions.html#How_to_use"><span class="tocnumber">3</span> <span class="toctext">How to use</span></a>
<ul>
<li class="toclevel-2 tocsection-6"><a href="OpenMPI_Plugin_Extensions.html#Debugging"><span class="tocnumber">3.1</span> <span class="toctext">Debugging</span></a></li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="General_information">General information</span></h2>
<h3><span class="mw-headline" id="Motivation">Motivation</span></h3>
<p>OpenMPI, despite being relatively old, still remains the most dominant programming model used in high-performance computing (HPC). As of today Fiji supports the GPU parallelization through <a href="CLIJ" title="CLIJ">CLIJ</a> and allows executing automated HPC workflows by means of <a href="Automated_workflow_for_parallel_Multiview_Reconstruction" title="Automated workflow for parallel Multiview Reconstruction">Automated_workflow_for_parallel_Multiview_Reconstruction</a>. However, there are still no genuine internally parallel plugins developed specifically for deployment on large scale parallel machines like HPC clusters or supercomputers. This is a preliminary OpenMPI framework for Fiji and model parallel implementations of the most common image processing operations included in ImageJ.
</p>
<h3><span class="mw-headline" id="Extensions_Description">Extensions Description</span></h3>
<p>This presents a set of Ops adapted to herein presented OpenMPI wrapper, jointly comprising a solution designed to be seamlessly used in any existing ImageJ2 code. Moreover, framework automatically initializes and disposes connections to the OpenMPI environment, making available OpenMPI implementations for the most frequent operations covered by Ops. The package contains example implementations for fundamental image processing functions as well as basic math, logical and statistics operations.
</p><p><br />
</p>
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p>TBD
</p>
<h2><span class="mw-headline" id="How_to_use">How to use</span></h2>
<p>In order to demonstrate convenience of this approach, we prepared an example of   parallelized convolution. We used Python for readers' convenience, however plugins can be invoked from any other scripting language supported by Fiji.  
</p>
<pre class="brush:python">
kernel = ops.run("create.img", [3, 3], FloatType())
for p in kernel:
 p.set(1.0/kernel.size())

def fn():
 output = ops.create().img(input)
 ops.filter().convolve(output, Views.extendMirrorSingle(input), kernel)
 return output

input = scifio.datasetIO().open(input_path)
output = Measure.benchmark(fn, rounds)
scifio.datasetIO().save(output, output_path)
</pre>
<p>The Listing shows the OpenMPI implementation with initialization of a 3×3 blur kernel (lines 1-3), definition of a processing function with convolution (it reuses already existing implementation of a convolution filter in ImageJ2) on lines 5-8 and finally its execution in the benchmark mode to measure execution times (the variable rounds defines the number of repetitions).
</p><p>Noticeably, using the OpenMPI extension does not add any extra layer as long as data are available in a form of IterableInterval.
</p>
<h3><span class="mw-headline" id="Debugging">Debugging</span></h3>
<p>Debugging printouts on the console shows the node allocation and dataset division. The following listing shows the dataset divided to 6 nodes.
</p>
<pre class="brush:plain">
Fri Jun 19 08:36:49 2020[1,2]&lt;stdout&gt;:Chunk{data=test.tif, offset=13334, len=6667, chunks=1}
Fri Jun 19 08:36:49 2020[1,0]&lt;stdout&gt;:Chunk{data=test.tif, offset=0, len=6667, chunks=1}
Fri Jun 19 08:36:49 2020[1,5]&lt;stdout&gt;:Chunk{data=test.tif, offset=33335, len=6665, chunks=1}
Fri Jun 19 08:36:49 2020[1,1]&lt;stdout&gt;:Chunk{data=test.tif, offset=6667, len=6667, chunks=1}
Fri Jun 19 08:36:49 2020[1,4]&lt;stdout&gt;:Chunk{data=test.tif, offset=26668, len=6667, chunks=1}
Fri Jun 19 08:36:49 2020[1,3]&lt;stdout&gt;:Chunk{data=test.tif, offset=20001, len=6667, chunks=1}
</pre>

<!-- 
NewPP limit report
Cached time: 20200713073055
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.012 seconds
Real time usage: 0.012 seconds
Preprocessor visited node count: 103/1000000
Preprocessor generated node count: 591/1000000
Post‐expand include size: 733/2097152 bytes
Template argument size: 240/2097152 bytes
Highest expansion depth: 3/40
Expensive parser function count: 0/3
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%    3.652      1 - Template:Infobox
100.00%    3.652      1 - -total
-->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="index.php?title=OpenMPI_Plugin_Extensions&amp;oldid=45842">http://imagej.net/index.php?title=OpenMPI_Plugin_Extensions&amp;oldid=45842</a>"</div>
							</div>

			<div id="footer">
				<p> This page was last modified on 29 June 2020, at 07:25.</p><ul><li><a href="ImageJ:Privacy_policy" title="ImageJ:Privacy policy">Privacy policy</a></li><li><a href="ImageJ:About" class="mw-redirect" title="ImageJ:About">About ImageJ</a></li><li><a href="Imprint" title="Imprint">Imprint</a></li><li><a href="index.php?title=OpenMPI_Plugin_Extensions&amp;mobileaction=toggle_view_mobile" class="noprint stopMobileRedirectToggle">Mobile view</a></li></ul>			</div>

			<div id="catlinks" class="catlinks catlinks-allhidden" data-mw="interface"></div>		</div>

		<div id="bottom-wrap">
		</div>
		<script>(window.RLQ=window.RLQ||[]).push(function(){mw.loader.load(["ext.fancytree","ext.suckerfish","mediawiki.toc","mediawiki.action.view.postEdit","site","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest","ext.SimpleTooltip"]);});</script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":151});});</script>
		</body>
		</html>
		