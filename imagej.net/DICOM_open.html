<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8"/>
<title>DICOM open - ImageJ</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"DICOM_open","wgTitle":"DICOM open","wgCurRevisionId":44879,"wgRevisionId":44879,"wgArticleId":12368,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Import-Export","Plugins"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"DICOM_open","wgRelevantArticleId":12368,"wgRequestId":"7f65c2cb4dc83ba85b8a24be","wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgPreferredVariant":"en","fancytree_path":"/extensions/TreeAndMenu/fancytree"});mw.loader.state({"site.styles":"ready","noscript":"ready","user.styles":"ready","user.cssprefs":"ready","user":"ready","user.options":"loading","user.tokens":"loading","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.sectionAnchor":"ready","skins.erudite":"ready"});mw.loader.implement("user.options@0j3lz3q",function($,jQuery,require,module){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens@1ku9xth",function ( $, jQuery, require, module ) {
mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});/*@nomin*/;

});mw.loader.load(["mediawiki.page.startup"]);});</script>
<link rel="stylesheet" href="../load.php%3Fdebug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%252Cshared%257Cmediawiki.sectionAnchor%257Cskins.erudite&amp;only=styles&amp;skin=erudite.css"/>
<script async="" src="../load.php%3Fdebug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=erudite"></script>
<link rel="stylesheet" href="../extensions/TreeAndMenu/fancytree/fancytree.css"/><link rel="stylesheet" href="../extensions/TreeAndMenu/suckerfish/suckerfish.css"/>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="../load.php%3Fdebug=false&amp;lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=erudite.css"/>
<meta name="generator" content="MediaWiki 1.28.0"/>
<meta name="description" content="The DICOM_open plugin provides additional functionality on top of the DICOM plugin.  There were three main impetuses for developing this plugin, first was to be able to search the DICOM files for a series to open, second was to open the series and get at the actual voxel data, and, third was to properly arrange the images in a hyperstack."/>
<link rel="shortcut icon" href="../skins/ij2.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="opensearch_desc.php" title="ImageJ (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="api.php?action=rsd"/>
<link rel="alternate" type="application/atom+xml" title="ImageJ Atom feed" href="index.php?title=Special:RecentChanges&amp;feed=atom"/>
	<meta property="og:type" content="article"/>

	<meta property="og:site_name" content="ImageJ"/>

	<meta property="og:title" content="DICOM open"/>

	<meta property="og:description" content="The DICOM_open plugin provides additional functionality on top of the DICOM plugin.  There were three main impetuses for developing this plugin, first was to be able to search the DICOM files for a series to open, second was to open the series and get at the actual voxel data, and, third was to properly arrange the images in a hyperstack."/>

	<meta property="og:url" content="http://imagej.net/DICOM_open"/>

<meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-DICOM_open rootpage-DICOM_open skin-erudite action-view">
		<div class="mw-jump">
			<a href="DICOM_open.html#bodyContent">Skip to content</a>, 			<a href="DICOM_open.html#search">Skip to search</a>
		</div>

		<div id="top-wrap" role="banner">
			<h1><a href="Welcome" title="ImageJ" rel="home">ImageJ</a></h1>
			<div id="tagline">From ImageJ</div>

			<a id="menubutton" href="DICOM_open.html#menu">Menu</a>
			<div id="nav" role="navigation">
			<ul id='menu'>
<li id="menu-item-n-About"><a href="ImageJ">About</a></li>
<li id="menu-item-n-Downloads"><a href="Downloads">Downloads</a></li>
<li id="menu-item-n-Learn"><a href="Learn">Learn</a></li>
<li id="menu-item-n-Develop"><a href="Development">Develop</a></li>
<li id="menu-item-n-News"><a href="News">News</a></li>
<li id="menu-item-n-Events"><a href="Events">Events</a></li>
<li id="menu-item-n-Help"><a href="Help">Help</a></li>
</ul>
			</div>
		</div>

		<div id="mw-js-message"></div>
		
		<div id="main" role="main">
			<div id="nav-meta">
			<span id="ca-nstab-main" class="selected"><a href="DICOM_open" title="View the content page [c]" accesskey="c">Page</a></span><span class="meta-sep">|</span><span id="ca-talk" class="new"><a href="index.php?title=Talk:DICOM_open&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page [t]" accesskey="t">Discussion</a></span><span class="meta-sep">|</span><span id="ca-viewsource"><a href="index.php?title=DICOM_open&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span><span class="meta-sep">|</span><span id="ca-history"><a href="index.php?title=DICOM_open&amp;action=history" title="Past revisions of this page [h]" accesskey="h">History</a></span><span class="meta-sep">|</span>			</div>

			<div id="bodyContent">
				<h1>DICOM open</h1>
				
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><table class="infobox" cellspacing="5" style="max-width: 31em; font-size: 90%; text-align: left; float: right; border: 1px solid #a0a0a0;">
<tr>
<th colspan="2" style="text-align: center; font-size: 130%;"> <div style="float: left"></div>DICOM_open (ImageJ1)<div style="clear: left;"></div>
</th></tr>
<tr>
<th> Author
</th>
<td> Fred Damen
</td></tr>




<tr>
<th> Maintainer
</th>
<td>
</td></tr>

<tr>
<th> File
</th>
<td> DICOM_open.jar
</td></tr>
<tr>
<th> Source
</th>
<td> <a rel="nofollow" class="external text" href="_images/5/56/DICOM_open.zip">DICOM_open.zip</a>
</td></tr>
<tr>
<th> Initial release
</th>
<td> 1 April 2019
</td></tr>

<tr>
<th> Development status
</th>
<td> stable
</td></tr>
<tr>
<th> Category
</th>
<td> <a href="Category:Import-Export" title="Category:Import-Export">Import-Export‏‎</a>
</td></tr>

</table>
<p><br />
</p><p>The DICOM_open plugin provides additional functionality on top of the DICOM plugin.  There were three main impetuses for developing this plugin, first was to be able to search the DICOM files for a series to open, second was to open the series and get at the actual voxel data, and, third was to properly arrange the images in a hyperstack.  
</p><p>DICOM datasets, that I generally come across, are stored in a hierarchical directory structure in which the directory names do not enlighten the content.  The DICOM files are database entries, and the parameters within hold the clues to which datasets may be desired.  This plugin's GUI provides an interactive interface to find the series of interest to open.  For dealing with a single hodgepodge directory of DICOM files, see included DICOM_explode plugin.
</p><p>MRI DICOM dataset's voxel data tends to be stored as 16 bit unsigned integers, i.e., magnitude data, albeit, the tags within the DICOM files say they are signed.  ImageJ does not support signed 16 bit image data.  For some reason, they add 32768 to the dataset voxel values and store them in unsigned 16 bit integer ShortProcessor(s); confusing to say the least.  This plugin provides the means to access the voxel data as someone who deals with MRI data would expect.
</p><p>The DICOM datasets that I open in ImageJ, contain multiple volumes, where each volume was acquired under slightly different conditions, e.g., multi b-value diffusion.  DICOM_explode plugin can sort a DICOM dataset into a top down properly sorted hyperstack, suitable for processing see F_Project plugin.
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="DICOM_open.html#Features"><span class="tocnumber">1</span> <span class="toctext">Features</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="DICOM_open.html#Methods"><span class="tocnumber">2</span> <span class="toctext">Methods</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="DICOM_open.html#Install"><span class="tocnumber">3</span> <span class="toctext">Install</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="DICOM_open.html#Licence"><span class="tocnumber">4</span> <span class="toctext">Licence</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="DICOM_open.html#ChangeLog"><span class="tocnumber">5</span> <span class="toctext">ChangeLog</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="DICOM_open.html#Known_Bugs"><span class="tocnumber">6</span> <span class="toctext">Known Bugs</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Features">Features</span></h2>
<div class="MediaTransformError" style="width: 455px; height: 0px; display:inline-block;">Error creating thumbnail: Unable to save thumbnail to destination</div>
<p>When run as a plugin the plugin will first present a directory browser to select the parent directory of where to start the DICOM dataset search, and then, present this GUI.  At the top is the directory of the currently selected item.The second line presents a Pulldown to select an item under the currently selected item.  Select an item to display information about the item below the Pulldown.  The 'Load Series' button at the bottom is only available when the current item is a series.  
</p><p>If the DICOM series is a multi b-value diffusion dataset then use the Pulldown to select the appropriate type "Trace", "R/L", "A/P", "S/I"; DTI is not supported. Supported vendors (0008,0070) are "GE MEDICAL SYSTEMS" and "SIEMENS". Otherwise, if the DICOM series was acquired whilst varying a DICOM tag value, enter the DICOM tag and a variable name to be used in the slice's short label. Neither of these fields are required.
</p><p>The <b>Float</b> format causes the voxel values to be the same as in the DICOM dataset, albeit, in 32-bit FloatProcessor format.  The <b>Scaled</b> format causes the FloatProcessor values to be scaled according to the linear rescale (0028,1053) and intercept (0028,1052).  The <b>16-bit fixed</b> format causes the FloatProcessor values to be directly converted to short(s) and placed in a ShortProcessor, (i.e., Java: (short)floatvalue; not: (ShortProcessor)FloatProcessorValue, n.b., the (ShortProcessor) conversion rescales).  The <b>16-bit broken</b> format is as the DICOM plugin imported.
</p>
<h2><span class="mw-headline" id="Methods">Methods</span></h2>
<p><code>public static boolean isDICOM(File file)</code>
<br />Does the file have the proper magic number ("DICM").
</p><p><br /><code>public static TreeMap&lt;String,String&gt; parseDICOM(ImagePlus imp, int s)</code>
<br />Return the DICOM tag/value mappings in easy to use format.  The slice <i>s</i> is as returned by <i>ImagePlus.getStackIndex</i>.
</p><p><br /><code>public static ImagePlus openDICOMFloat(File dfs)</code>
<br /><code>public static ImagePlus openDICOMFloat(File[] dfs)</code>
<br /><code>public static ImagePlus openDICOMScaled(File dfs)</code>
<br /><code>public static ImagePlus openDICOMScaled(File[] dfs)</code>
<br /><code>public static ImagePlus openDICOMShort(File dfs)</code>
<br /><code>public static ImagePlus openDICOMShort(File[] dfs)</code>
<br /><code>public static ImagePlus openDICOM(File dfs, String format)</code>
<br /><code>public static ImagePlus openDICOM(File[] dfs, String format)</code>
<br />These methods open a DICOM dataset.  All but the last one are convenience methods that call the last one.  The DICOM dataset is not yet sorted.  With <i>File dfs</i>, <i>dfs</i> can be either the parent directory of the DICOM files or a single DICOM file.  For <i>File[] dfs</i>, <i>dfs</i> should be an array of DICOM files.
</p><p><br /><code>public static ImagePlus openDICOMDiff(File dfs, String format, String reqdirstr)</code>
<br />Opens a multi b-value diffusion dataset, whilst ignoring the spacial directions that are not <i>reqdirstr</i>.  <i>reqdirstr</i> is one of "Trace","R/L","A/P","S/I".
</p><p><br /><code>public static ImagePlus volumeDICOM(ImagePlus imp)</code>
<br />Sorts the DICOM <i>imp</i> assuming there is only one volume.
</p><p><br /><code>public static ImagePlus arrayDICOM(ImagePlus imp, String tag, String var)</code>
<br />Sorts DICOM <i>imp</i> into a hyperstack assuming <i>imp</i> was collected by varying the DICOM <i>tag</i> property.  The string <i>var</i> is used in conjunction with the DICOM <i>tag'</i>s value to set each slice's label.
</p><p><br /><code>public static ImagePlus[] diffusionDICOM(ImagePlus imp) throws Exception</code>
<br />Sorts a multi b-value diffusion dataset into a array of 4 hyperstacks, one array element for each of "Trace","R/L","A/P","S/I".  Only the array elements that existed in imp are filled in.
</p><p><br /><code>public static double[]  getArray(ImagePlus imp, int s, String tag)</code>
<br /><code>public static double getDouble(ImagePlus imp, int s, String tag)</code>
<br /><code>public static int getInt(ImagePlus imp, int s, String tag)</code>
<br /><code>public static String getTagValue(ImagePlus imp, int s, String tag)</code>
<br /><code>public static String getTagLine(ImagePlus imp, int s, String tag)</code>
Convenience methods to access DICOM tag values for a slice s. The slice <i>s</i> is as returned by <i>ImagePlus.getStackIndex</i>.
</p>
<h2><span class="mw-headline" id="Install">Install</span></h2>
<p>Unzip <a rel="nofollow" class="external text" href="_images/5/56/DICOM_open.zip">DICOM_open.zip</a> into ImageJ1 plugins (File&gt;Show Folder&gt;Plugins) or plugins/jars directories.  Source code in jar file. DICOM_explode is included.
</p>
<h2><span class="mw-headline" id="Licence">Licence</span></h2>
<p>GPL distribution licence.
</p>
<h2><span class="mw-headline" id="ChangeLog">ChangeLog</span></h2>
<p>1 April 2019 Initial version.
</p>
<h2><span class="mw-headline" id="Known_Bugs">Known Bugs</span></h2>
<p>Let me know.
</p>
<!-- 
NewPP limit report
Cached time: 20200713064934
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.028 seconds
Real time usage: 0.029 seconds
Preprocessor visited node count: 97/1000000
Preprocessor generated node count: 563/1000000
Post‐expand include size: 860/2097152 bytes
Template argument size: 333/2097152 bytes
Highest expansion depth: 3/40
Expensive parser function count: 0/3
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%    3.749      1 - Template:Infobox
100.00%    3.749      1 - -total
-->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="index.php?title=DICOM_open&amp;oldid=44879">http://imagej.net/index.php?title=DICOM_open&amp;oldid=44879</a>"</div>
							</div>

			<div id="footer">
				<p> This page was last modified on 10 April 2020, at 22:43.</p><ul><li><a href="ImageJ:Privacy_policy" title="ImageJ:Privacy policy">Privacy policy</a></li><li><a href="ImageJ:About" class="mw-redirect" title="ImageJ:About">About ImageJ</a></li><li><a href="Imprint" title="Imprint">Imprint</a></li><li><a href="index.php?title=DICOM_open&amp;mobileaction=toggle_view_mobile" class="noprint stopMobileRedirectToggle">Mobile view</a></li></ul>			</div>

			<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="Special:Categories" title="Special:Categories">Categories</a>: <ul><li><a href="Category:Import-Export" title="Category:Import-Export">Import-Export</a></li><li><a href="Category:Plugins" title="Category:Plugins">Plugins</a></li></ul></div></div>		</div>

		<div id="bottom-wrap">
		<div id="footer-wrap-inner">

		<div id="primary" class="footer">
			<ul>

			<li id="search" class="widget">
				<h3>Search</h3>
				<form action="http://imagej.net/index.php" id="searchform">
					<input type='hidden' name="title" value="Special:Search" />
					<div>
						<input name="search" placeholder="Search ImageJ" title="Search ImageJ [f]" accesskey="f" id="s"/>						<input type="submit" name="go" value="Search" title="Go to a page with this exact name if it exists" class="searchButton" id="searchsubmit"/>					</div>
				</form>
			</li>

			
						<li class="widget">
				<h3>Personal tools</h3>
				<div>
					<ul>
					<li id="pt-createaccount"><a href="index.php?title=Special:CreateAccount&amp;returnto=DICOM+open" title="You are encouraged to create an account and log in; however, it is not mandatory">Create account</a></li><li id="pt-login"><a href="index.php?title=Special:UserLogin&amp;returnto=DICOM+open" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>					</ul>
				</div>
			</li>
			
			<li class="widget">
							</li>

			</ul>
		</div>

		<div id="secondary" class="footer">
			<ul>

			<li id="toolbox" class="widget">
				<h3>Tools</h3>
				<ul>
				<li id="t-whatlinkshere"><a href="Special:WhatLinksHere/DICOM_open" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li><li id="t-recentchangeslinked"><a href="Special:RecentChangesLinked/DICOM_open" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li><li id="t-specialpages"><a href="Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li><li id="t-print"><a href="index.php?title=DICOM_open&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li><li id="t-permalink"><a href="index.php?title=DICOM_open&amp;oldid=44879" title="Permanent link to this revision of the page">Permanent link</a></li><li id="t-info"><a href="index.php?title=DICOM_open&amp;action=info" title="More information about this page">Page information</a></li>				</ul>
			</li>

			
			<li class="widget">
							</li>

			</ul>
		</div>

		<div id="ternary" class="footer">
			<ul>

			<li class="widget">
				<img id="logo" src="../skins/imagej-128.png" alt=""/>			</li>

			<li class="widget">
				<h3><span class="mw-headline" id="MORE_TOOLS">MORE TOOLS</span></h3>
<ul><li> <a href="Special:ChangeUploadPassword" title="Special:ChangeUploadPassword">Set/change upload password</a></li>
<li> <a href="Special:RecentChanges" title="Special:RecentChanges">Recent changes</a></li>
<li> <a href="Special:LonelyPages" title="Special:LonelyPages">Orphaned pages</a></li></ul>
			</li>

			</ul>
		</div>
		<div style="clear: both"></div>

		</div>
		</div>

		<script>(window.RLQ=window.RLQ||[]).push(function(){mw.loader.load(["ext.fancytree","ext.suckerfish","mediawiki.toc","mediawiki.action.view.postEdit","site","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest","ext.SimpleTooltip"]);});</script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":224});});</script>
		</body>
		</html>
		