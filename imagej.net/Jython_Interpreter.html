<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8"/>
<title>Jython Scripting - ImageJ</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Jython_Scripting","wgTitle":"Jython Scripting","wgCurRevisionId":41847,"wgRevisionId":41847,"wgArticleId":33,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Jython_Scripting","wgRelevantArticleId":33,"wgRequestId":"ff74ec959357106aae0ac088","wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgPreferredVariant":"en","fancytree_path":"/extensions/TreeAndMenu/fancytree"});mw.loader.state({"site.styles":"ready","noscript":"ready","user.styles":"ready","user.cssprefs":"ready","user":"ready","user.options":"loading","user.tokens":"loading","ext.cite.styles":"ready","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.sectionAnchor":"ready","skins.erudite":"ready"});mw.loader.implement("user.options@0j3lz3q",function($,jQuery,require,module){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens@1ku9xth",function ( $, jQuery, require, module ) {
mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});/*@nomin*/;

});mw.loader.load(["mediawiki.page.startup"]);});</script>
<link rel="stylesheet" href="load.php%3Fdebug=false&amp;lang=en&amp;modules=ext.cite.styles%257Cmediawiki.legacy.commonPrint%252Cshared%257Cmediawiki.sectionAnchor%257Cskins.erudite&amp;only=styles&amp;skin=erudite.css"/>
<script async="" src="load.php%3Fdebug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=erudite"></script>
<link rel="stylesheet" href="extensions/TreeAndMenu/fancytree/fancytree.css"/><link rel="stylesheet" href="extensions/TreeAndMenu/suckerfish/suckerfish.css"/>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="load.php%3Fdebug=false&amp;lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=erudite.css"/>
<meta name="generator" content="MediaWiki 1.28.0"/>
<meta name="description" content="Jython is an implementation of the Python programming language designed to run on the Java platform. &amp;#91;1&amp;#93; In ImageJ Jython is one of several supported languages."/>
<link rel="shortcut icon" href="skins/ij2.ico"/>

<script type="text/javascript" src="extensions/SyntaxHighlighter/syntaxhighlighter/scripts/shCore.js"></script>
<script type="text/javascript" src="extensions/SyntaxHighlighter/syntaxhighlighter/scripts/shBrushPython.js"></script>
<script type="text/javascript" src="extensions/SyntaxHighlighter/syntaxhighlighter/scripts/shBrushPlain.js"></script>
<script type="text/javascript">
SyntaxHighlighter.all();
</script>
<link rel="stylesheet" type="text/css" media="screen" href="extensions/SyntaxHighlighter/syntaxhighlighter/styles/shCoreMinit.css" />

	<meta property="og:type" content="article"/>

	<meta property="og:site_name" content="ImageJ"/>

	<meta property="og:title" content="Jython Scripting"/>

	<meta property="og:description" content="Jython is an implementation of the Python programming language designed to run on the Java platform. &amp;#91;1&amp;#93; In ImageJ Jython is one of several supported languages."/>


<meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Jython_Scripting rootpage-Jython_Scripting skin-erudite action-view">
		<div class="mw-jump">
			<a href="Jython_Interpreter.html#bodyContent">Skip to content</a>, 			<a href="Jython_Interpreter.html#search">Skip to search</a>
		</div>

		<div id="top-wrap" role="banner">
			<h1><a href="Welcome" title="ImageJ" rel="home">ImageJ</a></h1>
			<div id="tagline">From ImageJ</div>

			<a id="menubutton" href="Jython_Interpreter.html#menu">Menu</a>
			<div id="nav" role="navigation">
			<ul id='menu'>
<li id="menu-item-n-About"><a href="ImageJ">About</a></li>
<li id="menu-item-n-Downloads"><a href="Downloads">Downloads</a></li>
<li id="menu-item-n-Learn"><a href="Learn">Learn</a></li>
<li id="menu-item-n-Develop"><a href="Development">Develop</a></li>
<li id="menu-item-n-News"><a href="News">News</a></li>
<li id="menu-item-n-Events"><a href="Events">Events</a></li>
<li id="menu-item-n-Help"><a href="Help">Help</a></li>
</ul>
			</div>
		</div>

		<div id="mw-js-message"></div>
		
		<div id="main" role="main">

			<div id="bodyContent">
				<h1>Jython Scripting</h1>
				
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><table class="infobox" cellspacing="5" style="text-align: left; float: right; border: 1px solid #a0a0a0; font-size: 80%;">
<tr>
<th colspan="2" style="font-size: 130%;">  Learn
</th></tr>
<tr>
<td>
</td></tr>
<tr>
<td>
<table class="infobox mw-collapsible mw-collapsed" cellspacing="5" data-collapsetext="-" data-expandtext="+" style="width: 100%; text-align: left; border-top: 1px solid #336699; border-right: none; border-left: none; border-bottom: none;">
<tr>
<th>  Topics
</th></tr>


<tr>
<td>  <a href="Introduction" title="Introduction">Introduction</a>
</td></tr>
<tr>
<td>  <a href="Getting_Started" title="Getting Started">Getting Started</a>
</td></tr>
<tr>
<td>  <a href="User_Guides" title="User Guides">User Guides</a>
</td></tr>
<tr>
<td>  <a href="./Category:Tutorials" title="Category:Tutorials">Tutorials</a>
</td></tr>
<tr>
<td>  <a href="Tips_and_Tricks" title="Tips and Tricks">Tips and Tricks</a>
</td></tr>
<tr>
<td>  <a href="Presentations" title="Presentations">Presentations</a>
</td></tr>
<tr>
<td>  <a href="Plugins" title="Plugins">Plugins</a>
</td></tr></table>
</td></tr>
<tr>
<td>
<table class="infobox mw-collapsible mw-collapsed" cellspacing="5" data-collapsetext="-" data-expandtext="+" style="width: 100%; text-align: left; border-top: 1px solid #336699; border-right: none; border-left: none; border-bottom: none;">
<tr>
<th>  Techniques
</th></tr>


<tr>
<td>  <a href="./Category:Techniques" title="Category:Techniques">All Techniques</a>
</td></tr>
<tr>
<td>  <a href="Colocalization_Analysis" title="Colocalization Analysis"> Colocalization</a>
</td></tr>
<tr>
<td>  <a href="Deconvolution" title="Deconvolution">Deconvolution</a>
</td></tr>
<tr>
<td>  <a href="Registration" title="Registration">Registration</a>
</td></tr>
<tr>
<td>  <a href="Segmentation" title="Segmentation">Segmentation</a>
</td></tr>
<tr>
<td>  <a href="Image_Stitching" title="Image Stitching"> Stitching</a>
</td></tr>
<tr>
<td>  <a href="Tracking" title="Tracking">Tracking</a>
</td></tr>
<tr>
<td>  <a href="Visualization" title="Visualization">Visualization</a>
</td></tr></table>
</td></tr>
<tr>
<td>
<table class="infobox mw-collapsible mw-collapsed" cellspacing="5" data-collapsetext="-" data-expandtext="+" style="width: 100%; text-align: left; border-top: 1px solid #336699; border-right: none; border-left: none; border-bottom: none;">
<tr>
<th>  Scripting
</th></tr>


<tr>
<td>  <a href="Scripting" title="Scripting">Overview</a>
</td></tr>
<tr>
<td>  <a href="User_input" title="User input">User input</a>
</td></tr>
<tr>
<td>  <a href="Scripting_basics" title="Scripting basics">Basics of script writing</a>
</td></tr>
<tr>
<td>  <a href="How_to_use_the_Javadoc" title="How to use the Javadoc">How to use the Javadoc</a>
</td></tr>
<tr>
<td>  <a href="Batch_Processing" title="Batch Processing">Batch processing</a>
</td></tr>
<tr>
<td>  <a href="Using_the_Script_Editor" title="Using the Script Editor">Script Editor</a>
</td></tr>
<tr>
<td>  <a href="Script_Editor_Auto_Import" title="Script Editor Auto Import">Auto Imports</a>
</td></tr>
<tr>
<td>  <a href="Script_Templates" title="Script Templates">Templates</a>
</td></tr>
<tr>
<td>  <a href="Scripting_Headless" title="Scripting Headless">Running headlessly</a>
</td></tr>
<tr>
<td>  <a href="Scripting_comparisons" title="Scripting comparisons">Comparisons</a>
</td></tr>
<tr>
<td>  <a href="Scripting_toolbox" title="Scripting toolbox">Toolbox</a>
</td></tr>
<tr>
<td>  <a href="Multithreaded_Image_Processing_in_Clojure" title="Multithreaded Image Processing in Clojure">Multithreading in Clojure</a>
</td></tr>
<tr>
<td>  <a href="Multithreaded_Image_Processing_in_JavaScript" title="Multithreaded Image Processing in JavaScript">Multithreading in JavaScript</a>
</td></tr>
<tr>
<td>  <a href="Chess" title="Chess">Chess</a> in Jython
</td></tr></table>
</td></tr>
<tr>
<td>
<table class="infobox mw-collapsible" cellspacing="5" data-collapsetext="-" data-expandtext="+" style="width: 100%; text-align: left; border-top: 1px solid #336699; border-right: none; border-left: none; border-bottom: none;">
<tr>
<th>  Languages
</th></tr>


<tr>
<td>  <a href="BeanShell_Scripting" title="BeanShell Scripting">BeanShell</a>
</td></tr>
<tr>
<td>  <a href="Groovy_Scripting" title="Groovy Scripting">Groovy</a>
</td></tr>
<tr>
<td>  <a href="Introduction_into_Macro_Programming" title="Introduction into Macro Programming">ImageJ Macro</a>
</td></tr>
<tr>
<td>  <a href="JavaScript_Scripting" title="JavaScript Scripting">JavaScript</a>
</td></tr>
<tr>
<td>  <a href="Clojure_Scripting" title="Clojure Scripting">Lisp (Clojure)</a>
</td></tr>
<tr>
<td>  <a href="MATLAB_Scripting" title="MATLAB Scripting">MATLAB</a>
</td></tr>
<tr>
<td>  <strong class="selflink">Python (Jython)</strong>
</td></tr>
<tr>
<td>  <a href="Renjin_Scripting" title="Renjin Scripting">R (Renjin)</a>
</td></tr>
<tr>
<td>  <a href="JRuby_Scripting" title="JRuby Scripting">Ruby (JRuby)</a>
</td></tr>
<tr>
<td>  <a href="Scala_Scripting" title="Scala Scripting">Scala</a>
</td></tr></table>
</td></tr></table>
<p><br />
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="Jython_Interpreter.html#Introduction"><span class="tocnumber">1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="Jython_Interpreter.html#When_to_use_Jython"><span class="tocnumber">2</span> <span class="toctext">When to use Jython</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="Jython_Interpreter.html#Explanation"><span class="tocnumber">2.1</span> <span class="toctext">Explanation</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-4"><a href="Jython_Interpreter.html#Jython_basics_for_ImageJ"><span class="tocnumber">3</span> <span class="toctext">Jython basics for ImageJ</span></a>
<ul>
<li class="toclevel-2 tocsection-5"><a href="Jython_Interpreter.html#Introduction_2"><span class="tocnumber">3.1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="Jython_Interpreter.html#Hello_World"><span class="tocnumber">3.2</span> <span class="toctext">Hello World</span></a>
<ul>
<li class="toclevel-3 tocsection-7"><a href="Jython_Interpreter.html#-_With_print"><span class="tocnumber">3.2.1</span> <span class="toctext">- With print</span></a></li>
<li class="toclevel-3 tocsection-8"><a href="Jython_Interpreter.html#-_With_IJ.log.28.29"><span class="tocnumber">3.2.2</span> <span class="toctext">- With IJ.log()</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-9"><a href="Jython_Interpreter.html#Image_selection_using_the_GenericDialog_class"><span class="tocnumber">3.3</span> <span class="toctext">Image selection using the GenericDialog class</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="Jython_Interpreter.html#Using_Scripting_Parameters"><span class="tocnumber">3.4</span> <span class="toctext">Using Scripting Parameters</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="Jython_Interpreter.html#A_batch_opener_using_os.walk.28.29"><span class="tocnumber">3.5</span> <span class="toctext">A batch opener using os.walk()</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-12"><a href="Jython_Interpreter.html#Importing_Java_module_and_classes"><span class="tocnumber">4</span> <span class="toctext">Importing Java module and classes</span></a>
<ul>
<li class="toclevel-2 tocsection-13"><a href="Jython_Interpreter.html#ImageJ_and_Fiji_API"><span class="tocnumber">4.1</span> <span class="toctext">ImageJ and Fiji API</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="Jython_Interpreter.html#Using_openCV_in_Jython"><span class="tocnumber">4.2</span> <span class="toctext">Using openCV in Jython</span></a>
<ul>
<li class="toclevel-3 tocsection-15"><a href="Jython_Interpreter.html#Matrices"><span class="tocnumber">4.2.1</span> <span class="toctext">Matrices</span></a></li>
<li class="toclevel-3 tocsection-16"><a href="Jython_Interpreter.html#Scalar"><span class="tocnumber">4.2.2</span> <span class="toctext">Scalar</span></a></li>
<li class="toclevel-3 tocsection-17"><a href="Jython_Interpreter.html#Operations"><span class="tocnumber">4.2.3</span> <span class="toctext">Operations</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-18"><a href="Jython_Interpreter.html#Self_written_Jython_modules_for_ImageJ"><span class="tocnumber">5</span> <span class="toctext">Self written Jython modules for ImageJ</span></a>
<ul>
<li class="toclevel-2 tocsection-19"><a href="Jython_Interpreter.html#Adding_a_custom_directory"><span class="tocnumber">5.1</span> <span class="toctext">Adding a custom directory</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-20"><a href="Jython_Interpreter.html#Self_written_Jython_packages_for_ImageJ"><span class="tocnumber">6</span> <span class="toctext">Self written Jython packages for ImageJ</span></a></li>
<li class="toclevel-1 tocsection-21"><a href="Jython_Interpreter.html#Bundle_packages_in_a_JAR_file"><span class="tocnumber">7</span> <span class="toctext">Bundle packages in a JAR file</span></a>
<ul>
<li class="toclevel-2 tocsection-22"><a href="Jython_Interpreter.html#Using_maven_to_build_packages"><span class="tocnumber">7.1</span> <span class="toctext">Using maven to build packages</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-23"><a href="Jython_Interpreter.html#Links"><span class="tocnumber">8</span> <span class="toctext">Links</span></a></li>
<li class="toclevel-1 tocsection-24"><a href="Jython_Interpreter.html#References"><span class="tocnumber">9</span> <span class="toctext">References</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Introduction">Introduction</span></h2>
<p>Jython is an implementation of the Python programming language designed to run on the Java platform. <sup id="cite_ref-1" class="reference"><a href="Jython_Interpreter.html#cite_note-1">&#91;1&#93;</a></sup> In ImageJ Jython is one of several <a href="Scripting#Supported_languages" title="Scripting">supported languages</a>.
</p>
<h2><span class="mw-headline" id="When_to_use_Jython">When to use Jython</span></h2>
<p>All scripting language supported by ImageJ can be used to access the <a rel="nofollow" class="external text" href="http://javadoc.imagej.net/">ImageJ API</a>. There are only differences in how the imports are handled and in the syntax of the selected language. Jython has a syntax that differs from most other language as indentations instead of brackets are used to group code blocks.
</p><p>The following list will help you to decide if Jython is the right choice to create scripts for ImageJ:
</p>
<ul><li> If you have experience with Python you can easily use Jython for ImageJ scripting. But you have to keep in mind that tools commonly used in many Python projects (e.g. Numpy) are not available in Jython. By building your <a href="Jython_Interpreter.html#Self_written_Jython_modules_for_ImageJ" title="Jython Scripting">own modules</a> you can create complex scripts that otherwise are only possible by writing ImageJ plugins in Java.</li>
<li> If don't have any experience in programming, the Python language is a good choice to start with. If your only aim is to write scripts for ImageJ, there are other languages you should try first (e.g. <a href="Groovy_Scripting" title="Groovy Scripting">Groovy</a>).</li>
<li> In Python many problems can be solved with less code than in other languages. Still the code is easy to read. Have a look at the examples on this page and decide if you want to start using Python for ImageJ scripting.</li></ul>
<h3><span class="mw-headline" id="Explanation">Explanation</span></h3>
<p>The Java implementation of Python is limited to the <a rel="nofollow" class="external text" href="https://docs.python.org/2/library/index.html">standard library</a> of Python 2.<br />
It is not possible to use external python modules (like Numpy...) however, <a rel="nofollow" class="external text" href="index.php?title=Jython_Scripting#Importing_Java_module_and_classes">any Java class residing in the Fiji installation can be used</a>.<br />
</p><p>Even with the given limitations, Jython is a powerful language for ImageJ scripting. Hopefully the examples on this page can convince you of that.
</p>
<h2><span class="mw-headline" id="Jython_basics_for_ImageJ">Jython basics for ImageJ</span></h2>
<div style="overflow:hidden"><table class="metadata plainlinks ambox ambox-notice">
<tr>
<td class="ambox-image">
<p><a href="./File:Information-sign.png" class="image"><img alt="Information-sign.png" src="_images/2/24/Information-sign.png" width="40" height="40" /></a>
</p>
</td>
<td> For an introduction in ImageJ scripting visit the page <a href="Scripting_basics" title="Scripting basics">Scripting basics</a>. </td>
<p><br />
</p>
</tr>
</table></div>
<p><br />
</p>
<h3><span class="mw-headline" id="Introduction_2">Introduction</span></h3>
<p>The aim of this page is not to teach how to program in Python. This purpose is much better fulfilled by the <a rel="nofollow" class="external text" href="https://docs.python.org/2/library/index.html">documentation of Python2</a>. The focus of this page is to show how features of the Python language can be useful for ImageJ scripting.
</p><p>That is why more complex examples are used that are fully functional. Just copy the code to the <a href="Using_the_Script_Editor" title="Using the Script Editor">Script Editor</a> and try them by yourself. Extensive in-line documentation is used to explain the implementation.
</p>
<h3><span class="mw-headline" id="Hello_World">Hello World</span></h3>
<h4><span class="mw-headline" id="-_With_print">- With print</span></h4>
<p>There are 2 ways to print some information back to the user.<br />
The first one is a classical python print statement, that will print some information to the console. <br />
<code>print "Hello world"</code><br />
You can print any kind of variable and objects.<br />
<code>print "This is a string followed by an int", 10</code>
</p><p>NB1&#160;: If used in a plugin, and no console window is open then the printed information will not be visible to the user (contrary to the <code>log</code> function below)
</p><p>NB2&#160;: Using numerous print statements might slow down the execution time when used in a plugin (not observed when executing from the script interpreter).
</p><p><br />
</p>
<h4><span class="mw-headline" id="-_With_IJ.log.28.29">- With IJ.log()</span></h4>
<pre class="brush:python">
from ij import IJ
IJ.log("Hello world")
IJ.log("This is a string followed by an int " + str(10))
</pre>
<p>Contrary to the print statement the log function display some output into a log window (newly open if not already open), and accept only a string as argument.
</p>
<h3><span class="mw-headline" id="Image_selection_using_the_GenericDialog_class">Image selection using the GenericDialog class</span></h3>
<p>This example script will create up to 10 new images and create a GenericDialog to select 3 of them. Finally the names of the selected images are printed to the Log window. It is recommended to copy the code to the <a href="Using_the_Script_Editor" title="Using the Script Editor">Script Editor</a> and run it by yourself.
</p><p>The following list links to documentation of the used Python features:
</p>
<ul><li> <a rel="nofollow" class="external text" href="https://docs.python.org/2/library/__future__.html">Future statement definitions</a></li>
<li> <a rel="nofollow" class="external text" href="https://docs.python.org/2/library/functions.html">Built-in Functions</a></li>
<li> <a rel="nofollow" class="external text" href="https://docs.python.org/2/library/stdtypes.html#str.join">str.join()-method</a></li>
<li> <a rel="nofollow" class="external text" href="https://docs.python.org/2/tutorial/datastructures.html#list-comprehensions">List Comprehensions</a></li>
<li> <a rel="nofollow" class="external text" href="https://www.python.org/dev/peps/pep-0289/">Generator Expressions</a></li>
<li> <a rel="nofollow" class="external text" href="http://stackoverflow.com/questions/36901/what-does-double-star-and-star-do-for-python-parameters">** (double star) and * (star) parameters</a></li>
<li> <a rel="nofollow" class="external text" href="https://docs.python.org/2/library/%5F%5Fmain%5F%5F.html">Top-level script environment (__main__)</a></li>
<li> <a rel="nofollow" class="external text" href="http://stackoverflow.com/questions/5893163/what-is-the-purpose-of-the-single-underscore-variable-in-python">Purpose of the single underscore “_” variable</a></li></ul>
<p><br />
<b><a rel="nofollow" class="external text" href="https://github.com/imagej/imagej-scripting/blob/master/src/main/resources/script_templates/Tutorials/Wiki_Jython_Tutorial_1.py">src/main/resources/script_templates/Tutorials/Wiki_Jython_Tutorial_1.py</a></b>
</p>
<pre class="brush:python">'''Image selection using the GenericDialog class

This code is part of the Jython tutorial at the ImageJ wiki.
http://imagej.net/Jython_Scripting#Image_selection_using_the_GenericDialog_class
'''

# The module __future__ contains some useful functions:
# https://docs.python.org/2/library/__future__.html
from __future__ import with_statement, division
# This imports the function random from the module random.
from random import random
# Next we import Java Classes into Jython.
# This is how we can acces the ImageJ API:
# https://imagej.nih.gov/ij/developer/api/allclasses-noframe.html
from ij import IJ, WindowManager
from ij.gui import GenericDialog

# A function is created with the def keyword.
# This function does not need any parameters.
def create_test_image():
    # Python uses indentation to create code blocks

    # Local variables are assigned.
    # We can assign the same value to more than one variable.
    image_width = image_height = 512
    box_width = box_height = 128
    offset_x = offset_y = 192
    counts = 64
    stdv = 16
    # The build in function int() is used to convert float to int.
    # The variable random contains a function that is called by adding parentheses.
    offset_x = int(2 * random() * offset_x)
    offset_y = int(2 * random() * offset_y)
    # We can define a function inside a function.
    # Outside of create_test_image() this function is not available.
    # By adding an asterisk to a parameter, all given parameters are combined to a tuple.
    def make_title(*to_concat):
        prefix = 'TestImage'
        # To create a tuple with a single entry the comma is necessary.
        # The 2 tuples are concatenated by using the + operator.
        to_join = (prefix,) + to_concat
        # We create a generator that converts every singe entry of the tuple to a string.
        strings_to_join = (str(arg) for arg in to_join)
        # The string ',' has a join method to concatenate values of a tuple with the string as seperator.
        # The result is a string.
        return ','.join(strings_to_join)
    def check_existence(title):
        if WindowManager.getIDList() is None:
            return False
        image_titles = (WindowManager.getImage(id).getTitle() for id in WindowManager.getIDList())
        return title in image_titles
    # To negate an expression put not in front of it.
    if not check_existence(make_title(offset_x, offset_y)):
        # The following code has been created by using the Recorder of ImageJ, set to output Java code.
        # By removing the semicolons, the code can be used in Jython.
        # The parameters can be modified by using variables and string concatenation.
        imp = IJ.createImage(make_title(offset_x, offset_y), "8-bit black", image_width, image_height, 1)
        # The build in function str() is used to convert int to string.
        IJ.run(imp, "Add...", "value=" + str(counts))
        imp.setRoi(offset_x , offset_y, box_width, box_height)
        IJ.run(imp, "Add...", "value=" + str(counts))
        IJ.run(imp, "Select None", "")
        IJ.run(imp, "Add Specified Noise...", "standard=" + str(stdv));
        # We don't want to confirm when closing one of the newly created images.
        imp.changes = False
        imp.show()

# This function uses parameters.
# A default value is given to the third parameter.
def create_selection_dialog(image_titles, defaults, title='Select images for processing'):
    gd = GenericDialog(title)
    # The build in function enumerate() returns two values:
    # The index and the value stored in the tuple/list.
    for index, default in enumerate(defaults):
        # for each loop we add a new choice element to the dialog.
        gd.addChoice('Image_'+ str(index + 1), image_titles, image_titles[default])
    gd.showDialog()
    if gd.wasCanceled():
        return None
    # This function returns a list.
    # _ is used as a placeholder for values we don't use.
    # The for loop is used to call gd.getNextChoiceIndex() len(defaults) times.
    return [gd.getNextChoiceIndex() for _ in defaults]

# It's best practice to create a function that contains the code that is executed when running the script.
# This enables us to stop the script by just calling return.
def run_script():
    while WindowManager.getImageCount() &lt; 10:
        create_test_image()

    image_titles = [WindowManager.getImage(id).getTitle() for id in WindowManager.getIDList()]
    # range(3) will create the list [0, 1, 2].
    selected_indices = create_selection_dialog(image_titles, range(3))
    # The script stops if the dialog has ben canceld (None was returned from create_selection_dialog).
    if selected_indices is None:
        print('Script was canceld.')
        return
    # We have to get the corresponding IMagePlus objects.
    selected_imps = [WindowManager.getImage(id) for id in [WindowManager.getIDList()[index] for index in selected_indices]]
    # The previous line can be split into 2 lines:
    # selected_ids = [WindowManager.getIDList()[index] for index in selected_indices]
    # selected_imps = [WindowManager.getImage(id) for id in selected_ids]

    for imp in selected_imps:
        # Strings can be formated using the&#160;% operator:
        # http://www.learnpython.org/en/String_Formatting
        IJ.log('The image \'%s\' has been selected.'&#160;% imp.getTitle())

# If a Jython script is run, the variable __name__ contains the string '__main__'.
# If a script is loaded as module, __name__ has a different value.
if __name__ in ['__builtin__','__main__']:
    run_script()
</pre>
<h3><span class="mw-headline" id="Using_Scripting_Parameters">Using Scripting Parameters</span></h3>
<p>The second example is inspired by atomic resolution images recorded with an Transmission Electron Microscope (TEM). Such images show a regular structure (a crystal), but the images are noisy because of the low signal. By using a Fourier filter the contrast can be enhanced.
</p><p>The script will create a periodic structure and add some random noise. The user can control the parameters of the created image. This is realized using <a href="Script_parameters" class="mw-redirect" title="Script parameters">Script parameters</a>. The Fourier filtering has been created by using the <a href="Introduction_into_Macro_Programming#The_recorder" title="Introduction into Macro Programming">Recorder</a>. Finally a simple image calculator is used to show that functions can be passed as parameters.
</p><p>This list links to the documentation of Python features that are introduced with this example:
</p>
<ul><li> <a rel="nofollow" class="external text" href="https://docs.python.org/2/library/functions.html#zip">The zip() function</a></li>
<li> <a rel="nofollow" class="external text" href="http://stackoverflow.com/questions/8421337/rotating-a-two-dimensional-array-in-python">Rotating a two-dimensional array</a></li>
<li> <a rel="nofollow" class="external text" href="https://docs.python.org/2/reference/expressions.html#lambda">Lambda expressions</a></li></ul>
<p><br />
<b><a rel="nofollow" class="external text" href="https://github.com/imagej/imagej-scripting/blob/master/src/main/resources/script_templates/Tutorials/Wiki_Jython_Tutorial_2.py">src/main/resources/script_templates/Tutorials/Wiki_Jython_Tutorial_2.py</a></b>
</p>
<pre class="brush:python">#@ String(value='Please set some parameters.', visibility='MESSAGE') message
#@ Short(label='Image size', value=512, min=128, max=2048, stepSize=128, style="slider") img_size
#@ Double(label='Image amplitude', value=100) amplitude
#@ Short(label='Spacing', value=16, min=8) spacing

'''Using Scripting Parameters

This code is part of the Jython tutorial at the ImageJ wiki.
http://imagej.net/Jython_Scripting#Using_Scripting_Parameters
'''

# The parameters in front of this comment are populated before the script runs.
# Details on Script parameters can be found at
# http://imagej.net/Script_parameters

# The module __future__ contains some useful functions:
# https://docs.python.org/2/library/__future__.html
from __future__ import with_statement, division

# It's best practice to create a function that contains the code that is executed when running the script.
# This enables us to stop the script by just calling return.
def run_script():
    # We can use import inside of code blocks to limit the scope.
    import math
    from ij import IJ, ImagePlus
    from ij.process import FloatProcessor
    blank = IJ.createImage("Blank", "32-bit black", img_size, img_size, 1)
    # This create a list of lists. Each inner list represents a line.
    # pixel_matrix[0] is the first line where y=0.
    pixel_matrix = split_list(blank.getProcessor().getPixels(), wanted_parts=img_size)
    # This swaps x and y coordinates.
    # http://stackoverflow.com/questions/8421337/rotating-a-two-dimensional-array-in-python
    # As zip() creates tuples, we have to convert each one by using list().
    pixel_matrix = [list(x) for x in zip(*pixel_matrix)]
    for y in range(img_size):
        for x in range(img_size):
            # This function oszillates between 0 and 1.
            # The distance of 2 maxima in a row/column is given by spacing.
            val = (0.5 * (math.cos(2*math.pi/spacing*x) + math.sin(2*math.pi/spacing*y)))**2
            # When assigning, we multiply the value by the amplitude.
            pixel_matrix[x][y] = amplitude * val
    # The constructor of FloatProcessor works fine with a 2D Python list.
    crystal = ImagePlus("Crystal", FloatProcessor(pixel_matrix))
    # Crop without selection is used to duplicate an image.
    crystal_with_noise = crystal.crop()
    crystal_with_noise.setTitle("Crystal with noise")
    IJ.run(crystal_with_noise, "Add Specified Noise...", "standard=%d"&#160;% int(amplitude/math.sqrt(2)))
    # As this is a demo, we don't want to be ask to save an image on closing it.
    # In Python True and False start with capital letters.
    crystal_with_noise.changes = False
    crystal.show()
    crystal_with_noise.show()
    filtered = fft_filter(crystal_with_noise)
    # We create a lambda function to be used as a parameter of img_calc().
    subtract = lambda values: values[0] - values[1]
    # This is a short form for:
    # def subtract(values):
    #   return values[0] - values[1]

    # The first time we call img_calc with 2 images.
    difference = img_calc(subtract, crystal, filtered, title="Difference of 2")
    difference.show()
    # The first time we call img_calc with 3 images.
    minimum = img_calc(min, crystal, filtered, crystal_with_noise, title="Minimum of 3")
    minimum.show()
    for imp in (crystal, crystal_with_noise, filtered, difference, minimum):
        IJ.run(imp, "Measure", "")

# Functions can be defined after they are used.
# This is only possible if the main code is encapsulated into a function.
# The main function has to be called at the end of the script.

def img_calc(func, *imps, **kwargs):
    """Runs the given function on each pixel of the given list of images.
    An additional parameter, the title of the result, is passed as keyword parameter.
    We assume that each image has the same size. This is not checked by this function.
    """
    # If the keyword parameter is not passed, it is set to a default value.
    if not kwargs['title']:
        kwargs['title'] = "Result"
    # This is a 2D list: list[number of images][pixels per image] .
    pixels = [imp.getProcessor().getPixels() for imp in imps]
    # The function is called pixel by pixel.
    # zip(*pixels) rotates the 2D list: list[pixels per image][mumber of images].
    result = [func(vals) for vals in zip(*pixels)]
    # result is a 1D list and can be used to create an ImagePlus object.
    from ij import ImagePlus
    from ij.process import FloatProcessor
    return ImagePlus(kwargs['title'], FloatProcessor(img_size, img_size, result))

def split_list(alist, wanted_parts=1):
    """Split a list to the given number of parts."""
    length = len(alist)
    # alist[a:b:step] is used to get only a subsection of the list 'alist'.
    # alist[a:b] is the same as [a:b:1].
    # '//' is an integer division.
    # Without 'from __future__ import division' '/' would be an integer division.
    return [ alist[i*length // wanted_parts: (i+1)*length // wanted_parts]
             for i in range(wanted_parts) ]

def fft_filter(imp):
    """ Removing noise from an image by using a FFT filter
    This are operations copied from the ImageJ macro recorder.
    Jython does not complain when you forget to remove the semicolons.
    """
    from ij import IJ
    IJ.run(imp, "FFT", "");
    # No ImagePlus is returned by the FFT function of ImageJ.
    # We need to use the WindowManager to select the newly created image.
    from ij import WindowManager as wm
    fft = wm.getImage("FFT of " + imp.getTitle())
    IJ.run(fft, "Find Maxima...", "noise=64 output=[Point Selection] exclude");
    # Enlarging the point selectins from Find Maxima.
    IJ.run(fft, "Enlarge...", "enlarge=2");
    # Inverting the selection.
    IJ.run(fft, "Make Inverse", "");
    IJ.run(fft, "Macro...", "code=v=0");
    IJ.run(fft, "Inverse FFT", "");
    fft.changes = False
    fft.close()
    imp_filtered = wm.getImage("Inverse FFT of " + imp.getTitle())
    imp_filtered.setTitle("Filtered " + imp.getTitle())
    imp_filtered.changes = False
    return imp_filtered


# If a Jython script is run, the variable __name__ contains the string '__main__'.
# If a script is loaded as module, __name__ has a different value.
if __name__ in ['__builtin__','__main__']:
    run_script()
</pre>
<h3><span class="mw-headline" id="A_batch_opener_using_os.walk.28.29">A batch opener using <code>os.walk()</code></span></h3>
<p>We have yet introduced some powerful functions build into Python. Another one is <code>walk()</code> from the <code>os</code> module. It can be used to go through a directory structure and process the contained files. In this example <code>walk()</code> is used to batch open images with ImageJ's function <code>openImage()</code>.
</p><p>To read more about the used features, the following list provides links to additional information:
</p>
<ul><li> <a rel="nofollow" class="external text" href="https://docs.python.org/2/library/os.html#os.walk">The walk() function</a></li>
<li> <a rel="nofollow" class="external text" href="https://docs.python.org/2/library/os.path.html">The documentation of os.path</a></li>
<li> <a rel="nofollow" class="external text" href="https://docs.python.org/2/library/os.html#os.listdir">The listdir() function</a></li>
<li> <a rel="nofollow" class="external text" href="http://javadoc.imagej.net/ImageJ1/">Javadoc on IJ.openImage()</a></li>
<li> <a rel="nofollow" class="external text" href="https://docs.python.org/2/library/functions.html#isinstance">Testing the type of an object using isinstance()</a></li>
<li> <a rel="nofollow" class="external text" href="https://docs.python.org/2/library/functions.html#type">Identifying the type of an object using type()</a></li>
<li> <a rel="nofollow" class="external text" href="https://docs.python.org/2/reference/simple_stmts.html#continue">Using continue to control a loop</a></li>
<li> <a rel="nofollow" class="external text" href="https://docs.python.org/2/library/stdtypes.html#truth-value-testing">Truth Value Testing</a></li></ul>
<p><br />
<b><a rel="nofollow" class="external text" href="https://github.com/imagej/imagej-scripting/blob/master/src/main/resources/script_templates/Tutorials/Wiki_Jython_Tutorial_3.py">src/main/resources/script_templates/Tutorials/Wiki_Jython_Tutorial_3.py</a></b>
</p>
<pre class="brush:python">#@ File(label='Choose a directory', style='directory') import_dir
#@ String(label='File types', value='tif;png') file_types
#@ String(label='Filter', value='') filters
#@ Boolean(label='Recursive search', value=True) do_recursive

'''A batch opener using os.walk()

This code is part of the Jython tutorial at the ImageJ wiki.
http://imagej.net/Jython_Scripting#A_batch_opener_using_os.walk.28.29
'''

# We do only include the module os,
# as we can use os.path.walk()
# to access functions of the submodule.
import os
from java.io import File

from ij import IJ

def batch_open_images(path, file_type=None, name_filter=None, recursive=False):
    '''Open all files in the given folder.
   &#160;:param path: The path from were to open the images. String and java.io.File are allowed.
   &#160;:param file_type: Only accept files with the given extension (default: None).
   &#160;:param name_filter: Only accept files that contain the given string (default: None).
   &#160;:param recursive: Process directories recursively (default: False).
    '''
    # Converting a File object to a string.
    if isinstance(path, File):
        path = path.getAbsolutePath()

    def check_type(string):
        '''This function is used to check the file type.
        It is possible to use a single string or a list/tuple of strings as filter.
        This function can access the variables of the surrounding function.
       &#160;:param string: The filename to perform the check on.
        '''
        if file_type:
            # The first branch is used if file_type is a list or a tuple.
            if isinstance(file_type, (list, tuple)):
                for file_type_ in file_type:
                    if string.endswith(file_type_):
                        # Exit the function with True.
                        return True
                    else:
                        # Next iteration of the for loop.
                        continue
            # The second branch is used if file_type is a string.
            elif isinstance(file_type, string):
                if string.endswith(file_type):
                    return True
                else:
                    return False
            return False
        # Accept all files if file_type is None.
        else:
            return True

    def check_filter(string):
        '''This function is used to check for a given filter.
        It is possible to use a single string or a list/tuple of strings as filter.
        This function can access the variables of the surrounding function.
       &#160;:param string: The filename to perform the filtering on.
        '''
        if name_filter:
            # The first branch is used if name_filter is a list or a tuple.
            if isinstance(name_filter, (list, tuple)):
                for name_filter_ in name_filter:
                    if name_filter_ in string:
                        # Exit the function with True.
                        return True
                    else:
                        # Next iteration of the for loop.
                        continue
            # The second branch is used if name_filter is a string.
            elif isinstance(name_filter, string):
                if name_filter in string:
                    return True
                else:
                    return False
            return False
        else:
        # Accept all files if name_filter is None.
            return True

    # We collect all files to open in a list.
    path_to_images = []
    # Replacing some abbreviations (e.g. $HOME on Linux).
    path = os.path.expanduser(path)
    path = os.path.expandvars(path)
    # If we don't want a recursive search, we can use os.listdir().
    if not recursive:
        for file_name in os.listdir(path):
            full_path = os.path.join(path, file_name)
            if os.path.isfile(full_path):
                if check_type(file_name):
                    if check_filter(file_name):
                        path_to_images.append(full_path)
    # For a recursive search os.walk() is used.
    else:
        # os.walk() is iterable.
        # Each iteration of the for loop processes a different directory.
        # the first return value represents the current directory.
        # The second return value is a list of included directories.
        # The third return value is a list of included files.
        for directory, dir_names, file_names in os.walk(path):
            # We are only interested in files.
            for file_name in file_names:
                # The list contains only the file names.
                # The full path needs to be reconstructed.
                full_path = os.path.join(directory, file_name)
                # Both checks are performed to filter the files.
                if check_type(file_name):
                    if check_filter(file_name):
                        # Add the file to the list of images to open.
                        path_to_images.append(full_path)
    # Create the list that will be returned by this function.
    images = []
    for img_path in path_to_images:
        # IJ.openImage() returns an ImagePlus object or None.
        imp = IJ.openImage(img_path)
        # An object equals True and None equals False.
        if imp:
            images.append(imp)
    return images

def split_string(input_string):
    '''Split a string to a list and strip it
   &#160;:param input_string: A string that contains semicolons as separators.
    '''
    string_splitted = input_string.split(';')
    # Remove whitespace at the beginning and end of each string
    strings_striped = [string.strip() for string in string_splitted]
    return strings_striped

if __name__ in ['__builtin__','__main__']:
    # Run the batch_open_images() function using the Scripting Parameters.
    images = batch_open_images(import_dir,
                               split_string(file_types),
                               split_string(filters),
                               do_recursive
                              )
    for image in images:
        # Call the toString() method of each ImagePlus object.
        print(image)
</pre>
<h2><span class="mw-headline" id="Importing_Java_module_and_classes">Importing Java module and classes</span></h2>
<p>Another great feature of Jython is the possibility to use functions from Java jar package that resides in the jar folder of imageJ. 
</p>
<h3><span class="mw-headline" id="ImageJ_and_Fiji_API">ImageJ and Fiji API</span></h3>
<p>The following API documentation lists all available modules and functions&#160;:
</p>
<ul><li> <a rel="nofollow" class="external text" href="http://javadoc.scijava.org/ImageJ1/">ImageJ</a></li>
<li> <a rel="nofollow" class="external text" href="http://javadoc.scijava.org/Fiji/">Fiji</a></li></ul>
<p>Those package are built-in with Fiji, but any package that resides in the jars folder can be imported provided you know the path to the class.
</p><p>For example, one of the main built-in ImageJ packages is called <code>ij</code>, and often Jython scripts will write something like this at the top:
</p>
<pre class="brush:python">
from ij import IJ
# do stuff below....
</pre>
<p>Doing this allows you to access the <code>IJ</code> <i>class</i> which resides in the <code>ij</code> <i>package</i>. You can find a description of the <code>ij</code> package <a rel="nofollow" class="external text" href="https://javadoc.scijava.org/ImageJ1/ij/package-summary.html">here</a>. What can we do with the <code>IJ</code> class? 
Clicking on the <code>IJ</code> link brings you to the <a rel="nofollow" class="external text" href="https://javadoc.scijava.org/ImageJ1/ij/IJ.html">class documentation</a> page for <code>IJ</code>. This class contains "static utility methods" which means you can call them with without instantiating (calling the constructor) the <code>IJ</code> class. We will cover constructors later. Looking through the documentation for <code>IJ</code>, lets focus on the method <code>createImage</code> (<a rel="nofollow" class="external text" href="https://javadoc.scijava.org/ImageJ1/ij/IJ.html#createImage-java.lang.String-int-int-int-int-">docs here</a>). This method can be called just like you would call a method on a python class. The documentation shows you need to provide the following parameters (types in parenthesis):
</p>
<ol><li> title (string) </li>
<li> width (int)</li>
<li> height (int) </li>
<li> depth (int)</li>
<li> bitdepth (int)</li></ol>
<p>and it returns an <code>ImagePlus</code> object. <code>ImagePlus</code> objects are very important in ImageJ, and you will the documentation for them <a rel="nofollow" class="external text" href="https://imagej.nih.gov/ij/developer/api/ij/ImagePlus.html">here</a>. 
Below is an example of how to import and use the static methods on the <code>IJ</code> class to create an image. 
</p>
<pre class="brush:python">
from ij import IJ # read this as: "from the ij package import the IJ class"
test_img = IJ.createImage("Test image", 512, 512, 1, 8)
# now check the type of test_img
print(type(test_img))
# &lt;type 'ij.ImagePlus'&gt;
</pre>
<p>This code shows that we have successfully created an <code>ImagePlus</code> object. 
Looking at the documentation for the <a rel="nofollow" class="external text" href="https://javadoc.scijava.org/ImageJ1/ij/ImagePlus.html">ImagePlus class</a>, let's use a few of the methods to make sure the image was created correctly. 
</p>
<pre class="brush:python">
from ij import IJ
test_img = IJ.createImage("Test image", 512, 512, 1, 8)
# check the type:
print(type(test_img))
# &lt;type 'ij.ImagePlus'&gt;
title = test_img.getTitle()
width = test_img.width
height = test_img.height
print("{} is {} wide and {} tall.".format(title, width, height))
test_img.show()
</pre>
<p>We accessed the title using the <code>getTitle()</code> <a rel="nofollow" class="external text" href="https://javadoc.scijava.org/ImageJ1/ij/ImagePlus.html#getTitle--">method</a>, which takes no arguments and returns the image name. We accessed the image width and height by accessing <code>test_img</code>'s <b>fields</b>. These are not methods, but contain information about the class. We could have also used the <code>getWidth()</code> and <code>getHeight()</code> methods as well. We then called the <code>show()</code> method on our test image and a (very boring) 512X512 8 bit image should have popped up. 
</p><p><br />
Here is another example where we use the ImageJ package and the <a rel="nofollow" class="external text" href="http://javadoc.scijava.org/ImageJ1/ij/plugin/frame/RoiManager.html">RoiManager</a> class. According to the javadoc, the RoiManager class resides in <code>ij.plugin.frame</code>. Therefore the code will look like&#160;:
</p>
<pre class="brush:python">
from ij.plugin.frame import RoiManager
RM = RoiManager()        # we create an instance of the RoiManager class
rm = RM.getRoiManager()  # "activate" the RoiManager otherwise it can behave strangely 
</pre>
<p><br />
</p>
<h3><span class="mw-headline" id="Using_openCV_in_Jython">Using openCV in Jython</span></h3>
<p>It is even possible to use most of opencv functionalities within Jython/Fiji. There are several options (see the <a rel="nofollow" class="external text" href="OpenCV">wiki page about opencv</a>), yet the most straight forward is probably IJ-OpenCV which is available via the update sites.  It will automatically download the necessary packages and dependencies in your Fiji installation. 
</p><p>A manual installation is also possible by putting the jar packages in the jar folder of imageJ. They are avalaible on the <a rel="nofollow" class="external text" href="https://github.com/joheras/IJ-OpenCV">IJopenCV github</a>, which even provides a maven option.  
</p>
<h4><span class="mw-headline" id="Matrices">Matrices</span></h4>
<p>The first thing to know about OpenCV is that most functions work with an OpenCV matrix object. Fortunately, the IJ-OpenCV project provides some converters&#160;:
</p>
<pre class="brush:python">
#@ ImagePlus ImP 
from ijopencv.ij      import ImagePlusMatConverter
from ijopencv.opencv  import MatImagePlusConverter
from ij               import ImagePlus

# Convert ImagePlus (actually the contained ImageProcessor) to Matrix object
imp2mat = ImagePlusMatConverter()
ImMat = imp2mat.toMat(imp.getProcessor())
print ImMat

# Convert Matrix object to ImageProcessor
mat2ip = MatImagePlusConverter()
NewIP  = mat2ip.toImageProcessor(ImMat)
NewImp = ImagePlus("Matrix converted back to ImagePlus", NewIP)
print NewImP
</pre>
<p>Such kind of converter is also available for PointRoi to opencv keypoints...
</p><p>Now to use opencv function, we use the <a rel="nofollow" class="external text" href="http://bytedeco.org/javacpp-presets/opencv/apidocs/">JavaCPP API</a> that contains almost all functions of opencv.
</p>
<pre class="brush:python">
from org.bytedeco.javacpp.opencv_core	import Mat, CvMat, vconcat

## Typical matrices ##

# Identity Matrix of size (3x3) and type 8-bit
Id = Mat().eye(3,3,0).asMat()
print Id
print CvMat(Id) # handy to visualise the matrix

# Matrix of ones (3x3) 
One = Mat().ones(3,3,0).asMat()

# Matrix of zeros (3x3) 
Zero = Mat().zeros(3,3,0).asMat()

# Custom Matrices
# 1D-Matrix can be initialize from a list
# For 2D (or more) we have to concatenate 1D-Matrices

Row1 = Mat([1,2,3,4,5]) # 1D matrix 
Row2 = Mat([6,7,8,9,10])

TwoColumn = Mat()              # initialise output
vconcat(Col1, Col2, TwoColumn) # output stored in TwoColumn
print CvMat(TwoColumn)
</pre>
<div style="overflow:hidden"><table class="metadata plainlinks ambox ambox-content">
<tr>
<td class="ambox-image">
<p><a href="./File:Important-sign.png" class="image"><img alt="Important-sign.png" src="_images/f/f0/Important-sign.png" width="40" height="40" /></a>
</p>
</td>
<td> The <code>org.bytedeco.javacpp.opencv_core.Mat</code> object is different than the <code>org.opencv.core.Mat</code>&#160;!! They don't have exactly the same attributes and functions. In Fiji you should always use the objects from <code>org.bytedeco.javacpp</code>. </td>
<p><br />
</p>
</tr>
</table></div>
<p><br />
</p><p>Similarly there is some apparent redudancy for the function in the javacpp API.
</p><p>ex&#160;: Transform exists in 3 different places&#160;:
</p>
<ul><li> <code>org.opencv.core.Core.transform</code></li></ul>
<p>This one takes <code>org.opencv.core.Mat</code> as input. It is currently challenging to have such object in Fiji.
</p>
<ul><li> <code>org.bytedeco.javacpp.opencv_core.cvTransform</code></li></ul>
<p>using <code>CvArr</code> as input, but even if you manage to convert your input as a <code>CvArr</code> it crashes Fiji. Apparently it is a deprecated version.
</p>
<ul><li> <code>org.bytedeco.javacpp.opencv_core.transform</code></li></ul>
<p>That's the one to use&#160;! It takes only <code>org.bytedeco.javacpp.opencv_core.Mat</code> as input, which is the most approriate in Fiji/Jython
</p><p><br />
</p>
<h4><span class="mw-headline" id="Scalar">Scalar</span></h4>
<p>In addition to Matrices, opencv allows to use Scalar objects
A scalar is a 4 item element (v0, v1, v2, v3).
If v1=v2=v3=0 then the Scalar is real.
</p>
<pre class="brush:python">
from org.bytedeco.javacpp.opencv_core	import Scalar

# Real scalar can be initiated with a float parameters
Number = Scalar(5.0)
Number = Scalar(float(5))
print Number

# Using an integer as parameter has a different meaning
Empty = Scalar(5) # This initiate an empty Scalar object of size 5
print Empty

# Alternatively one can set the other values of the Scalar
Complex = Scalar(1,2,3,4)
print Complex
</pre>
<p><br />
</p>
<h4><span class="mw-headline" id="Operations">Operations</span></h4>
<p>It is possible to perform some operations between matrices, or between Scalar and matrices.
</p>
<pre class="brush:python">
from org.bytedeco.javacpp.opencv_core	import Scalar, Mat, subtract

A = Mat([1,2,3,4,5])
B = Mat([1,2,-3,-4,0])

Number = Scalar(10.0)

## Number - B ( B-Number is also possible)
Expr = subtract(Number,B)
print CvMat(Expr.asMat())

## A - B
Out = Mat() 
subtract(A,B,Out)
print CvMat(Out)
</pre>
<h2><span class="mw-headline" id="Self_written_Jython_modules_for_ImageJ">Self written Jython modules for ImageJ</span></h2>
<p>In Jython you can write all commands line by line in a single file and execute it. To create a neat program, <a rel="nofollow" class="external text" href="https://docs.python.org/2/tutorial/controlflow.html#defining-functions">functions</a> and <a rel="nofollow" class="external text" href="https://docs.python.org/2/tutorial/classes.html">classes</a> can be used to structure code. To prevent using copy&amp;past for regularly used functions and classes, <a rel="nofollow" class="external text" href="https://docs.python.org/2/tutorial/modules.html">modules</a> are the way to choose. Modules are files that contain functions and classes to import into other files.
</p><p>To load modules, one has to save them to a directory where Jython will find them. Two lines of code will reveal these directories to you:
</p>
<pre class="brush:python">
from sys import path
print(path)
</pre>
<p>When running this code the result is an output like
</p>
<pre class="brush:python">
['/home/michael/Software/ImageJ.app/jars/Lib', '/home/michael/Software/ImageJ.app/jars/jython-shaded-2.7.0.jar/Lib', '__classpath__', '__pyclasspath__/']
</pre>
<p>This tells us that the folder <code>jars/Lib/</code> inside our ImageJ/Fiji directory is the right place to save modules. As <code>Lib/</code> does not exist by default, we have to create it.
</p><p>When a module is imported for the first time, Jython will compile it to Java code. If there is a module named <code>myModule.py</code>, Jython will create a file called <code>myModule$py.class</code>. The next time the module is imported, the jython interpreter uses the <code>.class</code> file instead of the <code>.py</code> file, even if this <code>.py</code> file was modified. 
</p><p>To force the interpreter to use the last version of the py script there are 2 possibilities&#160;: 
</p>
<ul><li> Close Fiji, delete the <code>myModule$py.class</code> file and restart Fiji</li>
<li> Use the following lines of code (found at <a rel="nofollow" class="external text" href="http://stackoverflow.com/questions/10531920/jython-import-or-reload-dynamically">stackoverflow</a>) that will force Jython to recompile all modules</li></ul>
<pre class="brush:python">
# Use this to recompile Jython modules to class files.
from sys import modules
modules.clear()
# Imports of Jython modules are placed below:
import myModule
</pre>
<h3><span class="mw-headline" id="Adding_a_custom_directory">Adding a custom directory</span></h3>
<p>If you don't want to use <code>jars/Lib/</code> to save your modules, you have to extend the array <code>sys.path</code>:
</p>
<pre class="brush:python">
from sys import path
from java.lang.System import getProperty
 
# extend the search path by $FIJI_ROOT/bin/
# 'fiji.dir' works for plain ImageJ, too.
path.append(getProperty('fiji.dir') + '/bin')
# an alternative can be the users home directory
# path.append(getProperty('user.home') + '/JythonModules')
 
# Now you can import $FIJI_ROOT/bin/myModule.py
import myModule
</pre>
<p>The function <code>getProperty()</code> accepts many more strings. A list can be found at <a rel="nofollow" class="external text" href="https://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html">The Java Tutorials</a>.
</p>
<h2><span class="mw-headline" id="Self_written_Jython_packages_for_ImageJ">Self written Jython packages for ImageJ</span></h2>
<p>On the way to perfectly organize Jython code, <a rel="nofollow" class="external text" href="https://docs.python.org/2/tutorial/modules.html#packages">packages</a> are the next step. A Jython package is a folder that contain a set of modules scripts together with a <code>__init__.py</code> file. This file can be empty. Below is a typical structure for the <code>Imagej.app/jars/Lib</code> folder:
</p>
<pre class="brush:plain">
Imagej.app/jars/Lib/
-- myModule.py
-- myPackage/
   -- __init__.py
   -- mathTools.py
   -- customFilters.py
   -- fftTools.py
-- myPackage2/
   -- __init__.py
   -- mathTools.py
   -- stackProcessing.py
</pre>
<p>There are two packages and one module. The first package contains three modules and the second package contains two modules. We can import the modules on different ways:
</p>
<pre class="brush:python">
# Import the single module using the default name:
import myModule

# Import mathTools from the first package
import myPackage.mathTools
# Use a function from the imported module
myPackage.mathTools.aFunction()

# Import mathTools from the second package
from myPackage2 import mathTools
# Use a function from the imported module without prefixing the package
mathTools.aFunction()

# Import customFilters from the first package and rename it
from myPackage import customFilters as filters
# Use a function from customFilters.py
filters.aFunction()

# Importing all module from a package
from myPackage2 import *
# The next line will fail
stackProcessing.aFunction()
</pre>
<p>The reason for the last import to fail is the empty <code>__init__.py</code>. We have to define which modules of the package are imported when using <code>import *</code>. This is done by setting the variable <code>__all__</code> in the <code>__init__.py</code>. For <code>myPackage2</code> this line of code is needed:
</p>
<pre class="brush:python">
__all__ = ["mathTools", "stackProcessing"]
</pre>
<p>Besides setting this variable, the <code>__init__.py</code> file can contain normal Jython code that is executed upon import of the package.
</p>
<h2><span class="mw-headline" id="Bundle_packages_in_a_JAR_file">Bundle packages in a JAR file</span></h2>
<p>An interesting feature of Jython is to search for packages and modules inside of <a rel="nofollow" class="external text" href="https://en.wikipedia.org/wiki/JAR_(file_format)">JAR files</a>. The folder structure from the last section can be modified by packing everything into a single <code>myPackages.jar</code>. The name of the JAR file doesn't matter. All imports work the same as explained before.
</p>
<pre class="brush:plain">
Imagej.app/jars/Lib/
-- myPackages.jar
   -- myModule.py
   -- myPackage/
      -- __init__.py
      -- mathTools.py
      -- customFilters.py
      -- fftTools.py
   -- myPackage2/
      -- __init__.py
      -- mathTools.py
      -- stackProcessing.py
</pre>
<p>The advantage of this approach is that you can share your packages easily. For example you can upload the JAR file to an <a href="Update_Sites" title="Update Sites">update site</a>.    
It is possible to upload .py scripts to update sites too, without packaging into a jar. The advantage of jar are that they allow to define dependencies more systematically.  
</p><p><b>NB</b>&#160;: Script implementing "ImageJ menu macro" and "utilitary scripts" that are used as imported modules in other macros <b>should be packed in separate jar files</b>&#160;! Indeed, if not explicitly mentioned, the jython interpreter only looks in the Jars/Lib folder to import module, so the .jar containing the "utilitary scripts" should be put there, while the jar containing the "ImageJ menu macro" can be put either in the Plugin or script/Plugin folder in order to appear in the ImageJ menu. 
</p><p>Contrary to the scripts in Jars/Lib, the menu macro scripts are not compiled, and as explained above they can not be imported in other scripts since the Plugin folder do not reside in the Jython search path by default. 
</p><p>This is the reason why a given project is rather distributed in 2 different jar files as explained <a rel="nofollow" class="external text" href="http://forum.imagej.net/t/using-self-written-jython-modules-in-imagej/2280">here</a>.  
</p>
<h3><span class="mw-headline" id="Using_maven_to_build_packages">Using maven to build packages</span></h3>
<p>Using maven you can automate the packaging of Jython code into JAR files. This approach is only recommended if you already use maven, as installing and learning how to use maven is not worth the time saving of automated packaging.
</p><p>At GitHub you will find an <a rel="nofollow" class="external text" href="https://github.com/m-entrup/imagej-jython-package">example project</a> that you can use as a template. Just run <code>mvn package</code> and maven will generate a JAR file at the <code>target</code> directory.
</p>
<h2><span class="mw-headline" id="Links">Links</span></h2>
<ul><li> <a href="Jython_Scripting_Examples" title="Jython Scripting Examples">Jython Scripting Examples</a></li>
<li> <a href="ImageJ2_Python_Scripts" title="ImageJ2 Python Scripts">ImageJ2 Python Scripts</a></li>
<li> <a rel="nofollow" class="external text" href="https://www.ini.uzh.ch/~acardona/fiji-tutorial/">A Fiji Scripting Tutorial by Albert Cardona</a></li>
<li> <a rel="nofollow" class="external text" href="http://wiki.cmci.info/documents/120206pyip_cooking/python_imagej_cookbook">Jython scripting cookbook</a></li>
<li> <a rel="nofollow" class="external text" href="https://github.com/imagej/tutorials/tree/master/howtos/src/main/java/howto">ImageJ tutorials repository</a></li></ul>
<h2><span class="mw-headline" id="References">References</span></h2>
<ol class="references">
<li id="cite_note-1"><span class="mw-cite-backlink"><a href="Jython_Interpreter.html#cite_ref-1">↑</a></span> <span class="reference-text"><a rel="nofollow" class="external text" href="http://rsb.info.nih.gov/ij/plugins/index.html">Wikipedia entry on Jython</a>. Accessed: 2016-08-30</span>
</li>
</ol>

<!-- 
NewPP limit report
Cached time: 20200713072808
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.124 seconds
Real time usage: 0.649 seconds
Preprocessor visited node count: 823/1000000
Preprocessor generated node count: 2100/1000000
Post‐expand include size: 13598/2097152 bytes
Template argument size: 7723/2097152 bytes
Highest expansion depth: 8/40
Expensive parser function count: 0/3
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%  571.039      1 - -total
 95.57%  545.731      3 - Template:GitHubEmbed
  2.65%   15.159      1 - Template:Learn
  2.35%   13.410      1 - Template:Menu
  2.09%   11.959      4 - Template:Submenu
  1.07%    6.117     39 - Template:MenuItem
  0.73%    4.163      3 - Template:GitHub
  0.58%    3.291      2 - Template:Ambox
  0.56%    3.208      1 - Template:Warning
  0.48%    2.756      1 - Template:Notice
-->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="index.php?title=Jython_Scripting&amp;oldid=41847">http://imagej.net/index.php?title=Jython_Scripting&amp;oldid=41847</a>"</div>
							</div>

			<div id="footer">
				<p> This page was last modified on 5 February 2020, at 13:06.</p><ul><li><a href="./ImageJ:Privacy_policy" title="ImageJ:Privacy policy">Privacy policy</a></li><li><a href="./ImageJ:About" class="mw-redirect" title="ImageJ:About">About ImageJ</a></li><li><a href="Imprint" title="Imprint">Imprint</a></li></ul>			</div>

			<div id="catlinks" class="catlinks catlinks-allhidden" data-mw="interface"></div>		</div>

		<div id="bottom-wrap">
		</div>
		<script>(window.RLQ=window.RLQ||[]).push(function(){mw.loader.load(["ext.fancytree","ext.suckerfish","ext.cite.a11y","mediawiki.toc","mediawiki.action.view.postEdit","site","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest","ext.SimpleTooltip"]);});</script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":811});});</script>
		</body>
		</html>
		