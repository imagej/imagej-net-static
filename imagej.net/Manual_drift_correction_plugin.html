<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8"/>
<title>Manual drift correction plugin - ImageJ</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Manual_drift_correction_plugin","wgTitle":"Manual drift correction plugin","wgCurRevisionId":36558,"wgRevisionId":36558,"wgArticleId":3449,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Plugins","Registration"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Manual_drift_correction_plugin","wgRelevantArticleId":3449,"wgRequestId":"d6d20ddda2a370b0e508609a","wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgPreferredVariant":"en","fancytree_path":"/extensions/TreeAndMenu/fancytree"});mw.loader.state({"site.styles":"ready","noscript":"ready","user.styles":"ready","user.cssprefs":"ready","user":"ready","user.options":"loading","user.tokens":"loading","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.sectionAnchor":"ready","skins.erudite":"ready"});mw.loader.implement("user.options@0j3lz3q",function($,jQuery,require,module){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens@1ku9xth",function ( $, jQuery, require, module ) {
mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});/*@nomin*/;

});mw.loader.load(["mediawiki.page.startup"]);});</script>
<link rel="stylesheet" href="erudite14.css"/>
<link rel="stylesheet" href="extensions/TreeAndMenu/fancytree/fancytree.css"/><link rel="stylesheet" href="extensions/TreeAndMenu/suckerfish/suckerfish.css"/>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="erudite15.css"/>
<meta name="generator" content="MediaWiki 1.28.0"/>
<meta name="description" content="Manual Drift Correction plugin allows to correct drift in an image sequence by using a few landmarks (Rois) gathered in the Roi Manager. The main interest of the plugin is that it avoid tedious annotation of the image by interpolating between key landmarks. Thus rather than providing input for each image of the sequence, the user only need to provide landmark when significant changes occure."/>
<link rel="shortcut icon" href="skins/ij2.ico"/>
	<meta property="og:type" content="article"/>

	<meta property="og:site_name" content="ImageJ"/>

	<meta property="og:title" content="Manual drift correction plugin"/>

	<meta property="og:description" content="Manual Drift Correction plugin allows to correct drift in an image sequence by using a few landmarks (Rois) gathered in the Roi Manager. The main interest of the plugin is that it avoid tedious annotation of the image by interpolating between key landmarks. Thus rather than providing input for each image of the sequence, the user only need to provide landmark when significant changes occure."/>


<meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Manual_drift_correction_plugin rootpage-Manual_drift_correction_plugin skin-erudite action-view">
		<div class="mw-jump">
			<a href="Manual_drift_correction_plugin.html#bodyContent">Skip to content</a>, 			<a href="Manual_drift_correction_plugin.html#search">Skip to search</a>
		</div>

		<div id="top-wrap" role="banner">
			<h1><a href="Welcome" title="ImageJ" rel="home">ImageJ</a></h1>
			<div id="tagline">From ImageJ</div>

			<a id="menubutton" href="Manual_drift_correction_plugin.html#menu">Menu</a>
			<div id="nav" role="navigation">
			<ul id='menu'>
<li id="menu-item-n-About"><a href="ImageJ">About</a></li>
<li id="menu-item-n-Downloads"><a href="Downloads">Downloads</a></li>
<li id="menu-item-n-Learn"><a href="Learn">Learn</a></li>
<li id="menu-item-n-Develop"><a href="Development">Develop</a></li>
<li id="menu-item-n-News"><a href="News">News</a></li>
<li id="menu-item-n-Events"><a href="Events">Events</a></li>
<li id="menu-item-n-Help"><a href="Help">Help</a></li>
</ul>
			</div>
		</div>

		<div id="mw-js-message"></div>
		
		<div id="main" role="main">

			<div id="bodyContent">
				<div style="font-size: large; border: 1px solid black; padding: 1em; margin-bottom: 1em; text-align: center; background-color: #fda;">
					This is a read-only version of imagej.net, available during the transition to a new site.
					<br>Please direct any questions or issues to <a href="https://forum.image.sc/t/imagej-wiki-is-down/39672">this Image.sc Forum thread</a>.
					<br>Thank you for your patience as we improve the website!
				</div>

				<h1>Manual drift correction plugin</h1>
				
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><table class="infobox" cellspacing="5" style="max-width: 31em; font-size: 90%; text-align: left; float: right; border: 1px solid #a0a0a0;">
<tr>
<th colspan="2" style="text-align: center; font-size: 130%;"> <div style="float: left"></div>Manual drift correction (Fiji)<div style="clear: left;"></div>
</th></tr>
<tr>
<th> Author
</th>
<td> <a href="./User:Benoit" title="User:Benoit">Benoit Lombardot</a>
</td></tr>




<tr>
<th> Maintainer
</th>
<td> <a href="./User:Benoit" title="User:Benoit">Benoit Lombardot</a>
</td></tr>

<tr>
<th> File
</th>
<td> <a href="./File:Manual_Drift_Correction-1.0.0.jar.zip" title="File:Manual Drift Correction-1.0.0.jar.zip">File:Manual Drift Correction-1.0.0.jar.zip</a>
</td></tr>
<tr>
<th> Source
</th>
<td> <a rel="nofollow" class="external text" href="https://github.com/mpicbg-scicomp/Manual_drift_correction">github</a>
</td></tr>
<tr>
<th> Initial release
</th>
<td> 22 March 2016
</td></tr>


<tr>
<th> Category
</th>
<td> <a href="./Category:Plugins" title="Category:Plugins">Plugins</a>, <a href="./Category:Registration" title="Category:Registration">Registration</a>
</td></tr>

</table>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="Manual_drift_correction_plugin.html#Goal_of_the_plugin"><span class="tocnumber">1</span> <span class="toctext">Goal of the plugin</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="Manual_drift_correction_plugin.html#Usage"><span class="tocnumber">2</span> <span class="toctext">Usage</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="Manual_drift_correction_plugin.html#Installation"><span class="tocnumber">2.1</span> <span class="toctext">Installation</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="Manual_drift_correction_plugin.html#Tutorial"><span class="tocnumber">2.2</span> <span class="toctext">Tutorial</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="Manual_drift_correction_plugin.html#Limitations"><span class="tocnumber">2.3</span> <span class="toctext">Limitations</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-6"><a href="Manual_drift_correction_plugin.html#Processing_description"><span class="tocnumber">3</span> <span class="toctext">Processing description</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="Manual_drift_correction_plugin.html#Development_plan"><span class="tocnumber">4</span> <span class="toctext">Development plan</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Goal_of_the_plugin">Goal of the plugin</span></h2>
<p>Manual Drift Correction plugin allows to correct drift in an image sequence by using a few landmarks (Rois) gathered in the Roi Manager. The main interest of the plugin is that it avoid tedious annotation of the image by interpolating between key landmarks. Thus rather than providing input for each image of the sequence, the user only need to provide landmark when significant changes occure.
</p>
<h2><span class="mw-headline" id="Usage">Usage</span></h2>
<h3><span class="mw-headline" id="Installation">Installation</span></h3>
<p>To get started with the plugin first  download it (<a href="./File:Manual_Drift_Correction-1.0.0.jar.zip" title="File:Manual Drift Correction-1.0.0.jar.zip">File:Manual Drift Correction-1.0.0.jar.zip</a>), unzip it and install it (Fiji menu Plugins&gt;Install...). Alternatively you can manually copy the unzipped file in &lt;Fiji folder&gt;/plugins.Once the file is installed, restart Fiji. A new entry will be available in the menu Plugins&gt;Registration&gt;Manual drift correction meaning that the plugin was properly installed.
</p>
<h3><span class="mw-headline" id="Tutorial">Tutorial</span></h3>
<p>To perform Manual drift correction:
</p>
<ol><li> Open Fiji and load the sequence to correct</li>
<li> Browsing through the image of the sequence, select some landmarks that will be visible throughout the time sequence.</li>
<li> Starting from the first timesteps annotate these landmark position with a ROI (point, line or polyline) and add them to the Roi Manager (this can be done by pressing the "t" on your keyboard).</li>
<li> Going further in time, repeat the previous step annotating the same landmark in the same order. Reapeat the operation till you covered the whole sequence.</li>
<li> If your image is an hyperstack check that the time dimension is properly set in image properties (menu Image&gt;Properties)</li>
<li> Set the time slider to the reference image (all other image of the stack will be registered to this one)</li>
<li> Click the menu Plugins&gt;Registration&gt;Manual drift correction. The registered stack will open in the Fiji UI.</li></ol>
<h3><span class="mw-headline" id="Limitations">Limitations</span></h3>
<p>The plugin can process stack and hyperstack. In the later case the registration is done along the time dimension. It means that z slices or channel at the same time step in the sequence will be transformed in the same way.
</p><p>Landmarks can be inputed with  Point, Line or Polyline Rois. If you use multiple landmarks at each time step they should be provided in the same order for each time step.
</p><p>The plugin also expects Landmarks to be provided to the Roi Manager in chronological order.
</p><p>Currently the plugin corrects drift only with 2D translation (but that could be updated in the future to 3D and other kind of global transformation)
</p>
<h2><span class="mw-headline" id="Processing_description">Processing description</span></h2>
<p>The plugin is relying on the <a rel="nofollow" class="external text" href="http://javadoc.imagej.net/MPI-CBG/">mpicbg library</a> that is part of Fiji distribution. This library is used for creating transformation from the landmarks and performing the actual transformation of the image.
</p><p>The processing is successively:
</p>
<ul><li> Grabbing the last selected image in Fiji UI, the current time of the sequence (i.e. visible in the viewer is used to define the reference image)</li>
<li> Collecting landmarks from the ROI manager,</li>
<li> Doing a linear interpolation of their 2D positions to create landmark where not provided. At the begining (end) of the sequence if no landmark is provdided and no interpolation can be done the postion of the first (last) provided landmark is used.</li>
<li> Then for each slice in the sequence:
<ul><li> A global transformation is created from current image landmarks and the reference image landmarks.</li>
<li> The image is then transformed to the reference image</li></ul></li>
<li> Finally the registered sequence is displayed in Fiji UI.</li></ul>
<h2><span class="mw-headline" id="Development_plan">Development plan</span></h2>
<p>This implementation could be improved. Here are a few feature that could be added:
</p>
<ul><li> Decouple UI and and actual registration pipeline. the current version is written in script style mixing UI and processing.</li>
<li> Allow to choose the interpolation between landmark.</li>
<li> Allow to choose the transformation model (as provided by MPI-CBG library).</li>
<li> Output transformations for analysis purpose.</li>
<li> Allow to choose the dimension along which to register (Z, time or channel).</li></ul>

<!-- 
NewPP limit report
Cached time: 20200713072935
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.036 seconds
Real time usage: 0.038 seconds
Preprocessor visited node count: 95/1000000
Preprocessor generated node count: 555/1000000
Post‐expand include size: 986/2097152 bytes
Template argument size: 513/2097152 bytes
Highest expansion depth: 3/40
Expensive parser function count: 0/3
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%    4.944      1 - Template:Infobox
100.00%    4.944      1 - -total
-->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="index.php?title=Manual_drift_correction_plugin&amp;oldid=36558">http://imagej.net/index.php?title=Manual_drift_correction_plugin&amp;oldid=36558</a>"</div>
							</div>

			<div id="footer">
				<p> This page was last modified on 2 November 2017, at 04:29.</p><ul><li><a href="./ImageJ:Privacy_policy" title="ImageJ:Privacy policy">Privacy policy</a></li><li><a href="./ImageJ:About" class="mw-redirect" title="ImageJ:About">About ImageJ</a></li><li><a href="Imprint" title="Imprint">Imprint</a></li></ul>			</div>

			<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="./Special:Categories" title="Special:Categories">Categories</a>: <ul><li><a href="./Category:Plugins" title="Category:Plugins">Plugins</a></li><li><a href="./Category:Registration" title="Category:Registration">Registration</a></li></ul></div></div>		</div>

		<div id="bottom-wrap">
			<div id="footer-wrap-inner">
				<div id="ternary" class="footer">
					<ul>
						<li class="widget">
							<img id="logo" src="skins/imagej-128.png" alt="">
						</li>
					</ul>
				</div>
			</div>
		</div>
		<script>(window.RLQ=window.RLQ||[]).push(function(){mw.loader.load(["ext.fancytree","ext.suckerfish","mediawiki.toc","mediawiki.action.view.postEdit","site","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest","ext.SimpleTooltip"]);});</script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":309});});</script>
		</body>
		</html>
		