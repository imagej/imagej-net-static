<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8"/>
<title>Tips for developers - ImageJ</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Tips_for_developers","wgTitle":"Tips for developers","wgCurRevisionId":41402,"wgRevisionId":41402,"wgArticleId":204,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Tips_for_developers","wgRelevantArticleId":204,"wgRequestId":"5840aab9c7415c2c7a4ccfa3","wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgPreferredVariant":"en","fancytree_path":"/extensions/TreeAndMenu/fancytree"});mw.loader.state({"site.styles":"ready","noscript":"ready","user.styles":"ready","user.cssprefs":"ready","user":"ready","user.options":"loading","user.tokens":"loading","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.sectionAnchor":"ready","skins.erudite":"ready"});mw.loader.implement("user.options@0j3lz3q",function($,jQuery,require,module){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens@1ku9xth",function ( $, jQuery, require, module ) {
mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});/*@nomin*/;

});mw.loader.load(["mediawiki.page.startup"]);});</script>
<link rel="stylesheet" href="load.php%3Fdebug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%252Cshared%257Cmediawiki.sectionAnchor%257Cskins.erudite&amp;only=styles&amp;skin=erudite.css"/>
<script async="" src="load.php%3Fdebug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=erudite"></script>
<link rel="stylesheet" href="extensions/TreeAndMenu/fancytree/fancytree.css"/><link rel="stylesheet" href="extensions/TreeAndMenu/suckerfish/suckerfish.css"/>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="load.php%3Fdebug=false&amp;lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=erudite.css"/>
<meta name="generator" content="MediaWiki 1.28.0"/>
<meta name="description" content="An unsorted list of hints that you might find useful:"/>
<link rel="shortcut icon" href="skins/ij2.ico"/>

<script type="text/javascript" src="extensions/SyntaxHighlighter/syntaxhighlighter/scripts/shCore.js"></script>
<script type="text/javascript" src="extensions/SyntaxHighlighter/syntaxhighlighter/scripts/shBrushBash.js"></script>
<script type="text/javascript" src="extensions/SyntaxHighlighter/syntaxhighlighter/scripts/shBrushJava.js"></script>
<script type="text/javascript">
SyntaxHighlighter.all();
</script>
<link rel="stylesheet" type="text/css" media="screen" href="extensions/SyntaxHighlighter/syntaxhighlighter/styles/shCoreMinit.css" />

	<meta property="og:type" content="article"/>

	<meta property="og:site_name" content="ImageJ"/>

	<meta property="og:title" content="Tips for developers"/>

	<meta property="og:description" content="An unsorted list of hints that you might find useful:"/>


<meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Tips_for_developers rootpage-Tips_for_developers skin-erudite action-view">
		<div class="mw-jump">
			<a href="Tips_for_developers.html#bodyContent">Skip to content</a>, 			<a href="Tips_for_developers.html#search">Skip to search</a>
		</div>

		<div id="top-wrap" role="banner">
			<h1><a href="Welcome" title="ImageJ" rel="home">ImageJ</a></h1>
			<div id="tagline">From ImageJ</div>

			<a id="menubutton" href="Tips_for_developers.html#menu">Menu</a>
			<div id="nav" role="navigation">
			<ul id='menu'>
<li id="menu-item-n-About"><a href="ImageJ">About</a></li>
<li id="menu-item-n-Downloads"><a href="Downloads">Downloads</a></li>
<li id="menu-item-n-Learn"><a href="Learn">Learn</a></li>
<li id="menu-item-n-Develop"><a href="Development">Develop</a></li>
<li id="menu-item-n-News"><a href="News">News</a></li>
<li id="menu-item-n-Events"><a href="Events">Events</a></li>
<li id="menu-item-n-Help"><a href="Help">Help</a></li>
</ul>
			</div>
		</div>

		<div id="mw-js-message"></div>
		
		<div id="main" role="main">
			<div id="nav-meta">
			<span id="ca-nstab-main" class="selected"><a href="Tips_for_developers" title="View the content page [c]" accesskey="c">Page</a></span><span class="meta-sep">|</span><span id="ca-talk" class="new"><a href="index.php?title=Talk:Tips_for_developers&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page [t]" accesskey="t">Discussion</a></span><span class="meta-sep">|</span><span id="ca-viewsource"><a href="index.php?title=Tips_for_developers&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span><span class="meta-sep">|</span><span id="ca-history"><a href="index.php?title=Tips_for_developers&amp;action=history" title="Past revisions of this page [h]" accesskey="h">History</a></span><span class="meta-sep">|</span>			</div>

			<div id="bodyContent">
				<h1>Tips for developers</h1>
				
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><table class="infobox" cellspacing="5" style="text-align: left; float: right; border: 1px solid #a0a0a0; font-size: 80%;">
<tr>
<th colspan="2" style="font-size: 130%;">  Development
</th></tr>
<tr>
<td>
</td></tr>
<tr>
<td>
<table class="infobox mw-collapsible mw-collapsed" cellspacing="5" data-collapsetext="-" data-expandtext="+" style="width: 100%; text-align: left; border-top: 1px solid #336699; border-right: none; border-left: none; border-bottom: none;">
<tr>
<th>  Topics
</th></tr>


<tr>
<td>  <a href="Development" title="Development">Overview</a>
</td></tr>
<tr>
<td>  <a href="Philosophy" title="Philosophy">Philosophy</a>
</td></tr>
<tr>
<td>  <a href="Architecture" title="Architecture">Architecture</a>
</td></tr>
<tr>
<td>  <a href="Source_code" title="Source code">Source code</a>
</td></tr>
<tr>
<td>  <a href="Project_management" title="Project management">Project management</a>
</td></tr>
<tr>
<td>  <a href="Coding_style" title="Coding style">Coding style</a>
</td></tr>
<tr>
<td>  <a href="Debugging" title="Debugging">Debugging</a>
</td></tr></table>
</td></tr>
<tr>
<td>
<table class="infobox mw-collapsible mw-collapsed" cellspacing="5" data-collapsetext="-" data-expandtext="+" style="width: 100%; text-align: left; border-top: 1px solid #336699; border-right: none; border-left: none; border-bottom: none;">
<tr>
<th>  Tools
</th></tr>


<tr>
<td>  <a href="GitHub" title="GitHub">GitHub</a>
</td></tr>
<tr>
<td>  <a href="Git" title="Git">Git</a>
</td></tr>
<tr>
<td>  <a href="Maven" title="Maven">Maven</a>
</td></tr>
<tr>
<td>  <a href="IDEs" title="IDEs">IDEs</a>
</td></tr>
<tr>
<td>  <a href="Travis" title="Travis">Travis</a>
</td></tr>
<tr>
<td>  <a href="AppVeyor" title="AppVeyor">AppVeyor</a>
</td></tr>
<tr>
<td>  <a href="Dotfiles" title="Dotfiles">Dotfiles</a>
</td></tr></table>
</td></tr>
<tr>
<td>
<table class="infobox mw-collapsible" cellspacing="5" data-collapsetext="-" data-expandtext="+" style="width: 100%; text-align: left; border-top: 1px solid #336699; border-right: none; border-left: none; border-bottom: none;">
<tr>
<th>  Guides
</th></tr>


<tr>
<td>  <a href="Writing_plugins" title="Writing plugins">Writing plugins</a>
</td></tr>
<tr>
<td>  <a href="ImageJ_Ops" title="ImageJ Ops">ImageJ Ops</a>
</td></tr>
<tr>
<td>  <a href="How_to_contribute_to_an_existing_plugin_or_library" title="How to contribute to an existing plugin or library">Contributing to a plugin</a>
</td></tr>
<tr>
<td>  <a href="Distribution" title="Distribution">Distributing your plugins</a>
</td></tr>
<tr>
<td>  <a href="Development_Lifecycle" title="Development Lifecycle">Development lifecycle</a>
</td></tr>
<tr>
<td>  <a href="Building_a_POM" title="Building a POM">Building a POM</a>
<hr />
</td></tr>
<tr>
<td>  <a href="Developing_ImageJ_in_Eclipse" title="Developing ImageJ in Eclipse">Developing with Eclipse</a>
</td></tr>
<tr>
<td>  <a href="Debugging_Exercises" title="Debugging Exercises">Hands-on debugging</a>
</td></tr>
<tr>
<td>  <a href="Adding_new_ops" title="Adding new ops">Adding new ops</a>
</td></tr>
<tr>
<td>  <a href="Adding_new_formats" title="Adding new formats">Adding new formats</a>
</td></tr>
<tr>
<td>  <a href="Developing_using_native_libraries" title="Developing using native libraries">Using native libraries</a>
</td></tr>
<tr>
<td>  <strong class="selflink">Tips for developers</strong>
</td></tr>
<tr>
<td>  <a href="Tips_for_C%2B%2B_developers" title="Tips for C++ developers">Tips for C++ developers</a>
</td></tr>
<tr>
<td>  <a href="Introduction_into_Developing_Plugins" class="mw-redirect" title="Introduction into Developing Plugins">ImageJ 1.x plugins</a>
</td></tr>
<tr>
<td>  <a href="Versioning" title="Versioning">Versioning</a>
</td></tr>
<tr>
<td>  <a href="Logging" title="Logging">Logging</a>
</td></tr>
<tr>
<td>  <a href="Uber-JAR" title="Uber-JAR">Uber-JARs</a>
</td></tr></table>
</td></tr></table>
<p>An unsorted list of hints that you might find useful:
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="Tips_for_developers.html#Compile_.26_Execute_a_Class"><span class="tocnumber">1</span> <span class="toctext">Compile &amp; Execute a Class</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="Tips_for_developers.html#Rapidly_Prototype_a_Plugin"><span class="tocnumber">2</span> <span class="toctext">Rapidly Prototype a Plugin</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="Tips_for_developers.html#Find_the_.jar_File_Containing_a_Certain_Class"><span class="tocnumber">3</span> <span class="toctext">Find the .jar File Containing a Certain Class</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="Tips_for_developers.html#Using_ImageJ_Effectively"><span class="tocnumber">4</span> <span class="toctext">Using ImageJ Effectively</span></a>
<ul>
<li class="toclevel-2 tocsection-5"><a href="Tips_for_developers.html#How_to_read_a_file_into_an_ImagePlus"><span class="tocnumber">4.1</span> <span class="toctext">How to read a file into an ImagePlus</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="Tips_for_developers.html#How_to_get_the_current_image"><span class="tocnumber">4.2</span> <span class="toctext">How to get the current image</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="Tips_for_developers.html#Making_a_new_image_stack_--_quickly.21"><span class="tocnumber">4.3</span> <span class="toctext">Making a new image stack -- quickly!</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="Tips_for_developers.html#How_to_display_an_exception_in_a_window"><span class="tocnumber">4.4</span> <span class="toctext">How to display an exception in a window</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="Tips_for_developers.html#How_to_show_a_plot"><span class="tocnumber">4.5</span> <span class="toctext">How to show a plot</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="Tips_for_developers.html#Duplicate.2C_or_convert_between.2C_ImageProcessor_types"><span class="tocnumber">4.6</span> <span class="toctext">Duplicate, or convert between, <i>ImageProcessor</i> types</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="Tips_for_developers.html#How_to_store_settings_persistently"><span class="tocnumber">4.7</span> <span class="toctext">How to store settings persistently</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="Tips_for_developers.html#How_to_turn_a_number_into_a_string.2C_using_a_given_number_of_decimal_places"><span class="tocnumber">4.8</span> <span class="toctext">How to turn a number into a string, using a given number of decimal places</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="Tips_for_developers.html#How_to_abort_a_plugin_completely"><span class="tocnumber">4.9</span> <span class="toctext">How to abort a plugin completely</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="Tips_for_developers.html#Interact_with_the_ROI_manager"><span class="tocnumber">4.10</span> <span class="toctext">Interact with the ROI manager</span></a></li>
<li class="toclevel-2 tocsection-15"><a href="Tips_for_developers.html#Show_a_results_table"><span class="tocnumber">4.11</span> <span class="toctext">Show a results table</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="Tips_for_developers.html#How_to_find_equivalent_API_commands_between_ImageJ1_and_ImageJ2.3F"><span class="tocnumber">4.12</span> <span class="toctext">How to find equivalent API commands between ImageJ1 and ImageJ2?</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-17"><a href="Tips_for_developers.html#Tips_for_Graphical_User_Interface_.28GUI.29_programming"><span class="tocnumber">5</span> <span class="toctext">Tips for Graphical User Interface (GUI) programming</span></a>
<ul>
<li class="toclevel-2 tocsection-18"><a href="Tips_for_developers.html#Programming_with_Swing_components"><span class="tocnumber">5.1</span> <span class="toctext">Programming with Swing components</span></a></li>
</ul>
</li>
</ul>
</div>

<h1><span class="mw-headline" id="Compile_.26_Execute_a_Class">Compile &amp; Execute a Class</span></h1>
<p>You do not need to call <code>javac</code> yourself with a long <i>classpath</i>:
</p>
<pre class="brush:bash">
$ ./fiji --javac YourClass.java
</pre>
<p>and you can call its <code>main()</code> method just as easy:
</p>
<pre class="brush:bash">
$ ./fiji YourClass.class argument1 argument2
</pre>
<h1><span class="mw-headline" id="Rapidly_Prototype_a_Plugin">Rapidly Prototype a Plugin</span></h1>
<p>It is often easier to start out with a Jython, JRuby or BeanShell script, as you do not have to care about strict typing, exceptions or recompiling.  Just place your script (with the correct extension -- .py, .rb or .bsh) into the plugins/ folder and execute the script.  Fiji will always execute the current version of the script, so you can edit and run the script without restarting Fiji.
</p><p>Of course, it is even more convenient to use the <a href="Script_Editor" class="mw-redirect" title="Script Editor">Script Editor</a>...
</p><p>Once you have working code, you can turn it into a proper plugin (this is easiest with BeanShell, as its syntax is closest to Java already), adding strict typing and exception handling as needed.
</p>
<h1><span class="mw-headline" id="Find_the_.jar_File_Containing_a_Certain_Class">Find the .jar File Containing a Certain Class</span></h1>
<p>Sometimes, the compiler complains about a class not having a certain method or interface, but you <i>know</i> it must contain it.  More often than not, that class exists in different versions in your classpath.  Find out with
</p>
<pre class="brush:bash">
$ ./fiji bin/find-jar-for-class.py the.class.youre.looking.For
</pre>
<p>If you want to do that with an installed Fiji (i.e. when bin/ is missing), you can start the <a href="Script_Editor" class="mw-redirect" title="Script Editor">Script Editor</a> and execute a BeanShell like this:
</p>
<pre class="brush:java">
 import ij.IJ;
         
 print(IJ.getClassLoader()
         .loadClass("the.class.youre.looking.For")
         .getResource("For.class").toString());
</pre>
<p>This will output the URL to the <i>.class</i> file, including the path to the enclosing <i>.jar</i> file.
</p>
<h1><span class="mw-headline" id="Using_ImageJ_Effectively">Using ImageJ Effectively</span></h1>
<p>ImageJ has a simple API, but it is also big, so here are a few pointers to some useful parts.
</p>
<h2><span class="mw-headline" id="How_to_read_a_file_into_an_ImagePlus">How to read a file into an ImagePlus</span></h2>
<pre class="brush:java">
 ImagePlus image = IJ.openImage(path);
</pre>
<h2><span class="mw-headline" id="How_to_get_the_current_image">How to get the current image</span></h2>
<pre class="brush:java">
ImagePlus img = WindowManager.getCurrentImage();  // current image
ImageProcessor ip = img.getProcessor();  // current slice
</pre>
<h2><span class="mw-headline" id="Making_a_new_image_stack_--_quickly.21">Making a new image stack -- quickly!</span></h2>
<pre class="brush:java">
 ImagePlus image = IJ.createImage("my image", "RGB", 640, 480, 20);
</pre>
<h2><span class="mw-headline" id="How_to_display_an_exception_in_a_window">How to display an exception in a window</span></h2>
<p>This is especially useful on Windows, where you usually do not see the console:
</p>
<pre class="brush:java">
 IJ.handleException(exception);
</pre>
<p>This is available since ImageJ 1.43g, as well as the option to set a different exception handler using
</p>
<pre class="brush:java">
 IJ.setExceptionHandler(new IJ.ExceptionHandler() {
    public void handle(Throwable exception) {
       // do something
    }
 });
</pre>
<h2><span class="mw-headline" id="How_to_show_a_plot">How to show a plot</span></h2>
<p>ImageJ offers the <code>ij.gui.Plot</code> class to make a window showing a plot. Use it like this:
</p>
<pre class="brush:java">
Plot plot = new Plot("The window title", "labels on the x-axis", "labels on the y-axis",
    float_array_of_x_values, float_array_of_y_values);
plot.show();
</pre>
<p>Instead of <i>float</i> arrays, you can also use <i>double</i> arrays.
</p><p>If you need to update the plot at some stage, you need to save the return value of <i>show()</i>:
</p>
<pre class="brush:java">
Plot plot = new Plot("The window title", "labels on the x-axis", "labels on the y-axis",
    float_array_of_x_values, float_array_of_y_values);
PlotWindow window = plot.show();
// ...
Plot update = new Plot("Dummy", "x labels", "y labels", x_values, y_values);
window.drawPlot(update);
</pre>
<p>To add another plot to the same window, use the <code>addPoints()</code> method:
</p>
<pre class="brush:java">
plot.addPoints(float_array_of_x_values, float_array_of_y_values, Plot.LINE);
</pre>
<p>The plots can be drawn in different colors like this:
</p>
<pre class="brush:java">
Plot plot = new Plot("The window title", "labels on the x-axis", "labels on the y-axis",
    float_array_of_x_values, float_array_of_y_values);
plot.setColor(Color.RED);
plot.draw();
plot.addPoints(float_array_of_x_values, another_float_array_of_y_values, Plot.LINE);
plot.setColor(Color.BLUE);
plot.draw();
</pre>
<p>You might need to adjust the bounding box if the second plot does not match the bounding box of the first one by using the <code>setLimits()</code> method before the call to <code>plot.draw();</code>
</p>
<h2><span class="mw-headline" id="Duplicate.2C_or_convert_between.2C_ImageProcessor_types">Duplicate, or convert between, <i>ImageProcessor</i> types</span></h2>
<p>The <code>ImageProcessor</code> class has several useful methods: <a rel="nofollow" class="external text" href="https://fiji.sc/javadoc/ij/process/ImageProcessor.html#duplicate()">duplicate()</a>, <a rel="nofollow" class="external text" href="https://fiji.sc/javadoc/ij/process/ImageProcessor.html#convertToByte(boolean)">convertToByte()</a>, <a rel="nofollow" class="external text" href="https://fiji.sc/javadoc/ij/process/ImageProcessor.html#convertToFloat()">convertToFloat()</a>,
<a rel="nofollow" class="external text" href="https://fiji.sc/javadoc/ij/process/ImageProcessor.html#convertToRGB()">convertToRGB()</a>, and <a rel="nofollow" class="external text" href="https://fiji.sc/javadoc/ij/process/ImageProcessor.html#convertToShort(boolean)">convertToShort()</a>.
</p><p>This <a rel="nofollow" class="external text" href="https://fiji.sc/javadoc/ij/process/ImageProcessor.html">class</a> also has some other goodies, such as methods for convolution.
</p>
<h2><span class="mw-headline" id="How_to_store_settings_persistently">How to store settings persistently</span></h2>
<p>ImageJ (and therefore Fiji, too) has a way to store key/value pairs persistently, i.e. they are available even after a restart. The settings are stored in a file called <i>IJ_Prefs.txt</i> in the subdirectory called <i>.imagej/</i> in your home directory (on Windows, directly in your home directory; on Mac, in <i>~/Library/Preferences</i>).
</p><p><b>Note:</b> the settings are only saved upon <u>regular</u> exit of Fiji; If you kill the process, or if the Java Runtime crashes, they are <u>not</u> saved. You can ask for the settings to be saved explicitly, though.
</p><p>Example:
</p>
<pre class="brush:java">
import ij.Prefs;

...

    // save key/value pairs
    Prefs.set("my.persistent.name", "Grizzly Adams");
    Prefs.set("my.persistent.number", 10);

    ....

    // retrieve the values (with default values)
    int myNumber = Prefs.get("my.persistent.number", 0);

    // explicitly save the preferences _now_
    Prefs.savePreferences();
</pre>
<p><b>Note:</b> do <u>not</u> use the <code>getString()</code> or <code>getInt()</code>; These methods do not have any setter methods, and they do <u>not</u> access the same values as the <code>get()</code> method (<code>get()</code> actually prefixes the keys with a dot)!
</p>
<h2><span class="mw-headline" id="How_to_turn_a_number_into_a_string.2C_using_a_given_number_of_decimal_places">How to turn a number into a string, using a given number of decimal places</span></h2>
<p>Use the <code>d2s()</code> method of the <code>ij.IJ</code> class:
</p>
<pre class="brush:java">
String message = "The current temperature is " + IJ.d2s(degrees, 1) + "° Celsius";
</pre>
<h2><span class="mw-headline" id="How_to_abort_a_plugin_completely">How to abort a plugin completely</span></h2>
<p>Sometimes, you want to abort a plugin without catching an exception at the highest level(s), without having ImageJ show an exception window. You can do that:
</p>
<pre class="brush:java">
throw new RuntimeException(Macro.MACRO_CANCELED);
</pre>
<p>The special message <i>Macro.MACRO_CANCELED</i> will tell ImageJ not to show the exception message and stack trace in a text window.
</p>
<h2><span class="mw-headline" id="Interact_with_the_ROI_manager">Interact with the ROI manager</span></h2>
<p>To add ROIs to the ROI manager, do something like this:
</p>
<pre class="brush:java">
RoiManager manager = RoiManager.getInstance();
if (manager == null)
	manager = new RoiManager();
manager.addRoi(roi);
</pre>
<p>If you want to add the ROI with a slice label, you have to jump through a hoop:
</p>
<pre class="brush:java">
int currentSlice = image.getCurrentSlice();
RoiManager manager = RoiManager.getInstance();
if (manager == null)
	manager = new RoiManager();
// the first slice is 1 (not 0)
image.setSliceWithoutUpdate(slice);
manager.add(image, rois[i], slice);
image.setSlice(currentSlice);
</pre>
<p>To retrieve all ROIs from the ROI manager, do this:
</p>
<pre class="brush:java">
RoiManager manager = RoiManager.getInstance();
if (manager&#160;!= null) {
	Hashtable&lt;String, Roi&gt; table =
		(Hashtable&lt;String, Roi&gt;)manager.getROIs();
	for (String label&#160;: table.keySet()) {
		int slice = manager.getSliceNumber(label);
		Roi roi = table.get(label);
		... &lt;do something with the ROI and the slice&gt; ...
	}
}
</pre>
<p>If you need to preserve the order of the ROIs in the ROI manager, unfortunately you'll have to access the AWT listbox:
</p>
<pre class="brush:java">
import java.awt.List;
...
RoiManager manager = RoiManager.getInstance();
if (manager&#160;!= null) {
	List labels = manager.getList();
	Hashtable&lt;String, Roi&gt; table = (Hashtable&lt;String, Roi&gt;)manager.getROIs();
	for (int i = 0; i &lt; labels.getItemCount(); i++) {
		String label = labels.getItem(i);
		int slice = manager.getSliceNumber(label);
		Roi roi = table.get(label);
		... &lt;do something with the ROI and the slice&gt; ...
	}
}
</pre>
<p>To get just the selected ROIs, use code similar to this:
</p>
<pre class="brush:java">
import java.awt.List;
...
RoiManager manager = RoiManager.getInstance();
if (manager&#160;!= null) {
	String[] labels = manager.getList().getSelectedItems();
	Hashtable&lt;String, Roi&gt; table = (Hashtable&lt;String, Roi&gt;)manager.getROIs();
	for (String label&#160;: labels) {
		int slice = manager.getSliceNumber(label);
		Roi roi = table.get(label);
		... &lt;do something with the ROI and the slice&gt; ...
	}
}
</pre>
<h2><span class="mw-headline" id="Show_a_results_table">Show a results table</span></h2>
<p>First you need to get the results table instance (or create one):
</p>
<pre class="brush:java">
ResultsTable rt = Analyzer.getResultsTable();
if (rt == null) {
        rt = new ResultsTable();
        Analyzer.setResultsTable(rt);
}
</pre>
<p>Then you can add a new row:
</p>
<pre class="brush:java">
rt.incrementCounter();
</pre>
<p>... and add entries by column label:
</p>
<pre class="brush:java">
rt.addValue("slice", slice);
rt.addValue("bratwurst", -1);
</pre>
<p><b>Finally</b> make sure that the result table is displayed/updated:
</p>
<pre class="brush:java">
rt.show("Results");
</pre>
<h2><span class="mw-headline" id="How_to_find_equivalent_API_commands_between_ImageJ1_and_ImageJ2.3F">How to find equivalent API commands between ImageJ1 and ImageJ2?</span></h2>
<p><a href="ImageJ1-ImageJ2_cheat_sheet" title="ImageJ1-ImageJ2 cheat sheet">ImageJ1-ImageJ2 cheat sheet</a> is available.
</p>
<h1><span class="mw-headline" id="Tips_for_Graphical_User_Interface_.28GUI.29_programming">Tips for Graphical User Interface (GUI) programming</span></h1>
<h2><span class="mw-headline" id="Programming_with_Swing_components">Programming with Swing components</span></h2>
<p>When programming with Swing, beware that Swing is not thread safe. Swing's golden rule states that:
</p>
<dl><dd><i>Once a Swing component has been realized, all code that might affect or depend on the state of that component should be executed in the event-dispatching thread.</i></dd></dl>
<p>When has a Swing component been realized? When it is visible inside Window or <i>JFrame</i> that got a call to <code>setVisible(true)</code>. This implies that its <code>paint(Graphics)</code> method has been called or will be called soon.
</p><p>These are the methods that can realize a component, or rather, methods called on a <i>Window</i> or <i>Frame</i> or <i>JFrame</i> that will realize all its children components:
</p>
<pre class="brush:java">
setVisible(true)
show()
pack() // this might surprise you
</pre>
<p>There is a class which helps you with all this: <a rel="nofollow" class="external text" href="http://download.oracle.com/javase/6/docs/api/javax/swing/SwingUtilities.html">SwingUtilities</a>. Example: to call <code>pack()</code> from within the constructor (which might or might not be called from the Event Dispatch Thread):
</p>
<pre class="brush:java">
if (SwingUtilities.isEventDispatchThread())
	pack();
else try {
	SwingUtilities.invokeAndWait(new Runnable() { public void run() {
		pack();
	}});
} catch (Exception e) { /* ignore */ }
</pre>
<p>Information extracted from the <a rel="nofollow" class="external text" href="http://web.archive.org/web/20120801194837/http://java.sun.com/products/jfc/tsc/articles/threads/threads1.html">Swing guide</a> (now only available from via web.archive.org as Oracle removed the original docs), additional information can be found in the <a rel="nofollow" class="external text" href="http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html">Concurrency in Swing</a> lesson of <i>The Java Tutorials</i>.
</p>
<!-- 
NewPP limit report
Cached time: 20200713074005
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.028 seconds
Real time usage: 0.028 seconds
Preprocessor visited node count: 545/1000000
Preprocessor generated node count: 1156/1000000
Post‐expand include size: 6817/2097152 bytes
Template argument size: 3739/2097152 bytes
Highest expansion depth: 8/40
Expensive parser function count: 0/3
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%   12.131      1 - Template:DevelopMenu
100.00%   12.131      1 - -total
 87.25%   10.584      1 - Template:Menu
 76.87%    9.325      3 - Template:Submenu
 38.83%    4.711     31 - Template:MenuItem
-->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="index.php?title=Tips_for_developers&amp;oldid=41402">http://imagej.net/index.php?title=Tips_for_developers&amp;oldid=41402</a>"</div>
							</div>

			<div id="footer">
				<p> This page was last modified on 24 January 2020, at 11:56.</p><ul><li><a href="./ImageJ:Privacy_policy" title="ImageJ:Privacy policy">Privacy policy</a></li><li><a href="./ImageJ:About" class="mw-redirect" title="ImageJ:About">About ImageJ</a></li><li><a href="Imprint" title="Imprint">Imprint</a></li><li><a href="index.php?title=Tips_for_developers&amp;mobileaction=toggle_view_mobile" class="noprint stopMobileRedirectToggle">Mobile view</a></li></ul>			</div>

			<div id="catlinks" class="catlinks catlinks-allhidden" data-mw="interface"></div>		</div>

		<div id="bottom-wrap">
		</div>
		<script>(window.RLQ=window.RLQ||[]).push(function(){mw.loader.load(["ext.fancytree","ext.suckerfish","mediawiki.toc","mediawiki.action.view.postEdit","site","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest","ext.SimpleTooltip"]);});</script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":212});});</script>
		</body>
		</html>
		