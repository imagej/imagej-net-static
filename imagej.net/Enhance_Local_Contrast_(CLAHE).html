<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8"/>
<title>Enhance Local Contrast (CLAHE) - ImageJ</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Enhance_Local_Contrast_(CLAHE)","wgTitle":"Enhance Local Contrast (CLAHE)","wgCurRevisionId":41235,"wgRevisionId":41235,"wgArticleId":689,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Plugins","Filtering"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Enhance_Local_Contrast_(CLAHE)","wgRelevantArticleId":689,"wgRequestId":"af0ed9d22c300298dcaf0424","wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgPreferredVariant":"en","fancytree_path":"/extensions/TreeAndMenu/fancytree"});mw.loader.state({"site.styles":"ready","noscript":"ready","user.styles":"ready","user.cssprefs":"ready","user":"ready","user.options":"loading","user.tokens":"loading","ext.cite.styles":"ready","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.sectionAnchor":"ready","skins.erudite":"ready"});mw.loader.implement("user.options@0j3lz3q",function($,jQuery,require,module){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens@1ku9xth",function ( $, jQuery, require, module ) {
mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});/*@nomin*/;

});mw.loader.load(["mediawiki.page.startup"]);});</script>
<link rel="stylesheet" href="load.php%3Fdebug=false&amp;lang=en&amp;modules=ext.cite.styles%257Cmediawiki.legacy.commonPrint%252Cshared%257Cmediawiki.sectionAnchor%257Cskins.erudite&amp;only=styles&amp;skin=erudite.css"/>
<script async="" src="load.php%3Fdebug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=erudite"></script>
<link rel="stylesheet" href="extensions/TreeAndMenu/fancytree/fancytree.css"/><link rel="stylesheet" href="extensions/TreeAndMenu/suckerfish/suckerfish.css"/>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="load.php%3Fdebug=false&amp;lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=erudite.css"/>
<meta name="generator" content="MediaWiki 1.28.0"/>
<meta name="description" content="The plugin Enhance Local Contrast (CLAHE) implements the method Contrast Limited Adaptive Histogram Equalization&amp;#91;1&amp;#93;&#10;for enhancing the local contrast of an image.  In Fiji, it is called through the menu entry Process / Enhance Local Contrast (CLAHE).  The filter respects the selected regions of interest and triggers an Undo-step."/>
<link rel="shortcut icon" href="skins/ij2.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="opensearch_desc.php" title="ImageJ (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="api.php?action=rsd"/>
<link rel="alternate" type="application/atom+xml" title="ImageJ Atom feed" href="index.php?title=Special:RecentChanges&amp;feed=atom"/>

<script type="text/javascript" src="extensions/SyntaxHighlighter/syntaxhighlighter/scripts/shCore.js"></script>
<script type="text/javascript" src="extensions/SyntaxHighlighter/syntaxhighlighter/scripts/shBrushJava.js"></script>
<script type="text/javascript">
SyntaxHighlighter.all();
</script>
<link rel="stylesheet" type="text/css" media="screen" href="extensions/SyntaxHighlighter/syntaxhighlighter/styles/shCoreMinit.css" />

	<meta property="og:type" content="article"/>

	<meta property="og:site_name" content="ImageJ"/>

	<meta property="og:title" content="Enhance Local Contrast (CLAHE)"/>

	<meta property="og:description" content="The plugin Enhance Local Contrast (CLAHE) implements the method Contrast Limited Adaptive Histogram Equalization&amp;#91;1&amp;#93;&#10;for enhancing the local contrast of an image.  In Fiji, it is called through the menu entry Process / Enhance Local Contrast (CLAHE).  The filter respects the selected regions of interest and triggers an Undo-step."/>


<meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Enhance_Local_Contrast_CLAHE rootpage-Enhance_Local_Contrast_CLAHE skin-erudite action-view">
		<div class="mw-jump">
			<a href="Enhance_Local_Contrast_(CLAHE).html#bodyContent">Skip to content</a>, 			<a href="Enhance_Local_Contrast_(CLAHE).html#search">Skip to search</a>
		</div>

		<div id="top-wrap" role="banner">
			<h1><a href="Welcome" title="ImageJ" rel="home">ImageJ</a></h1>
			<div id="tagline">From ImageJ</div>

			<a id="menubutton" href="Enhance_Local_Contrast_(CLAHE).html#menu">Menu</a>
			<div id="nav" role="navigation">
			<ul id='menu'>
<li id="menu-item-n-About"><a href="ImageJ">About</a></li>
<li id="menu-item-n-Downloads"><a href="Downloads">Downloads</a></li>
<li id="menu-item-n-Learn"><a href="Learn">Learn</a></li>
<li id="menu-item-n-Develop"><a href="Development">Develop</a></li>
<li id="menu-item-n-News"><a href="News">News</a></li>
<li id="menu-item-n-Events"><a href="Events">Events</a></li>
<li id="menu-item-n-Help"><a href="Help">Help</a></li>
</ul>
			</div>
		</div>

		<div id="mw-js-message"></div>
		
		<div id="main" role="main">
			<div id="nav-meta">
			<span id="ca-nstab-main" class="selected"><a href="Enhance_Local_Contrast_(CLAHE)" title="View the content page [c]" accesskey="c">Page</a></span><span class="meta-sep">|</span><span id="ca-talk" class="new"><a href="index.php?title=Talk:Enhance_Local_Contrast_(CLAHE)&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page [t]" accesskey="t">Discussion</a></span><span class="meta-sep">|</span><span id="ca-viewsource"><a href="index.php?title=Enhance_Local_Contrast_(CLAHE)&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span><span class="meta-sep">|</span><span id="ca-history"><a href="index.php?title=Enhance_Local_Contrast_(CLAHE)&amp;action=history" title="Past revisions of this page [h]" accesskey="h">History</a></span><span class="meta-sep">|</span>			</div>

			<div id="bodyContent">
				<h1>Enhance Local Contrast (CLAHE)</h1>
				
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="thumb tleft"><div class="thumbinner" style="width:363px;"><a href="File:Tem.jpg" class="image"><img alt="" src="_images/2/2a/Tem.jpg" width="361" height="254" class="thumbimage" /></a>  <div class="thumbcaption"><div class="magnify"><a href="File:Tem.jpg" class="internal" title="Enlarge"></a></div>TEM original image</div></div></div>
<div class="thumb tright"><div class="thumbinner" style="width:363px;"><a href="File:Tem-clahe-50-256-2.5.jpg" class="image"><img alt="" src="_images/f/f3/Tem-clahe-50-256-2.5.jpg" width="361" height="254" class="thumbimage" /></a>  <div class="thumbcaption"><div class="magnify"><a href="File:Tem-clahe-50-256-2.5.jpg" class="internal" title="Enlarge"></a></div>TEM CLAHE processed, (block: 50; bins: 256; max slope: 2.5)</div></div></div>
<div style="clear:both"></div>
<table class="infobox" cellspacing="5" style="max-width: 31em; font-size: 90%; text-align: left; float: right; border: 1px solid #a0a0a0;">
<tr>
<th colspan="2" style="text-align: center; font-size: 130%;"> <div style="float: left"></div>Enhance Local Contrast (CLAHE) (Fiji)<div style="clear: left;"></div>
</th></tr>
<tr>
<th> Author
</th>
<td> <a href="User:Saalfeld" class="mw-redirect" title="User:Saalfeld">Stephan Saalfeld</a> (<a rel="nofollow" class="external autonumber" href="mailto:saalfeld@mpi-cbg.de">[1]</a>)
</td></tr>




<tr>
<th> Maintainer
</th>
<td> <a href="User:Saalfeld" class="mw-redirect" title="User:Saalfeld">Stephan Saalfeld</a>
</td></tr>


<tr>
<th> Source
</th>
<td> <a rel="nofollow" class="external autonumber" href="https://github.com/axtimwalde/mpicbg/tree/master/mpicbg/src/main/java/mpicbg/ij/clahe">[2]</a>
</td></tr>
<tr>
<th> Initial release
</th>
<td> November 13<sup>th</sup>, 2009
</td></tr>
<tr>
<th> Latest version
</th>
<td> September 1<sup>st</sup>, 2010
</td></tr>
<tr>
<th> Development status
</th>
<td> stable, active
</td></tr>
<tr>
<th> Category
</th>
<td> <a href="Category:Plugins" title="Category:Plugins">Plugins</a>, <a href="Category:Filtering" title="Category:Filtering">Filtering</a>
</td></tr>

</table>
<p><br />
The plugin <b>Enhance Local Contrast (CLAHE)</b> implements the method <i><a href="http://en.wikipedia.org/wiki/CLAHE" class="extiw" title="wikipedia:CLAHE">Contrast Limited Adaptive Histogram Equalization</a></i><sup id="cite_ref-1" class="reference"><a href="Enhance_Local_Contrast_(CLAHE).html#cite_note-1">&#91;1&#93;</a></sup>
for enhancing the local contrast of an image.  In Fiji, it is called through the menu entry <b>Process / Enhance Local Contrast (CLAHE)</b>.  The filter respects the selected regions of interest and triggers an Undo-step.
</p><p>The method has three parameters:
</p>
<dl><dt>block size</dt>
<dd>the size of the local region around a pixel for which the histogram is equalized.  This size should be larger than the size of features to be preserved.</dd>
<dt>histogram bins</dt>
<dd>the number of histogram bins used for histogram equalization.  The implementation internally works with byte resolution, so values larger than 256 are not meaningful.  This value also limits the quantification of the output when processing 8bit gray or 24bit RGB images.  The number of histogram bins should be smaller than the number of pixels in a block.</dd>
<dt>max slope</dt>
<dd>limits the contrast stretch in the intensity transfer function.  Very large values will let the histogram equalization do whatever it wants to do, that is result in maximal local contrast.  The value 1 will result in the original image.</dd></dl>
<p>In addition, the PlugIn asks for:
</p>
<dl><dt>mask</dt>
<dd>choose, from the currently opened images, one that should be used as a mask for the filter application.  Selections and masks can be used exclusively or in combination.</dd>
<dt>fast</dt>
<dd>use the fast but less accurate version of the filter.  The fast version does not evaluate the intensity transfer function for each pixel independently but for a grid of adjacent boxes of the given <b>block size</b> only and interpolates for locations in between.</dd>
<dt>process as composite</dt>
<dd>images with multiple color channels can be processed in two modes
<dl><dt>checked</dt>
<dd>use the displayed image to estimate the intensity transfer that is then applied to all channels individually.  This is the desired mode for getting local contrast compression for color photographs with a higher bit-depth and higher dynamic range than appropriate for a digital display.</dd>
<dt>unchecked</dt>
<dd>the selected channel is processed individually.</dd></dl></dd></dl>
<div class="thumb tleft"><div class="thumbinner" style="width:363px;"><a href="File:Photo1.jpg" class="image"><img alt="" src="_images/c/cd/Photo1.jpg" width="361" height="162" class="thumbimage" /></a>  <div class="thumbcaption"><div class="magnify"><a href="File:Photo1.jpg" class="internal" title="Enlarge"></a></div>Photo1 original image</div></div></div>
<div class="thumb tright"><div class="thumbinner" style="width:363px;"><a href="File:Photo1-clahe-150-256-3.jpg" class="image"><img alt="" src="_images/e/e0/Photo1-clahe-150-256-3.jpg" width="361" height="162" class="thumbimage" /></a>  <div class="thumbcaption"><div class="magnify"><a href="File:Photo1-clahe-150-256-3.jpg" class="internal" title="Enlarge"></a></div>Photo1 CLAHE processed, (block: 150; bins: 256; max slope: 3)</div></div></div>
<div style="clear:both"></div>
<div class="thumb tleft"><div class="thumbinner" style="width:363px;"><a href="File:Photo3.jpg" class="image"><img alt="" src="_images/a/ad/Photo3.jpg" width="361" height="163" class="thumbimage" /></a>  <div class="thumbcaption"><div class="magnify"><a href="File:Photo3.jpg" class="internal" title="Enlarge"></a></div>Photo2 original image</div></div></div>
<div class="thumb tright"><div class="thumbinner" style="width:363px;"><a href="File:Photo3-clahe-50-256-3.jpg" class="image"><img alt="" src="_images/a/ab/Photo3-clahe-50-256-3.jpg" width="361" height="163" class="thumbimage" /></a>  <div class="thumbcaption"><div class="magnify"><a href="File:Photo3-clahe-50-256-3.jpg" class="internal" title="Enlarge"></a></div>Photo2 CLAHE processed, (block: 50; bins: 256; max slope: 3)</div></div></div>
<div style="clear:both"></div>
<h2><span class="mw-headline" id="Tips">Tips</span></h2>
<dl><dt>How can I process a series/stack of images?</dt>
<dd>Execute the following macro from <a rel="nofollow" class="external text" href="developer/macro/macros.html">ImageJ's macro editor</a> or <a href="Using_the_Script_Editor" title="Using the Script Editor">Fiji's scripting editor</a>:</dd></dl>
<pre class="brush:java">
blocksize = 127;
histogram_bins = 256;
maximum_slope = 3;
mask = "*None*";
fast = true;
process_as_composite = true;

getDimensions( width, height, channels, slices, frames );
isComposite = channels &gt; 1;
parameters =
  "blocksize=" + blocksize +
  " histogram=" + histogram_bins +
  " maximum=" + maximum_slope +
  " mask=" + mask;
if ( fast )
  parameters += " fast_(less_accurate)";
if ( isComposite &amp;&amp; process_as_composite ) {
  parameters += " process_as_composite";
  channels = 1;
}
  
for ( f=1; f&lt;=frames; f++ ) {
  Stack.setFrame( f );
  for ( s=1; s&lt;=slices; s++ ) {
    Stack.setSlice( s );
    for ( c=1; c&lt;=channels; c++ ) {
      Stack.setChannel( c );
      run( "Enhance Local Contrast (CLAHE)", parameters );
    }
  }
}
</pre>
<h2><span class="mw-headline" id="References">References</span></h2>
<ol class="references">
<li id="cite_note-1"><span class="mw-cite-backlink"><a href="Enhance_Local_Contrast_(CLAHE).html#cite_ref-1">↑</a></span> <span class="reference-text"><span class="Z3988" title="ctx_ver=Z39.88-2004&amp;rft_val_fmt=info%3Aofi%2Ffmt%3Akev%3Amtx%3Abook&amp;rft.genre=bookitem&amp;rft.atitle=Contrast+limited+adaptive+histogram+equalization&amp;rft.title=Graphics+gems+IV&amp;rft.aulast=Zuiderveld&amp;rft.aufirst=Karel&amp;rft.date=1994&amp;rft.pages=pp.+474%E2%80%93485&amp;rft.pub=Academic+Press+Professional%2C+Inc.&amp;rft_id=http%3A%2F%2Fportal.acm.org%2Fcitation.cfm%3Fid%3D180940"><cite id="CITEREFZuiderveld1994">Zuiderveld, Karel&#32;(1994),&#32;<a rel="nofollow" class="external text" href="http://portal.acm.org/citation.cfm?id=180940">"Contrast limited adaptive histogram equalization"</a>,&#32;<i>Graphics gems IV</i>, Academic Press Professional, Inc., pp. 474–485<span class="printonly">, &lt;<a rel="nofollow" class="external free" href="http://portal.acm.org/citation.cfm?id=180940">http://portal.acm.org/citation.cfm?id=180940</a>&gt;</span></cite></span> </span>
</li>
</ol>

<!-- 
NewPP limit report
Cached time: 20200713065040
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.084 seconds
Real time usage: 0.085 seconds
Preprocessor visited node count: 757/1000000
Preprocessor generated node count: 9630/1000000
Post‐expand include size: 5284/2097152 bytes
Template argument size: 1994/2097152 bytes
Highest expansion depth: 11/40
Expensive parser function count: 0/3
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%   44.533      1 - -total
 45.70%   20.353      1 - Template:Citation
 43.03%   19.163      1 - Template:Infobox
 37.47%   16.687      1 - Template:Citation/core
 33.32%   14.840      2 - Template:Person
  4.54%    2.024      2 - Template:Link
  2.19%    0.977      3 - Template:-
-->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="index.php?title=Enhance_Local_Contrast_(CLAHE)&amp;oldid=41235">http://imagej.net/index.php?title=Enhance_Local_Contrast_(CLAHE)&amp;oldid=41235</a>"</div>
							</div>

			<div id="footer">
				<p> This page was last modified on 24 January 2020, at 11:54.</p><ul><li><a href="ImageJ:Privacy_policy" title="ImageJ:Privacy policy">Privacy policy</a></li><li><a href="ImageJ:About" class="mw-redirect" title="ImageJ:About">About ImageJ</a></li><li><a href="Imprint" title="Imprint">Imprint</a></li><li><a href="index.php?title=Enhance_Local_Contrast_(CLAHE)&amp;mobileaction=toggle_view_mobile" class="noprint stopMobileRedirectToggle">Mobile view</a></li></ul>			</div>

			<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="Special:Categories" title="Special:Categories">Categories</a>: <ul><li><a href="Category:Plugins" title="Category:Plugins">Plugins</a></li><li><a href="Category:Filtering" title="Category:Filtering">Filtering</a></li></ul></div></div>		</div>

		<div id="bottom-wrap">
		</div>
		<script>(window.RLQ=window.RLQ||[]).push(function(){mw.loader.load(["ext.fancytree","ext.suckerfish","ext.cite.a11y","mediawiki.action.view.postEdit","site","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest","ext.SimpleTooltip"]);});</script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":313});});</script>
		</body>
		</html>
		