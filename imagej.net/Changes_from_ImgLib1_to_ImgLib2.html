<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8"/>
<title>Changes from ImgLib1 to ImgLib2 - ImageJ</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Changes_from_ImgLib1_to_ImgLib2","wgTitle":"Changes from ImgLib1 to ImgLib2","wgCurRevisionId":29499,"wgRevisionId":29499,"wgArticleId":1286,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Changes_from_ImgLib1_to_ImgLib2","wgRelevantArticleId":1286,"wgRequestId":"9964303cf11e8dc2742a0ed1","wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgPreferredVariant":"en","fancytree_path":"/extensions/TreeAndMenu/fancytree"});mw.loader.state({"site.styles":"ready","noscript":"ready","user.styles":"ready","user.cssprefs":"ready","user":"ready","user.options":"loading","user.tokens":"loading","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.sectionAnchor":"ready","skins.erudite":"ready"});mw.loader.implement("user.options@0j3lz3q",function($,jQuery,require,module){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens@1ku9xth",function ( $, jQuery, require, module ) {
mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});/*@nomin*/;

});mw.loader.load(["mediawiki.page.startup"]);});</script>
<link rel="stylesheet" href="load.php%3Fdebug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%252Cshared%257Cmediawiki.sectionAnchor%257Cskins.erudite&amp;only=styles&amp;skin=erudite.css"/>
<script async="" src="load.php%3Fdebug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=erudite"></script>
<link rel="stylesheet" href="extensions/TreeAndMenu/fancytree/fancytree.css"/><link rel="stylesheet" href="extensions/TreeAndMenu/suckerfish/suckerfish.css"/>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="load.php%3Fdebug=false&amp;lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=erudite.css"/>
<meta name="generator" content="MediaWiki 1.28.0"/>
<meta name="description" content="In ImgLib, the Image class was a wrapper for a limited subset of possible meta-data and a Container that provided access to the actual pixels.  The overwhelming majority of methods in both Image and Container were almost identical.  Furthermore, implementing algorithms for Image limited their portability to situations where different meta-data or less meta-data was required or different strategies for pixel access were appropriate."/>
<link rel="shortcut icon" href="skins/ij2.ico"/>

<script type="text/javascript" src="extensions/SyntaxHighlighter/syntaxhighlighter/scripts/shCore.js"></script>
<script type="text/javascript" src="extensions/SyntaxHighlighter/syntaxhighlighter/scripts/shBrushJava.js"></script>
<script type="text/javascript">
SyntaxHighlighter.all();
</script>
<link rel="stylesheet" type="text/css" media="screen" href="extensions/SyntaxHighlighter/syntaxhighlighter/styles/shCoreMinit.css" />

	<meta property="og:type" content="article"/>

	<meta property="og:site_name" content="ImageJ"/>

	<meta property="og:title" content="Changes from ImgLib1 to ImgLib2"/>

	<meta property="og:description" content="In ImgLib, the Image class was a wrapper for a limited subset of possible meta-data and a Container that provided access to the actual pixels.  The overwhelming majority of methods in both Image and Container were almost identical.  Furthermore, implementing algorithms for Image limited their portability to situations where different meta-data or less meta-data was required or different strategies for pixel access were appropriate."/>


<meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Changes_from_ImgLib1_to_ImgLib2 rootpage-Changes_from_ImgLib1_to_ImgLib2 skin-erudite action-view">
		<div class="mw-jump">
			<a href="Changes_from_ImgLib1_to_ImgLib2.html#bodyContent">Skip to content</a>, 			<a href="Changes_from_ImgLib1_to_ImgLib2.html#search">Skip to search</a>
		</div>

		<div id="top-wrap" role="banner">
			<h1><a href="Welcome" title="ImageJ" rel="home">ImageJ</a></h1>
			<div id="tagline">From ImageJ</div>

			<a id="menubutton" href="Changes_from_ImgLib1_to_ImgLib2.html#menu">Menu</a>
			<div id="nav" role="navigation">
			<ul id='menu'>
<li id="menu-item-n-About"><a href="ImageJ">About</a></li>
<li id="menu-item-n-Downloads"><a href="Downloads">Downloads</a></li>
<li id="menu-item-n-Learn"><a href="Learn">Learn</a></li>
<li id="menu-item-n-Develop"><a href="Development">Develop</a></li>
<li id="menu-item-n-News"><a href="News">News</a></li>
<li id="menu-item-n-Events"><a href="Events">Events</a></li>
<li id="menu-item-n-Help"><a href="Help">Help</a></li>
</ul>
			</div>
		</div>

		<div id="mw-js-message"></div>
		
		<div id="main" role="main">

			<div id="bodyContent">
				<h1>Changes from ImgLib1 to ImgLib2</h1>
				
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="project-info">
<span class="project-logo"><a href="ImgLib2" title="ImgLib2"><img class="simple-tooltip simple-tooltip-img" data-simple-tooltip="This page describes content which is part of the ImgLib2 multidimensional image processing library. Click the logo for details." src="_images/0/0a/Imglib2-icon.png"></img></a></span></div>At the <a href="2011_Hackathon_in_Madison" title="2011 Hackathon in Madison">Madison hackathon</a>, quite a lot has been done about design issues of the originally published ImgLib (which was already the 6th generation). Unfortunately, these improvements were not possible in a fully backwards-compatible manner.
<p><br />
</p>
<div style=""><div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="Changes_from_ImgLib1_to_ImgLib2.html#Summary"><span class="tocnumber">1</span> <span class="toctext">Summary</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="Changes_from_ImgLib1_to_ImgLib2.html#Where_is_the_Image.3F"><span class="tocnumber">2</span> <span class="toctext">Where is the Image?</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="Changes_from_ImgLib1_to_ImgLib2.html#Where_is_the_LocalizableCursor.3F"><span class="tocnumber">3</span> <span class="toctext">Where is the LocalizableCursor?</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="Changes_from_ImgLib1_to_ImgLib2.html#Where_is_the_LocalizableByDimCursor.3F"><span class="tocnumber">4</span> <span class="toctext">Where is the LocalizableByDimCursor?</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="Changes_from_ImgLib1_to_ImgLib2.html#How_does_ImgLib2_handle_OutOfBounds.3F"><span class="tocnumber">5</span> <span class="toctext">How does ImgLib2 handle OutOfBounds?</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="Changes_from_ImgLib1_to_ImgLib2.html#Where_did_the_NeighborhoodCursor_and_RegionOfInterestCursor_go.3F"><span class="tocnumber">6</span> <span class="toctext">Where did the NeighborhoodCursor and RegionOfInterestCursor go?</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="Changes_from_ImgLib1_to_ImgLib2.html#Where_is_the_Chunk.3F"><span class="tocnumber">7</span> <span class="toctext">Where is the Chunk?</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="Changes_from_ImgLib1_to_ImgLib2.html#Changes_within_ImgLib2"><span class="tocnumber">8</span> <span class="toctext">Changes within ImgLib2</span></a></li>
</ul>
</div>
</div>
<h3><span class="mw-headline" id="Summary">Summary</span></h3>
<ul><li> Image and Container are abandoned.  In case that write access is required, use Img instead, otherwise an apropriate access interface as described below.</li>
<li> The ImageOpener is renamed to now ImgOpener accordingly.</li></ul>
<h2><span class="mw-headline" id="Where_is_the_Image.3F">Where is the Image?</span></h2>
<div class="thumb tright"><div class="thumbinner" style="width:363px;"><a href="./File:Imglib2-data.png" class="image"><img alt="" src="_images/5/5d/Imglib2-data.png" width="361" height="240" class="thumbimage" /></a>  <div class="thumbcaption"><div class="magnify"><a href="./File:Imglib2-data.png" class="internal" title="Enlarge"></a></div><b>Fig. 1</b>  ImgLib2 interfaces for data collections in <i>n</i>-dimensional Euclidean space.  The key feature is distinction between random access vs. iteration and real vs. integer coordinate access.</div></div></div>
<p>In <i>ImgLib</i>, the <i>Image</i> class was a wrapper for a limited subset of possible meta-data and a <i>Container</i> that provided access to the actual pixels.  The overwhelming majority of methods in both <i>Image</i> and <i>Container</i> were almost identical.  Furthermore, implementing algorithms for <i>Image</i> limited their portability to situations where different meta-data or less meta-data was required or different strategies for pixel access were appropriate.
</p><p>In ImgLib2, the Image class has been abandoned.  Instead, there is a set of interfaces that describe how data elements (pixels) can be accessed.  Fig. 2 shows a UML-diagram visualizing the interface inheritance graph.  The most important interfaces are
</p>
<ul><li> <i>RandomAccessible</i>, <i>RealRandomAccessible</i></li>
<li> <i>IterableInterval</i>, <i>IterableRealInterval</i></li></ul>
<p>Actual images that store pixels in a regular equidistant grid implement the <i>Img</i> interface that combines a reasonable subset of the above interfaces.  The basic storage strategies like <i>ArrayImg</i>, <i>CellImg</i>, <i>PlanarImg</i>, <i>ImagePlusImg</i> or <i>ListImg</i> implement this interface and can be used directly without being wrapped into something else.
</p><p>Opposed to the intuitive shortcut that you would just replace <i>Image</i> by <i>Img</i> then, we suggest to consider implementing algorithms for the type of pixel access that you actually need.  Iterating and localizing all pixels is possible with <i>IterableRealInterval</i> or <i>IterableInterval</i>, random access comes from <i>RandomAccessible</i> and <i>RealRandomAccessible</i>.  That is, the <i>Img</i> interface is almost always a too strict constraint for the possible input, but usually a good choice for writing the result.
</p>
<h2><span class="mw-headline" id="Where_is_the_LocalizableCursor.3F">Where is the LocalizableCursor?</span></h2>
<div class="thumb tright"><div class="thumbinner" style="width:363px;"><a href="./File:Imglib2-access.png" class="image"><img alt="" src="_images/2/2c/Imglib2-access.png" width="361" height="272" class="thumbimage" /></a>  <div class="thumbcaption"><div class="magnify"><a href="./File:Imglib2-access.png" class="internal" title="Enlarge"></a></div><b>Fig. 2</b>  ImgLib2 interfaces for access to sample data and to real and integer coordinates in <i>n</i>-dimensional Euclidean space.</div></div></div>
<p>Iteration in ImgLib2 (as in ImgLib) implies constant and thus repeatable order.  Therefore a <i>Cursor</i> can always localize itself, either by going the hard way and reasoning the position from it's iteration index or by tracking the position per move.  There is no extra interface required to distinguish this behavior but you can choose which <i>Cursor</i> to acquire by <i>Iterable(Real)Interval.cursor()</i> and <i>Iterable(Real)Interval.localizingCursor()</i>.  Fig. 2 shows a UML-diagram visualizing the interface inheritance graph.
</p>
<div style="clear:both;"></div>
<p><br />
</p>
<h2><span class="mw-headline" id="Where_is_the_LocalizableByDimCursor.3F">Where is the LocalizableByDimCursor?</span></h2>
<p>The <i>LocalizableByDimCursor</i> was a combination of an iterator and random access.  Combining these two concepts is a bad idea and so we split them.  Random access is provided by classes implementing the interfaces <i>RandomAccess</i> or <i>RealRandomAccess</i>.  You get them by <i>RandomAccessible.randomAccess()</i> or <i>RealRandomAccessible.realRandomAccess()</i> respectively.  Fig. 2 shows a UML-diagram visualizing the interface inheritance graph.
</p>
<h2><span class="mw-headline" id="How_does_ImgLib2_handle_OutOfBounds.3F">How does ImgLib2 handle OutOfBounds?</span></h2>
<p>Handling out of bounds behavior is invariant to data storage.  We have therefore moved it into the final implementations <i>ExtendedRandomAccessibleInterval</i> and <i>ExtendedRealRandomAccessibleRealInterval</i>.  The usage is trivial as follows:
</p>
<pre class="brush:java">
ExtendedRandomAccessibleInterval&lt; IntType, Img&lt; IntType&gt; &gt; extendedInterval =
    new ExtendedRandomAccessibleInterval&lt; IntType, Img&lt; IntType &gt; &gt;(
        myIntImg,
        new OutOfBoundsMirrorFactory&lt; IntType, Img&lt; IntType &gt; &gt;( Boundary.DOUBLE ) );
RandomAccess&lt; IntType &gt; randomAccess = extendedInterval.randomAccess();
</pre>
<p>That way, out of boundary location handling is available for all Intervals that are compatible with the passed <i>OutOfBoundsFactory</i> (the existing work for all <i>RandomAccessible</i> &amp; <i>Interval</i>).
</p><p>A simple shortcut is to call:
</p>
<pre class="brush:java">
RandomAccessible&lt; IntType &gt; interval = Views.extend( myIntImg, 
     new OutOfBoundsMirrorFactory&lt; IntType, Img&lt; IntType &gt; &gt;( Boundary.DOUBLE ) );
</pre>
<p>For standard out of bounds strategies there are also static convenience methods:
</p>
<pre class="brush:java">
/* Mirroring Strategy where the last pixel is the mirror */
RandomAccessible&lt; IntType &gt; interval = Views.extendMirrorSingle( myIntImg );

/* Mirroring Strategy where the mirror lies behind the last pixel */
RandomAccessible&lt; IntType &gt; interval = Views.extendMirrorDouble( myIntImg );

/* Strategy where periodicity of the space is assumed (like FFT) */
RandomAccessible&lt; IntType &gt; interval = Views.extendPeriodic( myIntImg );

/* Strategy that returns a constant value outside the boundaries */
RandomAccessible&lt; IntType &gt; interval = Views.extendValue( myIntImg, new IntType( 5 ) );
</pre>
<p>They placed in the Views class because it is a special view onto an Img&lt;T&gt; or also any RandomAccessibleInterval&lt;T&gt;.
</p>
<h2><span class="mw-headline" id="Where_did_the_NeighborhoodCursor_and_RegionOfInterestCursor_go.3F">Where did the NeighborhoodCursor and RegionOfInterestCursor go?</span></h2>
<p>They have been removed and will be replaced by a slightly different concept that was not possible in ImgLib before due to lack of appropriate interfaces.  Both <i>Neighborhood</i> and <i>HyperBox</i> will implement <i>IterableInterval</i> and/or <i>RandomAccessible</i>.  They will be provided by an <i>IterableInterval&lt; Neighborhood &gt;</i> or <i>RandomAccessible&lt; HyperBox &gt;</i> respectively (plus other combinations, and real variants).
</p>
<h2><span class="mw-headline" id="Where_is_the_Chunk.3F">Where is the Chunk?</span></h2>
<p><i>Chunk</i> was introduced as a way for parallel processing of independent sections on iterable data.  We have replaced it by <i>IterableIntervalSubset</i> which is an <i>IterableInterval</i> itself and thus can be used transparently in all implementations using <i>IterableInterval</i>.
</p>
<h2><span class="mw-headline" id="Changes_within_ImgLib2">Changes within ImgLib2</span></h2>
<ul><li> ImgCursor has been removed for being empty---simply use Cursor instead</li>
<li> The ImgOpener returns an ImgPlus, not an Img to store additional meta-data as retrieved through LOCI bioformats.</li></ul>

<!-- 
NewPP limit report
Cached time: 20200713064811
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.032 seconds
Real time usage: 0.035 seconds
Preprocessor visited node count: 97/1000000
Preprocessor generated node count: 436/1000000
Post‐expand include size: 229/2097152 bytes
Template argument size: 7/2097152 bytes
Highest expansion depth: 4/40
Expensive parser function count: 0/3
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%    4.432      1 - -total
 52.64%    2.333      1 - Template:Project
 24.84%    1.101      1 - Template:TOC
 16.92%    0.750      1 - Template:Clear
-->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="index.php?title=Changes_from_ImgLib1_to_ImgLib2&amp;oldid=29499">http://imagej.net/index.php?title=Changes_from_ImgLib1_to_ImgLib2&amp;oldid=29499</a>"</div>
							</div>

			<div id="footer">
				<p> This page was last modified on 22 March 2017, at 12:26.</p><ul><li><a href="./ImageJ:Privacy_policy" title="ImageJ:Privacy policy">Privacy policy</a></li><li><a href="./ImageJ:About" class="mw-redirect" title="ImageJ:About">About ImageJ</a></li><li><a href="Imprint" title="Imprint">Imprint</a></li></ul>			</div>

			<div id="catlinks" class="catlinks catlinks-allhidden" data-mw="interface"></div>		</div>

		<div id="bottom-wrap">
		</div>
		<script>(window.RLQ=window.RLQ||[]).push(function(){mw.loader.load(["ext.fancytree","ext.suckerfish","mediawiki.toc","mediawiki.action.view.postEdit","site","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest","ext.SimpleTooltip"]);});</script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":241});});</script>
		</body>
		</html>
		