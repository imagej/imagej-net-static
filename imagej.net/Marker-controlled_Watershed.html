<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">
<head>
<meta charset="UTF-8"/>
<title>Marker-controlled Watershed - ImageJ</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Marker-controlled_Watershed","wgTitle":"Marker-controlled Watershed","wgCurRevisionId":43323,"wgRevisionId":43323,"wgArticleId":2425,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Plugins","Segmentation","Mathematical morphology"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Marker-controlled_Watershed","wgRelevantArticleId":2425,"wgRequestId":"18c1c3d47531f6317d41b0e6","wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgPreferredVariant":"en","fancytree_path":"/extensions/TreeAndMenu/fancytree"});mw.loader.state({"site.styles":"ready","noscript":"ready","user.styles":"ready","user.cssprefs":"ready","user":"ready","user.options":"loading","user.tokens":"loading","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.sectionAnchor":"ready","skins.erudite":"ready"});mw.loader.implement("user.options@0j3lz3q",function($,jQuery,require,module){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens@1ku9xth",function ( $, jQuery, require, module ) {
mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});/*@nomin*/;

});mw.loader.load(["mediawiki.page.startup"]);});</script>
<link rel="stylesheet" href="erudite14.css"/>
<link rel="stylesheet" href="extensions/TreeAndMenu/fancytree/fancytree.css"/><link rel="stylesheet" href="extensions/TreeAndMenu/suckerfish/suckerfish.css"/>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="erudite15.css"/>
<meta name="generator" content="MediaWiki 1.28.0"/>
<meta name="description" content="Marker-controlled Watershed is an ImageJ/Fiji plugin to segment grayscale images of any type (8, 16 and 32-bit) in 2D and 3D based on the marker-controlled watershed algorithm (Meyer and Beucher, 1990). This algorithm considers the input  image as a topographic surface (where higher pixel values mean higher altitude) and simulates its flooding from specific seed points or markers. A common choice for the markers are the local minima of the gradient of the image, but the method works on any specific marker, either selected manually by the user or determined automatically by another algorithm."/>
<link rel="shortcut icon" href="skins/ij2.ico"/>
	<meta property="og:type" content="article"/>

	<meta property="og:site_name" content="ImageJ"/>

	<meta property="og:title" content="Marker-controlled Watershed"/>

	<meta property="og:description" content="Marker-controlled Watershed is an ImageJ/Fiji plugin to segment grayscale images of any type (8, 16 and 32-bit) in 2D and 3D based on the marker-controlled watershed algorithm (Meyer and Beucher, 1990). This algorithm considers the input  image as a topographic surface (where higher pixel values mean higher altitude) and simulates its flooding from specific seed points or markers. A common choice for the markers are the local minima of the gradient of the image, but the method works on any specific marker, either selected manually by the user or determined automatically by another algorithm."/>


<meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Marker-controlled_Watershed rootpage-Marker-controlled_Watershed skin-erudite action-view">
		<div id="top-wrap" role="banner">
			<h1><a href="Welcome" title="ImageJ" rel="home">ImageJ</a></h1>
			<div id="tagline">From ImageJ</div>

			<a id="menubutton" href="Marker-controlled_Watershed.html#menu">Menu</a>
			<div id="nav" role="navigation">
			<ul id='menu'>
<li id="menu-item-n-About"><a href="ImageJ">About</a></li>
<li id="menu-item-n-Downloads"><a href="Downloads">Downloads</a></li>
<li id="menu-item-n-Learn"><a href="Learn">Learn</a></li>
<li id="menu-item-n-Develop"><a href="Development">Develop</a></li>
<li id="menu-item-n-News"><a href="News">News</a></li>
<li id="menu-item-n-Events"><a href="Events">Events</a></li>
<li id="menu-item-n-Help"><a href="Help">Help</a></li>
</ul>
			</div>
		</div>

		<div id="mw-js-message"></div>
		
		<div id="main" role="main">

			<div id="bodyContent">
				<div style="font-size: large; border: 1px solid black; padding: 1em; margin-bottom: 1em; text-align: center; background-color: #fda;">
					This is a read-only version of imagej.net, available during the transition to the new website, which you can preview <a href="https://imagej.github.io/">here</a>.
					<br>Please direct any questions or issues to <a href="https://forum.image.sc/t/imagej-wiki-is-down/39672">this Image.sc Forum thread</a>.
					<br>Thank you for your patience as we improve the website!
				</div>

				<h1>Marker-controlled Watershed</h1>
				
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><table class="infobox" cellspacing="5" style="max-width: 31em; font-size: 90%; text-align: left; float: right; border: 1px solid #a0a0a0;">
<tr>
<th colspan="2" style="text-align: center; font-size: 130%;"> <div style="float: left"></div>Marker-controlled Watershed (IJPB-plugins)<div style="clear: left;"></div>
</th></tr>
<tr>
<th> Author
</th>
<td> <a href="./User:Iarganda" title="User:Iarganda">Ignacio Arganda-Carreras</a>, David Legland
</td></tr>




<tr>
<th> Maintainer
</th>
<td> <a href="./User:Iarganda" title="User:Iarganda">Ignacio Arganda-Carreras</a>
</td></tr>


<tr>
<th> Source
</th>
<td> <a rel="nofollow" class="external text" href="https://github.com/ijpb/ijpb-plugins/">on GitHub</a>
</td></tr>
<tr>
<th> Initial release
</th>
<td> July 3<sup>rd</sup>, 2014
</td></tr>
<tr>
<th> Latest version
</th>
<td> July 23<sup>rd</sup>, 2019 (<a href="MorphoLibJ" title="MorphoLibJ">MorphoLibJ</a> v1.4.1)
</td></tr>
<tr>
<th> Development status
</th>
<td> stable, active
</td></tr>
<tr>
<th> Category
</th>
<td> <a href="./Category:Segmentation" title="Category:Segmentation">Segmentation</a>, <a href="./Category:Mathematical_morphology" title="Category:Mathematical morphology">Mathematical morphology</a>
</td></tr>

</table>
<table>
<tr>
<td style="vertical-align:top"><div class="thumb tright"><div class="thumbinner" style="width:258px;"><div class="MediaTransformError" style="width: 256px; height: 0px; display:inline-block;">Error creating thumbnail: Unable to save thumbnail to destination</div>  <div class="thumbcaption"><div class="magnify"><a href="./File:Watershed-flooding-markers-blobs-gradient.gif" class="internal" title="Enlarge"></a></div>Marker-controlled flooding on the gradient image of the blobs sample.</div></div></div>
</td></tr></table>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="Marker-controlled_Watershed.html#Introduction"><span class="tocnumber">1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="Marker-controlled_Watershed.html#Usage"><span class="tocnumber">2</span> <span class="toctext">Usage</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="Marker-controlled_Watershed.html#Installation"><span class="tocnumber">3</span> <span class="toctext">Installation</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="Marker-controlled_Watershed.html#References"><span class="tocnumber">4</span> <span class="toctext">References</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="Marker-controlled_Watershed.html#See_also"><span class="tocnumber">5</span> <span class="toctext">See also</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="Marker-controlled_Watershed.html#License"><span class="tocnumber">6</span> <span class="toctext">License</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Introduction">Introduction</span></h2>
<p>Marker-controlled Watershed is an ImageJ/Fiji plugin to segment grayscale images of any type (8, 16 and 32-bit) in 2D and 3D based on the marker-controlled watershed algorithm (Meyer and Beucher, 1990). This algorithm considers the input  image as a topographic surface (where higher pixel values mean higher altitude) and simulates its flooding from specific seed points or <b>markers</b>. A common choice for the markers are the local minima of the gradient of the image, but the method works on any specific marker, either selected manually by the user or determined automatically by another algorithm.
</p>
<h2><span class="mw-headline" id="Usage">Usage</span></h2>
<div class="thumb tright"><div class="thumbinner" style="width:302px;"><a href="./File:Marker-controlled-Watershed-dialog.png" class="image"><img alt="" src="_images/3/38/Marker-controlled-Watershed-dialog.png" width="300" height="332" class="thumbimage" /></a>  <div class="thumbcaption"><div class="magnify"><a href="./File:Marker-controlled-Watershed-dialog.png" class="internal" title="Enlarge"></a></div>Main dialog of the Marker-controlled Watershed plugin</div></div></div>
<p>Marker-controlled Watershed needs at least two images to run:
</p>
<ul><li> The <b>Input</b> image: a 2D or 3D grayscale image to flood, usually the gradient of an image.</li>
<li> The <b>Marker</b> image: an image of the same dimensions as the input containing the seed points or markers as connected regions of voxels, each of them with a different label. They correspond usually to the local minima of the input image, but they can be set arbitrarily.</li></ul>
<p>And it can optionally admit a third image:
</p>
<ul><li> The <b>Mask</b> image: a binary image of the same dimensions as input and marker which can be used to restrict the areas of application of the algorithm. Set to "None" to run the method on the whole input image.</li></ul>
<p>Rest of parameters:
</p>
<ul><li> <b>Binary markers</b>: select to specify that markers are binary and need to be labeled.</li>
<li> <b>Calculate dams</b>: select to enable the calculation of watershed lines.</li>
<li> <b>Use diagonal connectivity</b>: select to allow the flooding in diagonal directions.</li></ul>
<p>Output:
</p>
<ul><li> Labeled image containing the catchment basins and (optionally) watershed lines (dams).</li></ul>
<div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:742px;"><a href="./File:Arabidopsis-nucleus-segmentation.png" class="image"><img alt="" src="_images/c/c3/Arabidopsis-nucleus-segmentation.png" width="740" height="158" class="thumbimage" /></a>  <div class="thumbcaption"><div class="magnify"><a href="./File:Arabidopsis-nucleus-segmentation.png" class="internal" title="Enlarge"></a></div>Example of marker-controlled watershed segmentation on nucleus of <i>Arabidopsis thaliana</i> (image courtesy of Kaori Sakai and Javier Arpon, INRA-Versailles)</div></div></div></div>
<h2><span class="mw-headline" id="Installation">Installation</span></h2>
<p>The Marker-controlled Watershed plugin is part of the <a href="MorphoLibJ" title="MorphoLibJ">MorphoLibJ</a> library. To install it, you just need to <a href="How_to_follow_a_3rd_party_update_site#Add_update_sites" class="mw-redirect" title="How to follow a 3rd party update site"> add</a> the IJPB-plugins update site:
</p><p>1) Select <span><em><span style="border-bottom:1px dotted #ccc;"> Help </span>&#160;&#8250; <span style="border-bottom:1px dotted #ccc;"> Update...</span></em></span> from the Fiji menu to start the updater.
</p><p>2) Click on <i>Manage update sites</i>. This brings up a dialog where you can activate additional update sites.
</p><p>3) Activate the IJPB-plugins update site and close the dialog. Now you should see an additional jar file for download.
</p><p>4) Click <i>Apply changes</i> and restart Fiji.
</p><p>You should now find the plugin under the sub-menu <span><em><span style="border-bottom:1px dotted #ccc;"> Plugins </span>&#160;&#8250; <span style="border-bottom:1px dotted #ccc;"> MorphoLibJ </span>&#160;&#8250; <span style="border-bottom:1px dotted #ccc;"> Segmentation</span></em></span>.
</p><p><b>Note</b>: Marker-controlled Watershed is only one of the plugins included in the <a href="MorphoLibJ" title="MorphoLibJ">MorphoLibJ</a> suite. By following these installation steps, you will be installing as well the rest of plugins in the suite.
</p>
<h2><span class="mw-headline" id="References">References</span></h2>
<ol><li> Fernand Meyer and Serge Beucher. "Morphological segmentation." Journal of visual communication and image representation 1.1 (1990): 21-46.</li>
<li> Soille, P., "Morphological Image Analysis: Principles and Applications", Springer-Verlag, 1999, pp. 170-171.</li>
<li> David Legland, Ignacio Arganda-Carreras, Philippe Andrey; <a rel="nofollow" class="external text" href="http://bioinformatics.oxfordjournals.org/content/early/2016/07/19/bioinformatics.btw413">MorphoLibJ: integrated library and plugins for mathematical morphology with ImageJ</a>. Bioinformatics 2016; 32 (22): 3532-3534. doi: 10.1093/bioinformatics/btw413</li></ol>
<h2><span class="mw-headline" id="See_also">See also</span></h2>
<ul><li> <a href="Interactive_Marker-controlled_Watershed" title="Interactive Marker-controlled Watershed">Interactive Marker-controlled Watershed</a>, same idea as this plugin but with user-defined seed points.</li>
<li> <a href="Morphological_Segmentation" title="Morphological Segmentation">Morphological Segmentation</a>, a plugin with a graphical user interface to segment 2D/3D images based on morphological operations and the watershed algorithm.</li>
<li> <a href="Classic_Watershed" title="Classic Watershed">Classic Watershed</a>, plugin implementing the original watershed algorithm to segment 2D/3D grayscale images.</li>
<li> <a rel="nofollow" class="external text" href="http://cmm.ensmp.fr/~beucher/wtshed.html">Serge Beucher's site</a>, with graphic descriptions and animations of the watershed algorithms.</li>
<li> <a rel="nofollow" class="external text" href="http://www.esiee.fr/~info/tw/index.html">G. Bertrand's Topological Watershed site</a>, with papers, lecture slides and source code.</li></ul>
<h2><span class="mw-headline" id="License">License</span></h2>
<p>This program is <b>free software</b>; you can redistribute it and/or modify it under the terms of the <b>GNU General Public License</b> as published by the Free Software Foundation (<a rel="nofollow" class="external free" href="http://www.gnu.org/licenses/gpl.txt">http://www.gnu.org/licenses/gpl.txt</a>).
</p><p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more details.
</p>
<!-- 
NewPP limit report
Cached time: 20200713072938
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.060 seconds
Real time usage: 0.062 seconds
Preprocessor visited node count: 375/1000000
Preprocessor generated node count: 4488/1000000
Post‐expand include size: 2352/2097152 bytes
Template argument size: 897/2097152 bytes
Highest expansion depth: 10/40
Expensive parser function count: 0/3
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%   24.517      1 - -total
 75.53%   18.519      1 - Template:Infobox
 50.11%   12.285      2 - Template:Person
 23.40%    5.738      2 - Template:Bc
  8.23%    2.019      1 - Template:GitHub
  7.35%    1.802      3 - Template:Arrow
-->
</div><div class="printfooter">
Retrieved from "<a dir="ltr" href="index.php?title=Marker-controlled_Watershed&amp;oldid=43323">http://imagej.net/index.php?title=Marker-controlled_Watershed&amp;oldid=43323</a>"</div>
							</div>

			<div id="footer">
				<p> This page was last modified on 5 March 2020, at 06:12.</p><ul><li><a href="./ImageJ:Privacy_policy" title="ImageJ:Privacy policy">Privacy policy</a></li><li><a href="./ImageJ:About" class="mw-redirect" title="ImageJ:About">About ImageJ</a></li><li><a href="Imprint" title="Imprint">Imprint</a></li></ul>			</div>

			<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="./Special:Categories" title="Special:Categories">Categories</a>: <ul><li><a href="./Category:Plugins" title="Category:Plugins">Plugins</a></li><li><a href="./Category:Segmentation" title="Category:Segmentation">Segmentation</a></li><li><a href="./Category:Mathematical_morphology" title="Category:Mathematical morphology">Mathematical morphology</a></li></ul></div></div>		</div>

		<div id="bottom-wrap">
			<div id="footer-wrap-inner">
				<div id="ternary" class="footer">
					<ul>
						<li class="widget">
							<img id="logo" src="skins/imagej-128.png" alt="">
						</li>
					</ul>
				</div>
			</div>
		</div>
		<script>(window.RLQ=window.RLQ||[]).push(function(){mw.loader.load(["ext.fancytree","ext.suckerfish","mediawiki.toc","mediawiki.action.view.postEdit","site","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest","ext.SimpleTooltip"]);});</script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":278});});</script>
		</body>
		</html>
		